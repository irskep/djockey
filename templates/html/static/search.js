var e=Object.create;var{getPrototypeOf:GG,defineProperty:m,getOwnPropertyNames:QG}=Object;var UG=Object.prototype.hasOwnProperty;var XG=(Q,G,U)=>{U=Q!=null?e(GG(Q)):{};const X=G||!Q||!Q.__esModule?m(U,"default",{value:Q,enumerable:!0}):U;for(let Y of QG(Q))if(!UG.call(X,Y))m(X,Y,{get:()=>Q[Y],enumerable:!0});return X};var YG=(Q,G)=>()=>(G||Q((G={exports:{}}).exports,G),G.exports);var s=YG((u,d)=>{(function(){var Q=function(G){var U=new Q.Builder;return U.pipeline.add(Q.trimmer,Q.stopWordFilter,Q.stemmer),U.searchPipeline.add(Q.stemmer),G.call(U,U),U.build()};Q.version="2.3.9";/*!
   * lunr.utils
   * Copyright (C) 2020 Oliver Nightingale
   */Q.utils={},Q.utils.warn=function(G){return function(U){if(G.console&&console.warn)console.warn(U)}}(this),Q.utils.asString=function(G){if(G===void 0||G===null)return"";else return G.toString()},Q.utils.clone=function(G){if(G===null||G===void 0)return G;var U=Object.create(null),X=Object.keys(G);for(var Y=0;Y<X.length;Y++){var Z=X[Y],$=G[Z];if(Array.isArray($)){U[Z]=$.slice();continue}if(typeof $==="string"||typeof $==="number"||typeof $==="boolean"){U[Z]=$;continue}throw new TypeError("clone is not deep and does not support nested objects")}return U},Q.FieldRef=function(G,U,X){this.docRef=G,this.fieldName=U,this._stringValue=X},Q.FieldRef.joiner="/",Q.FieldRef.fromString=function(G){var U=G.indexOf(Q.FieldRef.joiner);if(U===-1)throw"malformed field ref string";var X=G.slice(0,U),Y=G.slice(U+1);return new Q.FieldRef(Y,X,G)},Q.FieldRef.prototype.toString=function(){if(this._stringValue==null)this._stringValue=this.fieldName+Q.FieldRef.joiner+this.docRef;return this._stringValue};/*!
   * lunr.Set
   * Copyright (C) 2020 Oliver Nightingale
   */Q.Set=function(G){if(this.elements=Object.create(null),G){this.length=G.length;for(var U=0;U<this.length;U++)this.elements[G[U]]=!0}else this.length=0},Q.Set.complete={intersect:function(G){return G},union:function(){return this},contains:function(){return!0}},Q.Set.empty={intersect:function(){return this},union:function(G){return G},contains:function(){return!1}},Q.Set.prototype.contains=function(G){return!!this.elements[G]},Q.Set.prototype.intersect=function(G){var U,X,Y,Z=[];if(G===Q.Set.complete)return this;if(G===Q.Set.empty)return G;if(this.length<G.length)U=this,X=G;else U=G,X=this;Y=Object.keys(U.elements);for(var $=0;$<Y.length;$++){var A=Y[$];if(A in X.elements)Z.push(A)}return new Q.Set(Z)},Q.Set.prototype.union=function(G){if(G===Q.Set.complete)return Q.Set.complete;if(G===Q.Set.empty)return this;return new Q.Set(Object.keys(this.elements).concat(Object.keys(G.elements)))},Q.idf=function(G,U){var X=0;for(var Y in G){if(Y=="_index")continue;X+=Object.keys(G[Y]).length}var Z=(U-X+0.5)/(X+0.5);return Math.log(1+Math.abs(Z))},Q.Token=function(G,U){this.str=G||"",this.metadata=U||{}},Q.Token.prototype.toString=function(){return this.str},Q.Token.prototype.update=function(G){return this.str=G(this.str,this.metadata),this},Q.Token.prototype.clone=function(G){return G=G||function(U){return U},new Q.Token(G(this.str,this.metadata),this.metadata)};/*!
   * lunr.tokenizer
   * Copyright (C) 2020 Oliver Nightingale
   */Q.tokenizer=function(G,U){if(G==null||G==null)return[];if(Array.isArray(G))return G.map(function(D){return new Q.Token(Q.utils.asString(D).toLowerCase(),Q.utils.clone(U))});var X=G.toString().toLowerCase(),Y=X.length,Z=[];for(var $=0,A=0;$<=Y;$++){var O=X.charAt($),J=$-A;if(O.match(Q.tokenizer.separator)||$==Y){if(J>0){var z=Q.utils.clone(U)||{};z.position=[A,J],z.index=Z.length,Z.push(new Q.Token(X.slice(A,$),z))}A=$+1}}return Z},Q.tokenizer.separator=/[\s\-]+/;/*!
   * lunr.Pipeline
   * Copyright (C) 2020 Oliver Nightingale
   */Q.Pipeline=function(){this._stack=[]},Q.Pipeline.registeredFunctions=Object.create(null),Q.Pipeline.registerFunction=function(G,U){if(U in this.registeredFunctions)Q.utils.warn("Overwriting existing registered function: "+U);G.label=U,Q.Pipeline.registeredFunctions[G.label]=G},Q.Pipeline.warnIfFunctionNotRegistered=function(G){var U=G.label&&G.label in this.registeredFunctions;if(!U)Q.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",G)},Q.Pipeline.load=function(G){var U=new Q.Pipeline;return G.forEach(function(X){var Y=Q.Pipeline.registeredFunctions[X];if(Y)U.add(Y);else throw new Error("Cannot load unregistered function: "+X)}),U},Q.Pipeline.prototype.add=function(){var G=Array.prototype.slice.call(arguments);G.forEach(function(U){Q.Pipeline.warnIfFunctionNotRegistered(U),this._stack.push(U)},this)},Q.Pipeline.prototype.after=function(G,U){Q.Pipeline.warnIfFunctionNotRegistered(U);var X=this._stack.indexOf(G);if(X==-1)throw new Error("Cannot find existingFn");X=X+1,this._stack.splice(X,0,U)},Q.Pipeline.prototype.before=function(G,U){Q.Pipeline.warnIfFunctionNotRegistered(U);var X=this._stack.indexOf(G);if(X==-1)throw new Error("Cannot find existingFn");this._stack.splice(X,0,U)},Q.Pipeline.prototype.remove=function(G){var U=this._stack.indexOf(G);if(U==-1)return;this._stack.splice(U,1)},Q.Pipeline.prototype.run=function(G){var U=this._stack.length;for(var X=0;X<U;X++){var Y=this._stack[X],Z=[];for(var $=0;$<G.length;$++){var A=Y(G[$],$,G);if(A===null||A===void 0||A==="")continue;if(Array.isArray(A))for(var O=0;O<A.length;O++)Z.push(A[O]);else Z.push(A)}G=Z}return G},Q.Pipeline.prototype.runString=function(G,U){var X=new Q.Token(G,U);return this.run([X]).map(function(Y){return Y.toString()})},Q.Pipeline.prototype.reset=function(){this._stack=[]},Q.Pipeline.prototype.toJSON=function(){return this._stack.map(function(G){return Q.Pipeline.warnIfFunctionNotRegistered(G),G.label})};/*!
   * lunr.Vector
   * Copyright (C) 2020 Oliver Nightingale
   */Q.Vector=function(G){this._magnitude=0,this.elements=G||[]},Q.Vector.prototype.positionForIndex=function(G){if(this.elements.length==0)return 0;var U=0,X=this.elements.length/2,Y=X-U,Z=Math.floor(Y/2),$=this.elements[Z*2];while(Y>1){if($<G)U=Z;if($>G)X=Z;if($==G)break;Y=X-U,Z=U+Math.floor(Y/2),$=this.elements[Z*2]}if($==G)return Z*2;if($>G)return Z*2;if($<G)return(Z+1)*2},Q.Vector.prototype.insert=function(G,U){this.upsert(G,U,function(){throw"duplicate index"})},Q.Vector.prototype.upsert=function(G,U,X){this._magnitude=0;var Y=this.positionForIndex(G);if(this.elements[Y]==G)this.elements[Y+1]=X(this.elements[Y+1],U);else this.elements.splice(Y,0,G,U)},Q.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;var G=0,U=this.elements.length;for(var X=1;X<U;X+=2){var Y=this.elements[X];G+=Y*Y}return this._magnitude=Math.sqrt(G)},Q.Vector.prototype.dot=function(G){var U=0,X=this.elements,Y=G.elements,Z=X.length,$=Y.length,A=0,O=0,J=0,z=0;while(J<Z&&z<$)if(A=X[J],O=Y[z],A<O)J+=2;else if(A>O)z+=2;else if(A==O)U+=X[J+1]*Y[z+1],J+=2,z+=2;return U},Q.Vector.prototype.similarity=function(G){return this.dot(G)/this.magnitude()||0},Q.Vector.prototype.toArray=function(){var G=new Array(this.elements.length/2);for(var U=1,X=0;U<this.elements.length;U+=2,X++)G[X]=this.elements[U];return G},Q.Vector.prototype.toJSON=function(){return this.elements};/*!
   * lunr.stemmer
   * Copyright (C) 2020 Oliver Nightingale
   * Includes code from - http://tartarus.org/~martin/PorterStemmer/js.txt
   */Q.stemmer=function(){var G={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},U={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},X="[^aeiou]",Y="[aeiouy]",Z=X+"[^aeiouy]*",$=Y+"[aeiou]*",A="^("+Z+")?"+$+Z,O="^("+Z+")?"+$+Z+"("+$+")?$",J="^("+Z+")?"+$+Z+$+Z,z="^("+Z+")?"+Y,D=new RegExp(A),C=new RegExp(J),T=new RegExp(O),P=new RegExp(z),F=/^(.+?)(ss|i)es$/,W=/^(.+?)([^s])s$/,K=/^(.+?)eed$/,L=/^(.+?)(ed|ing)$/,v=/.$/,j=/(at|bl|iz)$/,R=new RegExp("([^aeiouylsz])\\1$"),g=new RegExp("^"+Z+Y+"[^aeiouwxy]$"),b=/^(.+?[^aeiou])y$/,p=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,h=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,k=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,x=/^(.+?)(s|t)(ion)$/,q=/^(.+?)e$/,c=/ll$/,f=new RegExp("^"+Z+Y+"[^aeiouwxy]$"),w=function N(H){var S,E,I,B,V,M,y;if(H.length<3)return H;if(I=H.substr(0,1),I=="y")H=I.toUpperCase()+H.substr(1);if(B=F,V=W,B.test(H))H=H.replace(B,"$1$2");else if(V.test(H))H=H.replace(V,"$1$2");if(B=K,V=L,B.test(H)){var _=B.exec(H);if(B=D,B.test(_[1]))B=v,H=H.replace(B,"")}else if(V.test(H)){var _=V.exec(H);if(S=_[1],V=P,V.test(S)){if(H=S,V=j,M=R,y=g,V.test(H))H=H+"e";else if(M.test(H))B=v,H=H.replace(B,"");else if(y.test(H))H=H+"e"}}if(B=b,B.test(H)){var _=B.exec(H);S=_[1],H=S+"i"}if(B=p,B.test(H)){var _=B.exec(H);if(S=_[1],E=_[2],B=D,B.test(S))H=S+G[E]}if(B=h,B.test(H)){var _=B.exec(H);if(S=_[1],E=_[2],B=D,B.test(S))H=S+U[E]}if(B=k,V=x,B.test(H)){var _=B.exec(H);if(S=_[1],B=C,B.test(S))H=S}else if(V.test(H)){var _=V.exec(H);if(S=_[1]+_[2],V=C,V.test(S))H=S}if(B=q,B.test(H)){var _=B.exec(H);if(S=_[1],B=C,V=T,M=f,B.test(S)||V.test(S)&&!M.test(S))H=S}if(B=c,V=C,B.test(H)&&V.test(H))B=v,H=H.replace(B,"");if(I=="y")H=I.toLowerCase()+H.substr(1);return H};return function(N){return N.update(w)}}(),Q.Pipeline.registerFunction(Q.stemmer,"stemmer");/*!
   * lunr.stopWordFilter
   * Copyright (C) 2020 Oliver Nightingale
   */Q.generateStopWordFilter=function(G){var U=G.reduce(function(X,Y){return X[Y]=Y,X},{});return function(X){if(X&&U[X.toString()]!==X.toString())return X}},Q.stopWordFilter=Q.generateStopWordFilter(["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]),Q.Pipeline.registerFunction(Q.stopWordFilter,"stopWordFilter");/*!
   * lunr.trimmer
   * Copyright (C) 2020 Oliver Nightingale
   */Q.trimmer=function(G){return G.update(function(U){return U.replace(/^\W+/,"").replace(/\W+$/,"")})},Q.Pipeline.registerFunction(Q.trimmer,"trimmer");/*!
   * lunr.TokenSet
   * Copyright (C) 2020 Oliver Nightingale
   */Q.TokenSet=function(){this.final=!1,this.edges={},this.id=Q.TokenSet._nextId,Q.TokenSet._nextId+=1},Q.TokenSet._nextId=1,Q.TokenSet.fromArray=function(G){var U=new Q.TokenSet.Builder;for(var X=0,Y=G.length;X<Y;X++)U.insert(G[X]);return U.finish(),U.root},Q.TokenSet.fromClause=function(G){if("editDistance"in G)return Q.TokenSet.fromFuzzyString(G.term,G.editDistance);else return Q.TokenSet.fromString(G.term)},Q.TokenSet.fromFuzzyString=function(G,U){var X=new Q.TokenSet,Y=[{node:X,editsRemaining:U,str:G}];while(Y.length){var Z=Y.pop();if(Z.str.length>0){var $=Z.str.charAt(0),A;if($ in Z.node.edges)A=Z.node.edges[$];else A=new Q.TokenSet,Z.node.edges[$]=A;if(Z.str.length==1)A.final=!0;Y.push({node:A,editsRemaining:Z.editsRemaining,str:Z.str.slice(1)})}if(Z.editsRemaining==0)continue;if("*"in Z.node.edges)var O=Z.node.edges["*"];else{var O=new Q.TokenSet;Z.node.edges["*"]=O}if(Z.str.length==0)O.final=!0;if(Y.push({node:O,editsRemaining:Z.editsRemaining-1,str:Z.str}),Z.str.length>1)Y.push({node:Z.node,editsRemaining:Z.editsRemaining-1,str:Z.str.slice(1)});if(Z.str.length==1)Z.node.final=!0;if(Z.str.length>=1){if("*"in Z.node.edges)var J=Z.node.edges["*"];else{var J=new Q.TokenSet;Z.node.edges["*"]=J}if(Z.str.length==1)J.final=!0;Y.push({node:J,editsRemaining:Z.editsRemaining-1,str:Z.str.slice(1)})}if(Z.str.length>1){var z=Z.str.charAt(0),D=Z.str.charAt(1),C;if(D in Z.node.edges)C=Z.node.edges[D];else C=new Q.TokenSet,Z.node.edges[D]=C;if(Z.str.length==1)C.final=!0;Y.push({node:C,editsRemaining:Z.editsRemaining-1,str:z+Z.str.slice(2)})}}return X},Q.TokenSet.fromString=function(G){var U=new Q.TokenSet,X=U;for(var Y=0,Z=G.length;Y<Z;Y++){var $=G[Y],A=Y==Z-1;if($=="*")U.edges[$]=U,U.final=A;else{var O=new Q.TokenSet;O.final=A,U.edges[$]=O,U=O}}return X},Q.TokenSet.prototype.toArray=function(){var G=[],U=[{prefix:"",node:this}];while(U.length){var X=U.pop(),Y=Object.keys(X.node.edges),Z=Y.length;if(X.node.final)X.prefix.charAt(0),G.push(X.prefix);for(var $=0;$<Z;$++){var A=Y[$];U.push({prefix:X.prefix.concat(A),node:X.node.edges[A]})}}return G},Q.TokenSet.prototype.toString=function(){if(this._str)return this._str;var G=this.final?"1":"0",U=Object.keys(this.edges).sort(),X=U.length;for(var Y=0;Y<X;Y++){var Z=U[Y],$=this.edges[Z];G=G+Z+$.id}return G},Q.TokenSet.prototype.intersect=function(G){var U=new Q.TokenSet,X=void 0,Y=[{qNode:G,output:U,node:this}];while(Y.length){X=Y.pop();var Z=Object.keys(X.qNode.edges),$=Z.length,A=Object.keys(X.node.edges),O=A.length;for(var J=0;J<$;J++){var z=Z[J];for(var D=0;D<O;D++){var C=A[D];if(C==z||z=="*"){var T=X.node.edges[C],P=X.qNode.edges[z],F=T.final&&P.final,W=void 0;if(C in X.output.edges)W=X.output.edges[C],W.final=W.final||F;else W=new Q.TokenSet,W.final=F,X.output.edges[C]=W;Y.push({qNode:P,output:W,node:T})}}}}return U},Q.TokenSet.Builder=function(){this.previousWord="",this.root=new Q.TokenSet,this.uncheckedNodes=[],this.minimizedNodes={}},Q.TokenSet.Builder.prototype.insert=function(G){var U,X=0;if(G<this.previousWord)throw new Error("Out of order word insertion");for(var Y=0;Y<G.length&&Y<this.previousWord.length;Y++){if(G[Y]!=this.previousWord[Y])break;X++}if(this.minimize(X),this.uncheckedNodes.length==0)U=this.root;else U=this.uncheckedNodes[this.uncheckedNodes.length-1].child;for(var Y=X;Y<G.length;Y++){var Z=new Q.TokenSet,$=G[Y];U.edges[$]=Z,this.uncheckedNodes.push({parent:U,char:$,child:Z}),U=Z}U.final=!0,this.previousWord=G},Q.TokenSet.Builder.prototype.finish=function(){this.minimize(0)},Q.TokenSet.Builder.prototype.minimize=function(G){for(var U=this.uncheckedNodes.length-1;U>=G;U--){var X=this.uncheckedNodes[U],Y=X.child.toString();if(Y in this.minimizedNodes)X.parent.edges[X.char]=this.minimizedNodes[Y];else X.child._str=Y,this.minimizedNodes[Y]=X.child;this.uncheckedNodes.pop()}};/*!
   * lunr.Index
   * Copyright (C) 2020 Oliver Nightingale
   */Q.Index=function(G){this.invertedIndex=G.invertedIndex,this.fieldVectors=G.fieldVectors,this.tokenSet=G.tokenSet,this.fields=G.fields,this.pipeline=G.pipeline},Q.Index.prototype.search=function(G){return this.query(function(U){var X=new Q.QueryParser(G,U);X.parse()})},Q.Index.prototype.query=function(G){var U=new Q.Query(this.fields),X=Object.create(null),Y=Object.create(null),Z=Object.create(null),$=Object.create(null),A=Object.create(null);for(var O=0;O<this.fields.length;O++)Y[this.fields[O]]=new Q.Vector;G.call(U,U);for(var O=0;O<U.clauses.length;O++){var J=U.clauses[O],z=null,D=Q.Set.empty;if(J.usePipeline)z=this.pipeline.runString(J.term,{fields:J.fields});else z=[J.term];for(var C=0;C<z.length;C++){var T=z[C];J.term=T;var P=Q.TokenSet.fromClause(J),F=this.tokenSet.intersect(P).toArray();if(F.length===0&&J.presence===Q.Query.presence.REQUIRED){for(var W=0;W<J.fields.length;W++){var K=J.fields[W];$[K]=Q.Set.empty}break}for(var L=0;L<F.length;L++){var v=F[L],j=this.invertedIndex[v],R=j._index;for(var W=0;W<J.fields.length;W++){var K=J.fields[W],g=j[K],b=Object.keys(g),p=v+"/"+K,h=new Q.Set(b);if(J.presence==Q.Query.presence.REQUIRED){if(D=D.union(h),$[K]===void 0)$[K]=Q.Set.complete}if(J.presence==Q.Query.presence.PROHIBITED){if(A[K]===void 0)A[K]=Q.Set.empty;A[K]=A[K].union(h);continue}if(Y[K].upsert(R,J.boost,function(t,r){return t+r}),Z[p])continue;for(var k=0;k<b.length;k++){var x=b[k],q=new Q.FieldRef(x,K),c=g[x],f;if((f=X[q])===void 0)X[q]=new Q.MatchData(v,K,c);else f.add(v,K,c)}Z[p]=!0}}}if(J.presence===Q.Query.presence.REQUIRED)for(var W=0;W<J.fields.length;W++){var K=J.fields[W];$[K]=$[K].intersect(D)}}var w=Q.Set.complete,N=Q.Set.empty;for(var O=0;O<this.fields.length;O++){var K=this.fields[O];if($[K])w=w.intersect($[K]);if(A[K])N=N.union(A[K])}var H=Object.keys(X),S=[],E=Object.create(null);if(U.isNegated()){H=Object.keys(this.fieldVectors);for(var O=0;O<H.length;O++){var q=H[O],I=Q.FieldRef.fromString(q);X[q]=new Q.MatchData}}for(var O=0;O<H.length;O++){var I=Q.FieldRef.fromString(H[O]),B=I.docRef;if(!w.contains(B))continue;if(N.contains(B))continue;var V=this.fieldVectors[I],M=Y[I.fieldName].similarity(V),y;if((y=E[B])!==void 0)y.score+=M,y.matchData.combine(X[I]);else{var _={ref:B,score:M,matchData:X[I]};E[B]=_,S.push(_)}}return S.sort(function(n,l){return l.score-n.score})},Q.Index.prototype.toJSON=function(){var G=Object.keys(this.invertedIndex).sort().map(function(X){return[X,this.invertedIndex[X]]},this),U=Object.keys(this.fieldVectors).map(function(X){return[X,this.fieldVectors[X].toJSON()]},this);return{version:Q.version,fields:this.fields,fieldVectors:U,invertedIndex:G,pipeline:this.pipeline.toJSON()}},Q.Index.load=function(G){var U={},X={},Y=G.fieldVectors,Z=Object.create(null),$=G.invertedIndex,A=new Q.TokenSet.Builder,O=Q.Pipeline.load(G.pipeline);if(G.version!=Q.version)Q.utils.warn("Version mismatch when loading serialised index. Current version of lunr '"+Q.version+"' does not match serialized index '"+G.version+"'");for(var J=0;J<Y.length;J++){var z=Y[J],D=z[0],C=z[1];X[D]=new Q.Vector(C)}for(var J=0;J<$.length;J++){var z=$[J],T=z[0],P=z[1];A.insert(T),Z[T]=P}return A.finish(),U.fields=G.fields,U.fieldVectors=X,U.invertedIndex=Z,U.tokenSet=A.root,U.pipeline=O,new Q.Index(U)};/*!
   * lunr.Builder
   * Copyright (C) 2020 Oliver Nightingale
   */Q.Builder=function(){this._ref="id",this._fields=Object.create(null),this._documents=Object.create(null),this.invertedIndex=Object.create(null),this.fieldTermFrequencies={},this.fieldLengths={},this.tokenizer=Q.tokenizer,this.pipeline=new Q.Pipeline,this.searchPipeline=new Q.Pipeline,this.documentCount=0,this._b=0.75,this._k1=1.2,this.termIndex=0,this.metadataWhitelist=[]},Q.Builder.prototype.ref=function(G){this._ref=G},Q.Builder.prototype.field=function(G,U){if(/\//.test(G))throw new RangeError("Field '"+G+"' contains illegal character '/'");this._fields[G]=U||{}},Q.Builder.prototype.b=function(G){if(G<0)this._b=0;else if(G>1)this._b=1;else this._b=G},Q.Builder.prototype.k1=function(G){this._k1=G},Q.Builder.prototype.add=function(G,U){var X=G[this._ref],Y=Object.keys(this._fields);this._documents[X]=U||{},this.documentCount+=1;for(var Z=0;Z<Y.length;Z++){var $=Y[Z],A=this._fields[$].extractor,O=A?A(G):G[$],J=this.tokenizer(O,{fields:[$]}),z=this.pipeline.run(J),D=new Q.FieldRef(X,$),C=Object.create(null);this.fieldTermFrequencies[D]=C,this.fieldLengths[D]=0,this.fieldLengths[D]+=z.length;for(var T=0;T<z.length;T++){var P=z[T];if(C[P]==null)C[P]=0;if(C[P]+=1,this.invertedIndex[P]==null){var F=Object.create(null);F._index=this.termIndex,this.termIndex+=1;for(var W=0;W<Y.length;W++)F[Y[W]]=Object.create(null);this.invertedIndex[P]=F}if(this.invertedIndex[P][$][X]==null)this.invertedIndex[P][$][X]=Object.create(null);for(var K=0;K<this.metadataWhitelist.length;K++){var L=this.metadataWhitelist[K],v=P.metadata[L];if(this.invertedIndex[P][$][X][L]==null)this.invertedIndex[P][$][X][L]=[];this.invertedIndex[P][$][X][L].push(v)}}}},Q.Builder.prototype.calculateAverageFieldLengths=function(){var G=Object.keys(this.fieldLengths),U=G.length,X={},Y={};for(var Z=0;Z<U;Z++){var $=Q.FieldRef.fromString(G[Z]),A=$.fieldName;Y[A]||(Y[A]=0),Y[A]+=1,X[A]||(X[A]=0),X[A]+=this.fieldLengths[$]}var O=Object.keys(this._fields);for(var Z=0;Z<O.length;Z++){var J=O[Z];X[J]=X[J]/Y[J]}this.averageFieldLength=X},Q.Builder.prototype.createFieldVectors=function(){var G={},U=Object.keys(this.fieldTermFrequencies),X=U.length,Y=Object.create(null);for(var Z=0;Z<X;Z++){var $=Q.FieldRef.fromString(U[Z]),A=$.fieldName,O=this.fieldLengths[$],J=new Q.Vector,z=this.fieldTermFrequencies[$],D=Object.keys(z),C=D.length,T=this._fields[A].boost||1,P=this._documents[$.docRef].boost||1;for(var F=0;F<C;F++){var W=D[F],K=z[W],L=this.invertedIndex[W]._index,v,j,R;if(Y[W]===void 0)v=Q.idf(this.invertedIndex[W],this.documentCount),Y[W]=v;else v=Y[W];j=v*((this._k1+1)*K)/(this._k1*(1-this._b+this._b*(O/this.averageFieldLength[A]))+K),j*=T,j*=P,R=Math.round(j*1000)/1000,J.insert(L,R)}G[$]=J}this.fieldVectors=G},Q.Builder.prototype.createTokenSet=function(){this.tokenSet=Q.TokenSet.fromArray(Object.keys(this.invertedIndex).sort())},Q.Builder.prototype.build=function(){return this.calculateAverageFieldLengths(),this.createFieldVectors(),this.createTokenSet(),new Q.Index({invertedIndex:this.invertedIndex,fieldVectors:this.fieldVectors,tokenSet:this.tokenSet,fields:Object.keys(this._fields),pipeline:this.searchPipeline})},Q.Builder.prototype.use=function(G){var U=Array.prototype.slice.call(arguments,1);U.unshift(this),G.apply(this,U)},Q.MatchData=function(G,U,X){var Y=Object.create(null),Z=Object.keys(X||{});for(var $=0;$<Z.length;$++){var A=Z[$];Y[A]=X[A].slice()}if(this.metadata=Object.create(null),G!==void 0)this.metadata[G]=Object.create(null),this.metadata[G][U]=Y},Q.MatchData.prototype.combine=function(G){var U=Object.keys(G.metadata);for(var X=0;X<U.length;X++){var Y=U[X],Z=Object.keys(G.metadata[Y]);if(this.metadata[Y]==null)this.metadata[Y]=Object.create(null);for(var $=0;$<Z.length;$++){var A=Z[$],O=Object.keys(G.metadata[Y][A]);if(this.metadata[Y][A]==null)this.metadata[Y][A]=Object.create(null);for(var J=0;J<O.length;J++){var z=O[J];if(this.metadata[Y][A][z]==null)this.metadata[Y][A][z]=G.metadata[Y][A][z];else this.metadata[Y][A][z]=this.metadata[Y][A][z].concat(G.metadata[Y][A][z])}}}},Q.MatchData.prototype.add=function(G,U,X){if(!(G in this.metadata)){this.metadata[G]=Object.create(null),this.metadata[G][U]=X;return}if(!(U in this.metadata[G])){this.metadata[G][U]=X;return}var Y=Object.keys(X);for(var Z=0;Z<Y.length;Z++){var $=Y[Z];if($ in this.metadata[G][U])this.metadata[G][U][$]=this.metadata[G][U][$].concat(X[$]);else this.metadata[G][U][$]=X[$]}},Q.Query=function(G){this.clauses=[],this.allFields=G},Q.Query.wildcard=new String("*"),Q.Query.wildcard.NONE=0,Q.Query.wildcard.LEADING=1,Q.Query.wildcard.TRAILING=2,Q.Query.presence={OPTIONAL:1,REQUIRED:2,PROHIBITED:3},Q.Query.prototype.clause=function(G){if(!("fields"in G))G.fields=this.allFields;if(!("boost"in G))G.boost=1;if(!("usePipeline"in G))G.usePipeline=!0;if(!("wildcard"in G))G.wildcard=Q.Query.wildcard.NONE;if(G.wildcard&Q.Query.wildcard.LEADING&&G.term.charAt(0)!=Q.Query.wildcard)G.term="*"+G.term;if(G.wildcard&Q.Query.wildcard.TRAILING&&G.term.slice(-1)!=Q.Query.wildcard)G.term=""+G.term+"*";if(!("presence"in G))G.presence=Q.Query.presence.OPTIONAL;return this.clauses.push(G),this},Q.Query.prototype.isNegated=function(){for(var G=0;G<this.clauses.length;G++)if(this.clauses[G].presence!=Q.Query.presence.PROHIBITED)return!1;return!0},Q.Query.prototype.term=function(G,U){if(Array.isArray(G))return G.forEach(function(Y){this.term(Y,Q.utils.clone(U))},this),this;var X=U||{};return X.term=G.toString(),this.clause(X),this},Q.QueryParseError=function(G,U,X){this.name="QueryParseError",this.message=G,this.start=U,this.end=X},Q.QueryParseError.prototype=new Error,Q.QueryLexer=function(G){this.lexemes=[],this.str=G,this.length=G.length,this.pos=0,this.start=0,this.escapeCharPositions=[]},Q.QueryLexer.prototype.run=function(){var G=Q.QueryLexer.lexText;while(G)G=G(this)},Q.QueryLexer.prototype.sliceString=function(){var G=[],U=this.start,X=this.pos;for(var Y=0;Y<this.escapeCharPositions.length;Y++)X=this.escapeCharPositions[Y],G.push(this.str.slice(U,X)),U=X+1;return G.push(this.str.slice(U,this.pos)),this.escapeCharPositions.length=0,G.join("")},Q.QueryLexer.prototype.emit=function(G){this.lexemes.push({type:G,str:this.sliceString(),start:this.start,end:this.pos}),this.start=this.pos},Q.QueryLexer.prototype.escapeCharacter=function(){this.escapeCharPositions.push(this.pos-1),this.pos+=1},Q.QueryLexer.prototype.next=function(){if(this.pos>=this.length)return Q.QueryLexer.EOS;var G=this.str.charAt(this.pos);return this.pos+=1,G},Q.QueryLexer.prototype.width=function(){return this.pos-this.start},Q.QueryLexer.prototype.ignore=function(){if(this.start==this.pos)this.pos+=1;this.start=this.pos},Q.QueryLexer.prototype.backup=function(){this.pos-=1},Q.QueryLexer.prototype.acceptDigitRun=function(){var G,U;do G=this.next(),U=G.charCodeAt(0);while(U>47&&U<58);if(G!=Q.QueryLexer.EOS)this.backup()},Q.QueryLexer.prototype.more=function(){return this.pos<this.length},Q.QueryLexer.EOS="EOS",Q.QueryLexer.FIELD="FIELD",Q.QueryLexer.TERM="TERM",Q.QueryLexer.EDIT_DISTANCE="EDIT_DISTANCE",Q.QueryLexer.BOOST="BOOST",Q.QueryLexer.PRESENCE="PRESENCE",Q.QueryLexer.lexField=function(G){return G.backup(),G.emit(Q.QueryLexer.FIELD),G.ignore(),Q.QueryLexer.lexText},Q.QueryLexer.lexTerm=function(G){if(G.width()>1)G.backup(),G.emit(Q.QueryLexer.TERM);if(G.ignore(),G.more())return Q.QueryLexer.lexText},Q.QueryLexer.lexEditDistance=function(G){return G.ignore(),G.acceptDigitRun(),G.emit(Q.QueryLexer.EDIT_DISTANCE),Q.QueryLexer.lexText},Q.QueryLexer.lexBoost=function(G){return G.ignore(),G.acceptDigitRun(),G.emit(Q.QueryLexer.BOOST),Q.QueryLexer.lexText},Q.QueryLexer.lexEOS=function(G){if(G.width()>0)G.emit(Q.QueryLexer.TERM)},Q.QueryLexer.termSeparator=Q.tokenizer.separator,Q.QueryLexer.lexText=function(G){while(!0){var U=G.next();if(U==Q.QueryLexer.EOS)return Q.QueryLexer.lexEOS;if(U.charCodeAt(0)==92){G.escapeCharacter();continue}if(U==":")return Q.QueryLexer.lexField;if(U=="~"){if(G.backup(),G.width()>0)G.emit(Q.QueryLexer.TERM);return Q.QueryLexer.lexEditDistance}if(U=="^"){if(G.backup(),G.width()>0)G.emit(Q.QueryLexer.TERM);return Q.QueryLexer.lexBoost}if(U=="+"&&G.width()===1)return G.emit(Q.QueryLexer.PRESENCE),Q.QueryLexer.lexText;if(U=="-"&&G.width()===1)return G.emit(Q.QueryLexer.PRESENCE),Q.QueryLexer.lexText;if(U.match(Q.QueryLexer.termSeparator))return Q.QueryLexer.lexTerm}},Q.QueryParser=function(G,U){this.lexer=new Q.QueryLexer(G),this.query=U,this.currentClause={},this.lexemeIdx=0},Q.QueryParser.prototype.parse=function(){this.lexer.run(),this.lexemes=this.lexer.lexemes;var G=Q.QueryParser.parseClause;while(G)G=G(this);return this.query},Q.QueryParser.prototype.peekLexeme=function(){return this.lexemes[this.lexemeIdx]},Q.QueryParser.prototype.consumeLexeme=function(){var G=this.peekLexeme();return this.lexemeIdx+=1,G},Q.QueryParser.prototype.nextClause=function(){var G=this.currentClause;this.query.clause(G),this.currentClause={}},Q.QueryParser.parseClause=function(G){var U=G.peekLexeme();if(U==null)return;switch(U.type){case Q.QueryLexer.PRESENCE:return Q.QueryParser.parsePresence;case Q.QueryLexer.FIELD:return Q.QueryParser.parseField;case Q.QueryLexer.TERM:return Q.QueryParser.parseTerm;default:var X="expected either a field or a term, found "+U.type;if(U.str.length>=1)X+=" with value '"+U.str+"'";throw new Q.QueryParseError(X,U.start,U.end)}},Q.QueryParser.parsePresence=function(G){var U=G.consumeLexeme();if(U==null)return;switch(U.str){case"-":G.currentClause.presence=Q.Query.presence.PROHIBITED;break;case"+":G.currentClause.presence=Q.Query.presence.REQUIRED;break;default:var X="unrecognised presence operator'"+U.str+"'";throw new Q.QueryParseError(X,U.start,U.end)}var Y=G.peekLexeme();if(Y==null){var X="expecting term or field, found nothing";throw new Q.QueryParseError(X,U.start,U.end)}switch(Y.type){case Q.QueryLexer.FIELD:return Q.QueryParser.parseField;case Q.QueryLexer.TERM:return Q.QueryParser.parseTerm;default:var X="expecting term or field, found '"+Y.type+"'";throw new Q.QueryParseError(X,Y.start,Y.end)}},Q.QueryParser.parseField=function(G){var U=G.consumeLexeme();if(U==null)return;if(G.query.allFields.indexOf(U.str)==-1){var X=G.query.allFields.map(function($){return"'"+$+"'"}).join(", "),Y="unrecognised field '"+U.str+"', possible fields: "+X;throw new Q.QueryParseError(Y,U.start,U.end)}G.currentClause.fields=[U.str];var Z=G.peekLexeme();if(Z==null){var Y="expecting term, found nothing";throw new Q.QueryParseError(Y,U.start,U.end)}switch(Z.type){case Q.QueryLexer.TERM:return Q.QueryParser.parseTerm;default:var Y="expecting term, found '"+Z.type+"'";throw new Q.QueryParseError(Y,Z.start,Z.end)}},Q.QueryParser.parseTerm=function(G){var U=G.consumeLexeme();if(U==null)return;if(G.currentClause.term=U.str.toLowerCase(),U.str.indexOf("*")!=-1)G.currentClause.usePipeline=!1;var X=G.peekLexeme();if(X==null){G.nextClause();return}switch(X.type){case Q.QueryLexer.TERM:return G.nextClause(),Q.QueryParser.parseTerm;case Q.QueryLexer.FIELD:return G.nextClause(),Q.QueryParser.parseField;case Q.QueryLexer.EDIT_DISTANCE:return Q.QueryParser.parseEditDistance;case Q.QueryLexer.BOOST:return Q.QueryParser.parseBoost;case Q.QueryLexer.PRESENCE:return G.nextClause(),Q.QueryParser.parsePresence;default:var Y="Unexpected lexeme type '"+X.type+"'";throw new Q.QueryParseError(Y,X.start,X.end)}},Q.QueryParser.parseEditDistance=function(G){var U=G.consumeLexeme();if(U==null)return;var X=parseInt(U.str,10);if(isNaN(X)){var Y="edit distance must be numeric";throw new Q.QueryParseError(Y,U.start,U.end)}G.currentClause.editDistance=X;var Z=G.peekLexeme();if(Z==null){G.nextClause();return}switch(Z.type){case Q.QueryLexer.TERM:return G.nextClause(),Q.QueryParser.parseTerm;case Q.QueryLexer.FIELD:return G.nextClause(),Q.QueryParser.parseField;case Q.QueryLexer.EDIT_DISTANCE:return Q.QueryParser.parseEditDistance;case Q.QueryLexer.BOOST:return Q.QueryParser.parseBoost;case Q.QueryLexer.PRESENCE:return G.nextClause(),Q.QueryParser.parsePresence;default:var Y="Unexpected lexeme type '"+Z.type+"'";throw new Q.QueryParseError(Y,Z.start,Z.end)}},Q.QueryParser.parseBoost=function(G){var U=G.consumeLexeme();if(U==null)return;var X=parseInt(U.str,10);if(isNaN(X)){var Y="boost must be numeric";throw new Q.QueryParseError(Y,U.start,U.end)}G.currentClause.boost=X;var Z=G.peekLexeme();if(Z==null){G.nextClause();return}switch(Z.type){case Q.QueryLexer.TERM:return G.nextClause(),Q.QueryParser.parseTerm;case Q.QueryLexer.FIELD:return G.nextClause(),Q.QueryParser.parseField;case Q.QueryLexer.EDIT_DISTANCE:return Q.QueryParser.parseEditDistance;case Q.QueryLexer.BOOST:return Q.QueryParser.parseBoost;case Q.QueryLexer.PRESENCE:return G.nextClause(),Q.QueryParser.parsePresence;default:var Y="Unexpected lexeme type '"+Z.type+"'";throw new Q.QueryParseError(Y,Z.start,Z.end)}},function(G,U){if(typeof define==="function"&&define.amd)define(U);else if(typeof u==="object")d.exports=U();else G.lunr=U()}(this,function(){return Q})})()});var o=XG(s(),1);function ZG(Q,G,U,X){if(!U.trim().length){X.innerHTML='<div class="DJSearchResults_Empty m-noquery">Type a search into the box.</div>';return}const Y=G.query(function(Z){Z.term(U,{boost:100,usePipeline:!0}),Z.term(U,{boost:10,usePipeline:!1,wildcard:o.default.Query.wildcard.TRAILING}),Z.term(U,{boost:1,editDistance:1})});if(!Y.length){X.innerHTML='<div class="DJSearchResults_Empty m-noresults">No results found.</div>';return}X.innerHTML=Y.map((Z)=>$G(Z,Q[Z.ref])).join("\n")}function $G(Q,G){const U=Q.matchData.metadata;return`
  <a class="DJSearchResult" tabindex="0" href="${G.url}">
    <h1>${i(G.name,"name",U,!1)}</h1>
    <div class="DJSearchResult_Text">${i(G.text,"text",U,!0)}</div>
  </div>`}function i(Q,G,U,X){const Y=new Array;let Z=new Array;for(let O of Object.values(U)){if(!O[G])continue;Z=Z.concat(O[G].position)}Z.sort((O,J)=>O[0]-J[0]);let $=0;function A(){if($>=Q.length)return null;const O=Q.indexOf("\n",$),J=$;let z="";if(O>=0)z=Q.slice($,O),$=O+1;else z=Q.slice($),$=Q.length;return{startInclusive:J,endExclusive:$,text:z}}if(X){let O=A();while(O){const J=Z.filter((z)=>z[0]>=O.startInclusive&&z[0]<O.endExclusive);if(J.length)Y.push(`<p>${a(O,J)}`);O=A()}}else Y.push(a({startInclusive:0,endExclusive:Q.length,text:Q},Z));return Y.join("\n")}function a(Q,G){const U=new Array;let X=0;for(let[Y,Z]of G){const $=Y-Q.startInclusive;if($>X)U.push(Q.text.slice(X,$));U.push("<mark>"),U.push(Q.text.slice($,$+Z)),U.push("</mark>"),X=$+Z}if(X<Q.text.length)U.push(Q.text.slice(X));if(!U.length)return"";return U.join("")}window.addEventListener("dj-onload",()=>{const Q=document.querySelector("#dj-search-input");if(!Q)return;const G=document.querySelector("#dj-search-menu-results");if(!G)return;const U=document.querySelector("#dj-search-menu");if(!U)return;document.querySelectorAll(".DJSearchMenu_FlexContainer").forEach((J)=>{J.addEventListener("click",(z)=>{if(z.target!==J)return;U.hidePopover()})});const X=window;if(!X.djSearchIndex){console.warn("Search index not found");return}const Y=X.djSearchIndex,Z={},$=o.default(function(){this.ref("url"),this.field("name"),this.field("text"),this.field("url"),this.metadataWhitelist=["position"];for(let J of Y)this.add(J),Z[J.url]=J});function A(J,z,D=!1,C){let T=null;return function(){let P=this,F=arguments,W=function(){if(T=null,!D)J.apply(P,F)},K=D&&!T;if(clearTimeout(T),T=setTimeout(W,z),C)C();if(K)J.apply(P,F)}}const O=A((J)=>{ZG(Z,$,J,G)},500);Q.addEventListener("input",(J)=>{O(J.target.value)}),document.querySelector(".DJOpenSearchButton").addEventListener("click",(J)=>{return J.preventDefault(),U.showPopover(),Q.focus(),!0}),window.addEventListener("keydown",(J)=>{if(U.matches(":popover-open"))return;if(J.key==="/")U.showPopover(),Q.focus(),J.preventDefault()}),window.addEventListener("keydown",(J)=>{if(J.key==="Escape")U.hidePopover()})});

//# debugId=D94A4ABCF1A4B16864756E2164756E21
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL2x1bnIvbHVuci5qcyIsICJzcmMvY2xpZW50anMvc2VhcmNoLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWwogICAgIi8qKlxuICogbHVuciAtIGh0dHA6Ly9sdW5yanMuY29tIC0gQSBiaXQgbGlrZSBTb2xyLCBidXQgbXVjaCBzbWFsbGVyIGFuZCBub3QgYXMgYnJpZ2h0IC0gMi4zLjlcbiAqIENvcHlyaWdodCAoQykgMjAyMCBPbGl2ZXIgTmlnaHRpbmdhbGVcbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbihmdW5jdGlvbiAoKSB7XG4gIC8qKlxuICAgKiBBIGNvbnZlbmllbmNlIGZ1bmN0aW9uIGZvciBjb25maWd1cmluZyBhbmQgY29uc3RydWN0aW5nXG4gICAqIGEgbmV3IGx1bnIgSW5kZXguXG4gICAqXG4gICAqIEEgbHVuci5CdWlsZGVyIGluc3RhbmNlIGlzIGNyZWF0ZWQgYW5kIHRoZSBwaXBlbGluZSBzZXR1cFxuICAgKiB3aXRoIGEgdHJpbW1lciwgc3RvcCB3b3JkIGZpbHRlciBhbmQgc3RlbW1lci5cbiAgICpcbiAgICogVGhpcyBidWlsZGVyIG9iamVjdCBpcyB5aWVsZGVkIHRvIHRoZSBjb25maWd1cmF0aW9uIGZ1bmN0aW9uXG4gICAqIHRoYXQgaXMgcGFzc2VkIGFzIGEgcGFyYW1ldGVyLCBhbGxvd2luZyB0aGUgbGlzdCBvZiBmaWVsZHNcbiAgICogYW5kIG90aGVyIGJ1aWxkZXIgcGFyYW1ldGVycyB0byBiZSBjdXN0b21pc2VkLlxuICAgKlxuICAgKiBBbGwgZG9jdW1lbnRzIF9tdXN0XyBiZSBhZGRlZCB3aXRoaW4gdGhlIHBhc3NlZCBjb25maWcgZnVuY3Rpb24uXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciBpZHggPSBsdW5yKGZ1bmN0aW9uICgpIHtcbiAgICogICB0aGlzLmZpZWxkKCd0aXRsZScpXG4gICAqICAgdGhpcy5maWVsZCgnYm9keScpXG4gICAqICAgdGhpcy5yZWYoJ2lkJylcbiAgICpcbiAgICogICBkb2N1bWVudHMuZm9yRWFjaChmdW5jdGlvbiAoZG9jKSB7XG4gICAqICAgICB0aGlzLmFkZChkb2MpXG4gICAqICAgfSwgdGhpcylcbiAgICogfSlcbiAgICpcbiAgICogQHNlZSB7QGxpbmsgbHVuci5CdWlsZGVyfVxuICAgKiBAc2VlIHtAbGluayBsdW5yLlBpcGVsaW5lfVxuICAgKiBAc2VlIHtAbGluayBsdW5yLnRyaW1tZXJ9XG4gICAqIEBzZWUge0BsaW5rIGx1bnIuc3RvcFdvcmRGaWx0ZXJ9XG4gICAqIEBzZWUge0BsaW5rIGx1bnIuc3RlbW1lcn1cbiAgICogQG5hbWVzcGFjZSB7ZnVuY3Rpb259IGx1bnJcbiAgICovXG4gIHZhciBsdW5yID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgIHZhciBidWlsZGVyID0gbmV3IGx1bnIuQnVpbGRlcigpO1xuXG4gICAgYnVpbGRlci5waXBlbGluZS5hZGQobHVuci50cmltbWVyLCBsdW5yLnN0b3BXb3JkRmlsdGVyLCBsdW5yLnN0ZW1tZXIpO1xuXG4gICAgYnVpbGRlci5zZWFyY2hQaXBlbGluZS5hZGQobHVuci5zdGVtbWVyKTtcblxuICAgIGNvbmZpZy5jYWxsKGJ1aWxkZXIsIGJ1aWxkZXIpO1xuICAgIHJldHVybiBidWlsZGVyLmJ1aWxkKCk7XG4gIH07XG5cbiAgbHVuci52ZXJzaW9uID0gXCIyLjMuOVwiO1xuICAvKiFcbiAgICogbHVuci51dGlsc1xuICAgKiBDb3B5cmlnaHQgKEMpIDIwMjAgT2xpdmVyIE5pZ2h0aW5nYWxlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBIG5hbWVzcGFjZSBjb250YWluaW5nIHV0aWxzIGZvciB0aGUgcmVzdCBvZiB0aGUgbHVuciBsaWJyYXJ5XG4gICAqIEBuYW1lc3BhY2UgbHVuci51dGlsc1xuICAgKi9cbiAgbHVuci51dGlscyA9IHt9O1xuXG4gIC8qKlxuICAgKiBQcmludCBhIHdhcm5pbmcgbWVzc2FnZSB0byB0aGUgY29uc29sZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgVGhlIG1lc3NhZ2UgdG8gYmUgcHJpbnRlZC5cbiAgICogQG1lbWJlck9mIGx1bnIudXRpbHNcbiAgICogQGZ1bmN0aW9uXG4gICAqL1xuICBsdW5yLnV0aWxzLndhcm4gPSAoZnVuY3Rpb24gKGdsb2JhbCkge1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi9cbiAgICByZXR1cm4gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgIGlmIChnbG9iYWwuY29uc29sZSAmJiBjb25zb2xlLndhcm4pIHtcbiAgICAgICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH07XG4gICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25zb2xlICovXG4gIH0pKHRoaXMpO1xuXG4gIC8qKlxuICAgKiBDb252ZXJ0IGFuIG9iamVjdCB0byBhIHN0cmluZy5cbiAgICpcbiAgICogSW4gdGhlIGNhc2Ugb2YgYG51bGxgIGFuZCBgdW5kZWZpbmVkYCB0aGUgZnVuY3Rpb24gcmV0dXJuc1xuICAgKiB0aGUgZW1wdHkgc3RyaW5nLCBpbiBhbGwgb3RoZXIgY2FzZXMgdGhlIHJlc3VsdCBvZiBjYWxsaW5nXG4gICAqIGB0b1N0cmluZ2Agb24gdGhlIHBhc3NlZCBvYmplY3QgaXMgcmV0dXJuZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7QW55fSBvYmogVGhlIG9iamVjdCB0byBjb252ZXJ0IHRvIGEgc3RyaW5nLlxuICAgKiBAcmV0dXJuIHtTdHJpbmd9IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgcGFzc2VkIG9iamVjdC5cbiAgICogQG1lbWJlck9mIGx1bnIudXRpbHNcbiAgICovXG4gIGx1bnIudXRpbHMuYXNTdHJpbmcgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgaWYgKG9iaiA9PT0gdm9pZCAwIHx8IG9iaiA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBvYmoudG9TdHJpbmcoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIENsb25lcyBhbiBvYmplY3QuXG4gICAqXG4gICAqIFdpbGwgY3JlYXRlIGEgY29weSBvZiBhbiBleGlzdGluZyBvYmplY3Qgc3VjaCB0aGF0IGFueSBtdXRhdGlvbnNcbiAgICogb24gdGhlIGNvcHkgY2Fubm90IGFmZmVjdCB0aGUgb3JpZ2luYWwuXG4gICAqXG4gICAqIE9ubHkgc2hhbGxvdyBvYmplY3RzIGFyZSBzdXBwb3J0ZWQsIHBhc3NpbmcgYSBuZXN0ZWQgb2JqZWN0IHRvIHRoaXNcbiAgICogZnVuY3Rpb24gd2lsbCBjYXVzZSBhIFR5cGVFcnJvci5cbiAgICpcbiAgICogT2JqZWN0cyB3aXRoIHByaW1pdGl2ZXMsIGFuZCBhcnJheXMgb2YgcHJpbWl0aXZlcyBhcmUgc3VwcG9ydGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gY2xvbmUuXG4gICAqIEByZXR1cm4ge09iamVjdH0gYSBjbG9uZSBvZiB0aGUgcGFzc2VkIG9iamVjdC5cbiAgICogQHRocm93cyB7VHlwZUVycm9yfSB3aGVuIGEgbmVzdGVkIG9iamVjdCBpcyBwYXNzZWQuXG4gICAqIEBtZW1iZXJPZiBVdGlsc1xuICAgKi9cbiAgbHVuci51dGlscy5jbG9uZSA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICBpZiAob2JqID09PSBudWxsIHx8IG9iaiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxuICAgIHZhciBjbG9uZSA9IE9iamVjdC5jcmVhdGUobnVsbCksXG4gICAgICBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGtleSA9IGtleXNbaV0sXG4gICAgICAgIHZhbCA9IG9ialtrZXldO1xuXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgICAgIGNsb25lW2tleV0gPSB2YWwuc2xpY2UoKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIHZhbCA9PT0gXCJzdHJpbmdcIiB8fFxuICAgICAgICB0eXBlb2YgdmFsID09PSBcIm51bWJlclwiIHx8XG4gICAgICAgIHR5cGVvZiB2YWwgPT09IFwiYm9vbGVhblwiXG4gICAgICApIHtcbiAgICAgICAgY2xvbmVba2V5XSA9IHZhbDtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgIFwiY2xvbmUgaXMgbm90IGRlZXAgYW5kIGRvZXMgbm90IHN1cHBvcnQgbmVzdGVkIG9iamVjdHNcIlxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2xvbmU7XG4gIH07XG4gIGx1bnIuRmllbGRSZWYgPSBmdW5jdGlvbiAoZG9jUmVmLCBmaWVsZE5hbWUsIHN0cmluZ1ZhbHVlKSB7XG4gICAgdGhpcy5kb2NSZWYgPSBkb2NSZWY7XG4gICAgdGhpcy5maWVsZE5hbWUgPSBmaWVsZE5hbWU7XG4gICAgdGhpcy5fc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTtcbiAgfTtcblxuICBsdW5yLkZpZWxkUmVmLmpvaW5lciA9IFwiL1wiO1xuXG4gIGx1bnIuRmllbGRSZWYuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7XG4gICAgdmFyIG4gPSBzLmluZGV4T2YobHVuci5GaWVsZFJlZi5qb2luZXIpO1xuXG4gICAgaWYgKG4gPT09IC0xKSB7XG4gICAgICB0aHJvdyBcIm1hbGZvcm1lZCBmaWVsZCByZWYgc3RyaW5nXCI7XG4gICAgfVxuXG4gICAgdmFyIGZpZWxkUmVmID0gcy5zbGljZSgwLCBuKSxcbiAgICAgIGRvY1JlZiA9IHMuc2xpY2UobiArIDEpO1xuXG4gICAgcmV0dXJuIG5ldyBsdW5yLkZpZWxkUmVmKGRvY1JlZiwgZmllbGRSZWYsIHMpO1xuICB9O1xuXG4gIGx1bnIuRmllbGRSZWYucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9zdHJpbmdWYWx1ZSA9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuX3N0cmluZ1ZhbHVlID0gdGhpcy5maWVsZE5hbWUgKyBsdW5yLkZpZWxkUmVmLmpvaW5lciArIHRoaXMuZG9jUmVmO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9zdHJpbmdWYWx1ZTtcbiAgfTtcbiAgLyohXG4gICAqIGx1bnIuU2V0XG4gICAqIENvcHlyaWdodCAoQykgMjAyMCBPbGl2ZXIgTmlnaHRpbmdhbGVcbiAgICovXG5cbiAgLyoqXG4gICAqIEEgbHVuciBzZXQuXG4gICAqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgbHVuci5TZXQgPSBmdW5jdGlvbiAoZWxlbWVudHMpIHtcbiAgICB0aGlzLmVsZW1lbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAgIGlmIChlbGVtZW50cykge1xuICAgICAgdGhpcy5sZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLmVsZW1lbnRzW2VsZW1lbnRzW2ldXSA9IHRydWU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubGVuZ3RoID0gMDtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEEgY29tcGxldGUgc2V0IHRoYXQgY29udGFpbnMgYWxsIGVsZW1lbnRzLlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEByZWFkb25seVxuICAgKiBAdHlwZSB7bHVuci5TZXR9XG4gICAqL1xuICBsdW5yLlNldC5jb21wbGV0ZSA9IHtcbiAgICBpbnRlcnNlY3Q6IGZ1bmN0aW9uIChvdGhlcikge1xuICAgICAgcmV0dXJuIG90aGVyO1xuICAgIH0sXG5cbiAgICB1bmlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIGNvbnRhaW5zOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICB9O1xuXG4gIC8qKlxuICAgKiBBbiBlbXB0eSBzZXQgdGhhdCBjb250YWlucyBubyBlbGVtZW50cy5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAcmVhZG9ubHlcbiAgICogQHR5cGUge2x1bnIuU2V0fVxuICAgKi9cbiAgbHVuci5TZXQuZW1wdHkgPSB7XG4gICAgaW50ZXJzZWN0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgdW5pb246IGZ1bmN0aW9uIChvdGhlcikge1xuICAgICAgcmV0dXJuIG90aGVyO1xuICAgIH0sXG5cbiAgICBjb250YWluczogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIHNldCBjb250YWlucyB0aGUgc3BlY2lmaWVkIG9iamVjdC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IG9iamVjdCAtIE9iamVjdCB3aG9zZSBwcmVzZW5jZSBpbiB0aGlzIHNldCBpcyB0byBiZSB0ZXN0ZWQuXG4gICAqIEByZXR1cm5zIHtib29sZWFufSAtIFRydWUgaWYgdGhpcyBzZXQgY29udGFpbnMgdGhlIHNwZWNpZmllZCBvYmplY3QuXG4gICAqL1xuICBsdW5yLlNldC5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgcmV0dXJuICEhdGhpcy5lbGVtZW50c1tvYmplY3RdO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbmV3IHNldCBjb250YWluaW5nIG9ubHkgdGhlIGVsZW1lbnRzIHRoYXQgYXJlIHByZXNlbnQgaW4gYm90aFxuICAgKiB0aGlzIHNldCBhbmQgdGhlIHNwZWNpZmllZCBzZXQuXG4gICAqXG4gICAqIEBwYXJhbSB7bHVuci5TZXR9IG90aGVyIC0gc2V0IHRvIGludGVyc2VjdCB3aXRoIHRoaXMgc2V0LlxuICAgKiBAcmV0dXJucyB7bHVuci5TZXR9IGEgbmV3IHNldCB0aGF0IGlzIHRoZSBpbnRlcnNlY3Rpb24gb2YgdGhpcyBhbmQgdGhlIHNwZWNpZmllZCBzZXQuXG4gICAqL1xuXG4gIGx1bnIuU2V0LnByb3RvdHlwZS5pbnRlcnNlY3QgPSBmdW5jdGlvbiAob3RoZXIpIHtcbiAgICB2YXIgYSxcbiAgICAgIGIsXG4gICAgICBlbGVtZW50cyxcbiAgICAgIGludGVyc2VjdGlvbiA9IFtdO1xuXG4gICAgaWYgKG90aGVyID09PSBsdW5yLlNldC5jb21wbGV0ZSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgaWYgKG90aGVyID09PSBsdW5yLlNldC5lbXB0eSkge1xuICAgICAgcmV0dXJuIG90aGVyO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmxlbmd0aCA8IG90aGVyLmxlbmd0aCkge1xuICAgICAgYSA9IHRoaXM7XG4gICAgICBiID0gb3RoZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGEgPSBvdGhlcjtcbiAgICAgIGIgPSB0aGlzO1xuICAgIH1cblxuICAgIGVsZW1lbnRzID0gT2JqZWN0LmtleXMoYS5lbGVtZW50cyk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZWxlbWVudCA9IGVsZW1lbnRzW2ldO1xuICAgICAgaWYgKGVsZW1lbnQgaW4gYi5lbGVtZW50cykge1xuICAgICAgICBpbnRlcnNlY3Rpb24ucHVzaChlbGVtZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IGx1bnIuU2V0KGludGVyc2VjdGlvbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBuZXcgc2V0IGNvbWJpbmluZyB0aGUgZWxlbWVudHMgb2YgdGhpcyBhbmQgdGhlIHNwZWNpZmllZCBzZXQuXG4gICAqXG4gICAqIEBwYXJhbSB7bHVuci5TZXR9IG90aGVyIC0gc2V0IHRvIHVuaW9uIHdpdGggdGhpcyBzZXQuXG4gICAqIEByZXR1cm4ge2x1bnIuU2V0fSBhIG5ldyBzZXQgdGhhdCBpcyB0aGUgdW5pb24gb2YgdGhpcyBhbmQgdGhlIHNwZWNpZmllZCBzZXQuXG4gICAqL1xuXG4gIGx1bnIuU2V0LnByb3RvdHlwZS51bmlvbiA9IGZ1bmN0aW9uIChvdGhlcikge1xuICAgIGlmIChvdGhlciA9PT0gbHVuci5TZXQuY29tcGxldGUpIHtcbiAgICAgIHJldHVybiBsdW5yLlNldC5jb21wbGV0ZTtcbiAgICB9XG5cbiAgICBpZiAob3RoZXIgPT09IGx1bnIuU2V0LmVtcHR5KSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IGx1bnIuU2V0KFxuICAgICAgT2JqZWN0LmtleXModGhpcy5lbGVtZW50cykuY29uY2F0KE9iamVjdC5rZXlzKG90aGVyLmVsZW1lbnRzKSlcbiAgICApO1xuICB9O1xuICAvKipcbiAgICogQSBmdW5jdGlvbiB0byBjYWxjdWxhdGUgdGhlIGludmVyc2UgZG9jdW1lbnQgZnJlcXVlbmN5IGZvclxuICAgKiBhIHBvc3RpbmcuIFRoaXMgaXMgc2hhcmVkIGJldHdlZW4gdGhlIGJ1aWxkZXIgYW5kIHRoZSBpbmRleFxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge29iamVjdH0gcG9zdGluZyAtIFRoZSBwb3N0aW5nIGZvciBhIGdpdmVuIHRlcm1cbiAgICogQHBhcmFtIHtudW1iZXJ9IGRvY3VtZW50Q291bnQgLSBUaGUgdG90YWwgbnVtYmVyIG9mIGRvY3VtZW50cy5cbiAgICovXG4gIGx1bnIuaWRmID0gZnVuY3Rpb24gKHBvc3RpbmcsIGRvY3VtZW50Q291bnQpIHtcbiAgICB2YXIgZG9jdW1lbnRzV2l0aFRlcm0gPSAwO1xuXG4gICAgZm9yICh2YXIgZmllbGROYW1lIGluIHBvc3RpbmcpIHtcbiAgICAgIGlmIChmaWVsZE5hbWUgPT0gXCJfaW5kZXhcIikgY29udGludWU7IC8vIElnbm9yZSB0aGUgdGVybSBpbmRleCwgaXRzIG5vdCBhIGZpZWxkXG4gICAgICBkb2N1bWVudHNXaXRoVGVybSArPSBPYmplY3Qua2V5cyhwb3N0aW5nW2ZpZWxkTmFtZV0pLmxlbmd0aDtcbiAgICB9XG5cbiAgICB2YXIgeCA9XG4gICAgICAoZG9jdW1lbnRDb3VudCAtIGRvY3VtZW50c1dpdGhUZXJtICsgMC41KSAvIChkb2N1bWVudHNXaXRoVGVybSArIDAuNSk7XG5cbiAgICByZXR1cm4gTWF0aC5sb2coMSArIE1hdGguYWJzKHgpKTtcbiAgfTtcblxuICAvKipcbiAgICogQSB0b2tlbiB3cmFwcyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIHRva2VuXG4gICAqIGFzIGl0IGlzIHBhc3NlZCB0aHJvdWdoIHRoZSB0ZXh0IHByb2Nlc3NpbmcgcGlwZWxpbmUuXG4gICAqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cj0nJ10gLSBUaGUgc3RyaW5nIHRva2VuIGJlaW5nIHdyYXBwZWQuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbbWV0YWRhdGE9e31dIC0gTWV0YWRhdGEgYXNzb2NpYXRlZCB3aXRoIHRoaXMgdG9rZW4uXG4gICAqL1xuICBsdW5yLlRva2VuID0gZnVuY3Rpb24gKHN0ciwgbWV0YWRhdGEpIHtcbiAgICB0aGlzLnN0ciA9IHN0ciB8fCBcIlwiO1xuICAgIHRoaXMubWV0YWRhdGEgPSBtZXRhZGF0YSB8fCB7fTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdG9rZW4gc3RyaW5nIHRoYXQgaXMgYmVpbmcgd3JhcHBlZCBieSB0aGlzIG9iamVjdC5cbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIGx1bnIuVG9rZW4ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnN0cjtcbiAgfTtcblxuICAvKipcbiAgICogQSB0b2tlbiB1cGRhdGUgZnVuY3Rpb24gaXMgdXNlZCB3aGVuIHVwZGF0aW5nIG9yIG9wdGlvbmFsbHlcbiAgICogd2hlbiBjbG9uaW5nIGEgdG9rZW4uXG4gICAqXG4gICAqIEBjYWxsYmFjayBsdW5yLlRva2VufnVwZGF0ZUZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgLSBUaGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB0b2tlbi5cbiAgICogQHBhcmFtIHtPYmplY3R9IG1ldGFkYXRhIC0gQWxsIG1ldGFkYXRhIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHRva2VuLlxuICAgKi9cblxuICAvKipcbiAgICogQXBwbGllcyB0aGUgZ2l2ZW4gZnVuY3Rpb24gdG8gdGhlIHdyYXBwZWQgc3RyaW5nIHRva2VuLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiB0b2tlbi51cGRhdGUoZnVuY3Rpb24gKHN0ciwgbWV0YWRhdGEpIHtcbiAgICogICByZXR1cm4gc3RyLnRvVXBwZXJDYXNlKClcbiAgICogfSlcbiAgICpcbiAgICogQHBhcmFtIHtsdW5yLlRva2VufnVwZGF0ZUZ1bmN0aW9ufSBmbiAtIEEgZnVuY3Rpb24gdG8gYXBwbHkgdG8gdGhlIHRva2VuIHN0cmluZy5cbiAgICogQHJldHVybnMge2x1bnIuVG9rZW59XG4gICAqL1xuICBsdW5yLlRva2VuLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICB0aGlzLnN0ciA9IGZuKHRoaXMuc3RyLCB0aGlzLm1ldGFkYXRhKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGNsb25lIG9mIHRoaXMgdG9rZW4uIE9wdGlvbmFsbHkgYSBmdW5jdGlvbiBjYW4gYmVcbiAgICogYXBwbGllZCB0byB0aGUgY2xvbmVkIHRva2VuLlxuICAgKlxuICAgKiBAcGFyYW0ge2x1bnIuVG9rZW5+dXBkYXRlRnVuY3Rpb259IFtmbl0gLSBBbiBvcHRpb25hbCBmdW5jdGlvbiB0byBhcHBseSB0byB0aGUgY2xvbmVkIHRva2VuLlxuICAgKiBAcmV0dXJucyB7bHVuci5Ub2tlbn1cbiAgICovXG4gIGx1bnIuVG9rZW4ucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgZm4gPVxuICAgICAgZm4gfHxcbiAgICAgIGZ1bmN0aW9uIChzKSB7XG4gICAgICAgIHJldHVybiBzO1xuICAgICAgfTtcbiAgICByZXR1cm4gbmV3IGx1bnIuVG9rZW4oZm4odGhpcy5zdHIsIHRoaXMubWV0YWRhdGEpLCB0aGlzLm1ldGFkYXRhKTtcbiAgfTtcbiAgLyohXG4gICAqIGx1bnIudG9rZW5pemVyXG4gICAqIENvcHlyaWdodCAoQykgMjAyMCBPbGl2ZXIgTmlnaHRpbmdhbGVcbiAgICovXG5cbiAgLyoqXG4gICAqIEEgZnVuY3Rpb24gZm9yIHNwbGl0dGluZyBhIHN0cmluZyBpbnRvIHRva2VucyByZWFkeSB0byBiZSBpbnNlcnRlZCBpbnRvXG4gICAqIHRoZSBzZWFyY2ggaW5kZXguIFVzZXMgYGx1bnIudG9rZW5pemVyLnNlcGFyYXRvcmAgdG8gc3BsaXQgc3RyaW5ncywgY2hhbmdlXG4gICAqIHRoZSB2YWx1ZSBvZiB0aGlzIHByb3BlcnR5IHRvIGNoYW5nZSBob3cgc3RyaW5ncyBhcmUgc3BsaXQgaW50byB0b2tlbnMuXG4gICAqXG4gICAqIFRoaXMgdG9rZW5pemVyIHdpbGwgY29udmVydCBpdHMgcGFyYW1ldGVyIHRvIGEgc3RyaW5nIGJ5IGNhbGxpbmcgYHRvU3RyaW5nYCBhbmRcbiAgICogdGhlbiB3aWxsIHNwbGl0IHRoaXMgc3RyaW5nIG9uIHRoZSBjaGFyYWN0ZXIgaW4gYGx1bnIudG9rZW5pemVyLnNlcGFyYXRvcmAuXG4gICAqIEFycmF5cyB3aWxsIGhhdmUgdGhlaXIgZWxlbWVudHMgY29udmVydGVkIHRvIHN0cmluZ3MgYW5kIHdyYXBwZWQgaW4gYSBsdW5yLlRva2VuLlxuICAgKlxuICAgKiBPcHRpb25hbCBtZXRhZGF0YSBjYW4gYmUgcGFzc2VkIHRvIHRoZSB0b2tlbml6ZXIsIHRoaXMgbWV0YWRhdGEgd2lsbCBiZSBjbG9uZWQgYW5kXG4gICAqIGFkZGVkIGFzIG1ldGFkYXRhIHRvIGV2ZXJ5IHRva2VuIHRoYXQgaXMgY3JlYXRlZCBmcm9tIHRoZSBvYmplY3QgdG8gYmUgdG9rZW5pemVkLlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBwYXJhbSB7PyhzdHJpbmd8b2JqZWN0fG9iamVjdFtdKX0gb2JqIC0gVGhlIG9iamVjdCB0byBjb252ZXJ0IGludG8gdG9rZW5zXG4gICAqIEBwYXJhbSB7P29iamVjdH0gbWV0YWRhdGEgLSBPcHRpb25hbCBtZXRhZGF0YSB0byBhc3NvY2lhdGUgd2l0aCBldmVyeSB0b2tlblxuICAgKiBAcmV0dXJucyB7bHVuci5Ub2tlbltdfVxuICAgKiBAc2VlIHtAbGluayBsdW5yLlBpcGVsaW5lfVxuICAgKi9cbiAgbHVuci50b2tlbml6ZXIgPSBmdW5jdGlvbiAob2JqLCBtZXRhZGF0YSkge1xuICAgIGlmIChvYmogPT0gbnVsbCB8fCBvYmogPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgcmV0dXJuIG9iai5tYXAoZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBsdW5yLlRva2VuKFxuICAgICAgICAgIGx1bnIudXRpbHMuYXNTdHJpbmcodCkudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICBsdW5yLnV0aWxzLmNsb25lKG1ldGFkYXRhKVxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdmFyIHN0ciA9IG9iai50b1N0cmluZygpLnRvTG93ZXJDYXNlKCksXG4gICAgICBsZW4gPSBzdHIubGVuZ3RoLFxuICAgICAgdG9rZW5zID0gW107XG5cbiAgICBmb3IgKHZhciBzbGljZUVuZCA9IDAsIHNsaWNlU3RhcnQgPSAwOyBzbGljZUVuZCA8PSBsZW47IHNsaWNlRW5kKyspIHtcbiAgICAgIHZhciBjaGFyID0gc3RyLmNoYXJBdChzbGljZUVuZCksXG4gICAgICAgIHNsaWNlTGVuZ3RoID0gc2xpY2VFbmQgLSBzbGljZVN0YXJ0O1xuXG4gICAgICBpZiAoY2hhci5tYXRjaChsdW5yLnRva2VuaXplci5zZXBhcmF0b3IpIHx8IHNsaWNlRW5kID09IGxlbikge1xuICAgICAgICBpZiAoc2xpY2VMZW5ndGggPiAwKSB7XG4gICAgICAgICAgdmFyIHRva2VuTWV0YWRhdGEgPSBsdW5yLnV0aWxzLmNsb25lKG1ldGFkYXRhKSB8fCB7fTtcbiAgICAgICAgICB0b2tlbk1ldGFkYXRhW1wicG9zaXRpb25cIl0gPSBbc2xpY2VTdGFydCwgc2xpY2VMZW5ndGhdO1xuICAgICAgICAgIHRva2VuTWV0YWRhdGFbXCJpbmRleFwiXSA9IHRva2Vucy5sZW5ndGg7XG5cbiAgICAgICAgICB0b2tlbnMucHVzaChcbiAgICAgICAgICAgIG5ldyBsdW5yLlRva2VuKHN0ci5zbGljZShzbGljZVN0YXJ0LCBzbGljZUVuZCksIHRva2VuTWV0YWRhdGEpXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNsaWNlU3RhcnQgPSBzbGljZUVuZCArIDE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRva2VucztcbiAgfTtcblxuICAvKipcbiAgICogVGhlIHNlcGFyYXRvciB1c2VkIHRvIHNwbGl0IGEgc3RyaW5nIGludG8gdG9rZW5zLiBPdmVycmlkZSB0aGlzIHByb3BlcnR5IHRvIGNoYW5nZSB0aGUgYmVoYXZpb3VyIG9mXG4gICAqIGBsdW5yLnRva2VuaXplcmAgYmVoYXZpb3VyIHdoZW4gdG9rZW5pemluZyBzdHJpbmdzLiBCeSBkZWZhdWx0IHRoaXMgc3BsaXRzIG9uIHdoaXRlc3BhY2UgYW5kIGh5cGhlbnMuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQHNlZSBsdW5yLnRva2VuaXplclxuICAgKi9cbiAgbHVuci50b2tlbml6ZXIuc2VwYXJhdG9yID0gL1tcXHNcXC1dKy87XG4gIC8qIVxuICAgKiBsdW5yLlBpcGVsaW5lXG4gICAqIENvcHlyaWdodCAoQykgMjAyMCBPbGl2ZXIgTmlnaHRpbmdhbGVcbiAgICovXG5cbiAgLyoqXG4gICAqIGx1bnIuUGlwZWxpbmVzIG1haW50YWluIGFuIG9yZGVyZWQgbGlzdCBvZiBmdW5jdGlvbnMgdG8gYmUgYXBwbGllZCB0byBhbGxcbiAgICogdG9rZW5zIGluIGRvY3VtZW50cyBlbnRlcmluZyB0aGUgc2VhcmNoIGluZGV4IGFuZCBxdWVyaWVzIGJlaW5nIHJhbiBhZ2FpbnN0XG4gICAqIHRoZSBpbmRleC5cbiAgICpcbiAgICogQW4gaW5zdGFuY2Ugb2YgbHVuci5JbmRleCBjcmVhdGVkIHdpdGggdGhlIGx1bnIgc2hvcnRjdXQgd2lsbCBjb250YWluIGFcbiAgICogcGlwZWxpbmUgd2l0aCBhIHN0b3Agd29yZCBmaWx0ZXIgYW5kIGFuIEVuZ2xpc2ggbGFuZ3VhZ2Ugc3RlbW1lci4gRXh0cmFcbiAgICogZnVuY3Rpb25zIGNhbiBiZSBhZGRlZCBiZWZvcmUgb3IgYWZ0ZXIgZWl0aGVyIG9mIHRoZXNlIGZ1bmN0aW9ucyBvciB0aGVzZVxuICAgKiBkZWZhdWx0IGZ1bmN0aW9ucyBjYW4gYmUgcmVtb3ZlZC5cbiAgICpcbiAgICogV2hlbiBydW4gdGhlIHBpcGVsaW5lIHdpbGwgY2FsbCBlYWNoIGZ1bmN0aW9uIGluIHR1cm4sIHBhc3NpbmcgYSB0b2tlbiwgdGhlXG4gICAqIGluZGV4IG9mIHRoYXQgdG9rZW4gaW4gdGhlIG9yaWdpbmFsIGxpc3Qgb2YgYWxsIHRva2VucyBhbmQgZmluYWxseSBhIGxpc3Qgb2ZcbiAgICogYWxsIHRoZSBvcmlnaW5hbCB0b2tlbnMuXG4gICAqXG4gICAqIFRoZSBvdXRwdXQgb2YgZnVuY3Rpb25zIGluIHRoZSBwaXBlbGluZSB3aWxsIGJlIHBhc3NlZCB0byB0aGUgbmV4dCBmdW5jdGlvblxuICAgKiBpbiB0aGUgcGlwZWxpbmUuIFRvIGV4Y2x1ZGUgYSB0b2tlbiBmcm9tIGVudGVyaW5nIHRoZSBpbmRleCB0aGUgZnVuY3Rpb25cbiAgICogc2hvdWxkIHJldHVybiB1bmRlZmluZWQsIHRoZSByZXN0IG9mIHRoZSBwaXBlbGluZSB3aWxsIG5vdCBiZSBjYWxsZWQgd2l0aFxuICAgKiB0aGlzIHRva2VuLlxuICAgKlxuICAgKiBGb3Igc2VyaWFsaXNhdGlvbiBvZiBwaXBlbGluZXMgdG8gd29yaywgYWxsIGZ1bmN0aW9ucyB1c2VkIGluIGFuIGluc3RhbmNlIG9mXG4gICAqIGEgcGlwZWxpbmUgc2hvdWxkIGJlIHJlZ2lzdGVyZWQgd2l0aCBsdW5yLlBpcGVsaW5lLiBSZWdpc3RlcmVkIGZ1bmN0aW9ucyBjYW5cbiAgICogdGhlbiBiZSBsb2FkZWQuIElmIHRyeWluZyB0byBsb2FkIGEgc2VyaWFsaXNlZCBwaXBlbGluZSB0aGF0IHVzZXMgZnVuY3Rpb25zXG4gICAqIHRoYXQgYXJlIG5vdCByZWdpc3RlcmVkIGFuIGVycm9yIHdpbGwgYmUgdGhyb3duLlxuICAgKlxuICAgKiBJZiBub3QgcGxhbm5pbmcgb24gc2VyaWFsaXNpbmcgdGhlIHBpcGVsaW5lIHRoZW4gcmVnaXN0ZXJpbmcgcGlwZWxpbmUgZnVuY3Rpb25zXG4gICAqIGlzIG5vdCBuZWNlc3NhcnkuXG4gICAqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgbHVuci5QaXBlbGluZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9zdGFjayA9IFtdO1xuICB9O1xuXG4gIGx1bnIuUGlwZWxpbmUucmVnaXN0ZXJlZEZ1bmN0aW9ucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgLyoqXG4gICAqIEEgcGlwZWxpbmUgZnVuY3Rpb24gbWFwcyBsdW5yLlRva2VuIHRvIGx1bnIuVG9rZW4uIEEgbHVuci5Ub2tlbiBjb250YWlucyB0aGUgdG9rZW5cbiAgICogc3RyaW5nIGFzIHdlbGwgYXMgYWxsIGtub3duIG1ldGFkYXRhLiBBIHBpcGVsaW5lIGZ1bmN0aW9uIGNhbiBtdXRhdGUgdGhlIHRva2VuIHN0cmluZ1xuICAgKiBvciBtdXRhdGUgKG9yIGFkZCkgbWV0YWRhdGEgZm9yIGEgZ2l2ZW4gdG9rZW4uXG4gICAqXG4gICAqIEEgcGlwZWxpbmUgZnVuY3Rpb24gY2FuIGluZGljYXRlIHRoYXQgdGhlIHBhc3NlZCB0b2tlbiBzaG91bGQgYmUgZGlzY2FyZGVkIGJ5IHJldHVybmluZ1xuICAgKiBudWxsLCB1bmRlZmluZWQgb3IgYW4gZW1wdHkgc3RyaW5nLiBUaGlzIHRva2VuIHdpbGwgbm90IGJlIHBhc3NlZCB0byBhbnkgZG93bnN0cmVhbSBwaXBlbGluZVxuICAgKiBmdW5jdGlvbnMgYW5kIHdpbGwgbm90IGJlIGFkZGVkIHRvIHRoZSBpbmRleC5cbiAgICpcbiAgICogTXVsdGlwbGUgdG9rZW5zIGNhbiBiZSByZXR1cm5lZCBieSByZXR1cm5pbmcgYW4gYXJyYXkgb2YgdG9rZW5zLiBFYWNoIHRva2VuIHdpbGwgYmUgcGFzc2VkXG4gICAqIHRvIGFueSBkb3duc3RyZWFtIHBpcGVsaW5lIGZ1bmN0aW9ucyBhbmQgYWxsIHdpbGwgcmV0dXJuZWQgdG9rZW5zIHdpbGwgYmUgYWRkZWQgdG8gdGhlIGluZGV4LlxuICAgKlxuICAgKiBBbnkgbnVtYmVyIG9mIHBpcGVsaW5lIGZ1bmN0aW9ucyBtYXkgYmUgY2hhaW5lZCB0b2dldGhlciB1c2luZyBhIGx1bnIuUGlwZWxpbmUuXG4gICAqXG4gICAqIEBpbnRlcmZhY2UgbHVuci5QaXBlbGluZUZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7bHVuci5Ub2tlbn0gdG9rZW4gLSBBIHRva2VuIGZyb20gdGhlIGRvY3VtZW50IGJlaW5nIHByb2Nlc3NlZC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGkgLSBUaGUgaW5kZXggb2YgdGhpcyB0b2tlbiBpbiB0aGUgY29tcGxldGUgbGlzdCBvZiB0b2tlbnMgZm9yIHRoaXMgZG9jdW1lbnQvZmllbGQuXG4gICAqIEBwYXJhbSB7bHVuci5Ub2tlbltdfSB0b2tlbnMgLSBBbGwgdG9rZW5zIGZvciB0aGlzIGRvY3VtZW50L2ZpZWxkLlxuICAgKiBAcmV0dXJucyB7KD9sdW5yLlRva2VufGx1bnIuVG9rZW5bXSl9XG4gICAqL1xuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIGZ1bmN0aW9uIHdpdGggdGhlIHBpcGVsaW5lLlxuICAgKlxuICAgKiBGdW5jdGlvbnMgdGhhdCBhcmUgdXNlZCBpbiB0aGUgcGlwZWxpbmUgc2hvdWxkIGJlIHJlZ2lzdGVyZWQgaWYgdGhlIHBpcGVsaW5lXG4gICAqIG5lZWRzIHRvIGJlIHNlcmlhbGlzZWQsIG9yIGEgc2VyaWFsaXNlZCBwaXBlbGluZSBuZWVkcyB0byBiZSBsb2FkZWQuXG4gICAqXG4gICAqIFJlZ2lzdGVyaW5nIGEgZnVuY3Rpb24gZG9lcyBub3QgYWRkIGl0IHRvIGEgcGlwZWxpbmUsIGZ1bmN0aW9ucyBtdXN0IHN0aWxsIGJlXG4gICAqIGFkZGVkIHRvIGluc3RhbmNlcyBvZiB0aGUgcGlwZWxpbmUgZm9yIHRoZW0gdG8gYmUgdXNlZCB3aGVuIHJ1bm5pbmcgYSBwaXBlbGluZS5cbiAgICpcbiAgICogQHBhcmFtIHtsdW5yLlBpcGVsaW5lRnVuY3Rpb259IGZuIC0gVGhlIGZ1bmN0aW9uIHRvIGNoZWNrIGZvci5cbiAgICogQHBhcmFtIHtTdHJpbmd9IGxhYmVsIC0gVGhlIGxhYmVsIHRvIHJlZ2lzdGVyIHRoaXMgZnVuY3Rpb24gd2l0aFxuICAgKi9cbiAgbHVuci5QaXBlbGluZS5yZWdpc3RlckZ1bmN0aW9uID0gZnVuY3Rpb24gKGZuLCBsYWJlbCkge1xuICAgIGlmIChsYWJlbCBpbiB0aGlzLnJlZ2lzdGVyZWRGdW5jdGlvbnMpIHtcbiAgICAgIGx1bnIudXRpbHMud2FybihcIk92ZXJ3cml0aW5nIGV4aXN0aW5nIHJlZ2lzdGVyZWQgZnVuY3Rpb246IFwiICsgbGFiZWwpO1xuICAgIH1cblxuICAgIGZuLmxhYmVsID0gbGFiZWw7XG4gICAgbHVuci5QaXBlbGluZS5yZWdpc3RlcmVkRnVuY3Rpb25zW2ZuLmxhYmVsXSA9IGZuO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXYXJucyBpZiB0aGUgZnVuY3Rpb24gaXMgbm90IHJlZ2lzdGVyZWQgYXMgYSBQaXBlbGluZSBmdW5jdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtsdW5yLlBpcGVsaW5lRnVuY3Rpb259IGZuIC0gVGhlIGZ1bmN0aW9uIHRvIGNoZWNrIGZvci5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGx1bnIuUGlwZWxpbmUud2FybklmRnVuY3Rpb25Ob3RSZWdpc3RlcmVkID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgdmFyIGlzUmVnaXN0ZXJlZCA9IGZuLmxhYmVsICYmIGZuLmxhYmVsIGluIHRoaXMucmVnaXN0ZXJlZEZ1bmN0aW9ucztcblxuICAgIGlmICghaXNSZWdpc3RlcmVkKSB7XG4gICAgICBsdW5yLnV0aWxzLndhcm4oXG4gICAgICAgIFwiRnVuY3Rpb24gaXMgbm90IHJlZ2lzdGVyZWQgd2l0aCBwaXBlbGluZS4gVGhpcyBtYXkgY2F1c2UgcHJvYmxlbXMgd2hlbiBzZXJpYWxpc2luZyB0aGUgaW5kZXguXFxuXCIsXG4gICAgICAgIGZuXG4gICAgICApO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogTG9hZHMgYSBwcmV2aW91c2x5IHNlcmlhbGlzZWQgcGlwZWxpbmUuXG4gICAqXG4gICAqIEFsbCBmdW5jdGlvbnMgdG8gYmUgbG9hZGVkIG11c3QgYWxyZWFkeSBiZSByZWdpc3RlcmVkIHdpdGggbHVuci5QaXBlbGluZS5cbiAgICogSWYgYW55IGZ1bmN0aW9uIGZyb20gdGhlIHNlcmlhbGlzZWQgZGF0YSBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZCB0aGVuIGFuXG4gICAqIGVycm9yIHdpbGwgYmUgdGhyb3duLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gc2VyaWFsaXNlZCAtIFRoZSBzZXJpYWxpc2VkIHBpcGVsaW5lIHRvIGxvYWQuXG4gICAqIEByZXR1cm5zIHtsdW5yLlBpcGVsaW5lfVxuICAgKi9cbiAgbHVuci5QaXBlbGluZS5sb2FkID0gZnVuY3Rpb24gKHNlcmlhbGlzZWQpIHtcbiAgICB2YXIgcGlwZWxpbmUgPSBuZXcgbHVuci5QaXBlbGluZSgpO1xuXG4gICAgc2VyaWFsaXNlZC5mb3JFYWNoKGZ1bmN0aW9uIChmbk5hbWUpIHtcbiAgICAgIHZhciBmbiA9IGx1bnIuUGlwZWxpbmUucmVnaXN0ZXJlZEZ1bmN0aW9uc1tmbk5hbWVdO1xuXG4gICAgICBpZiAoZm4pIHtcbiAgICAgICAgcGlwZWxpbmUuYWRkKGZuKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBsb2FkIHVucmVnaXN0ZXJlZCBmdW5jdGlvbjogXCIgKyBmbk5hbWUpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHBpcGVsaW5lO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBZGRzIG5ldyBmdW5jdGlvbnMgdG8gdGhlIGVuZCBvZiB0aGUgcGlwZWxpbmUuXG4gICAqXG4gICAqIExvZ3MgYSB3YXJuaW5nIGlmIHRoZSBmdW5jdGlvbiBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZC5cbiAgICpcbiAgICogQHBhcmFtIHtsdW5yLlBpcGVsaW5lRnVuY3Rpb25bXX0gZnVuY3Rpb25zIC0gQW55IG51bWJlciBvZiBmdW5jdGlvbnMgdG8gYWRkIHRvIHRoZSBwaXBlbGluZS5cbiAgICovXG4gIGx1bnIuUGlwZWxpbmUucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZm5zID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcblxuICAgIGZucy5mb3JFYWNoKGZ1bmN0aW9uIChmbikge1xuICAgICAgbHVuci5QaXBlbGluZS53YXJuSWZGdW5jdGlvbk5vdFJlZ2lzdGVyZWQoZm4pO1xuICAgICAgdGhpcy5fc3RhY2sucHVzaChmbik7XG4gICAgfSwgdGhpcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBzaW5nbGUgZnVuY3Rpb24gYWZ0ZXIgYSBmdW5jdGlvbiB0aGF0IGFscmVhZHkgZXhpc3RzIGluIHRoZVxuICAgKiBwaXBlbGluZS5cbiAgICpcbiAgICogTG9ncyBhIHdhcm5pbmcgaWYgdGhlIGZ1bmN0aW9uIGhhcyBub3QgYmVlbiByZWdpc3RlcmVkLlxuICAgKlxuICAgKiBAcGFyYW0ge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn0gZXhpc3RpbmdGbiAtIEEgZnVuY3Rpb24gdGhhdCBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgcGlwZWxpbmUuXG4gICAqIEBwYXJhbSB7bHVuci5QaXBlbGluZUZ1bmN0aW9ufSBuZXdGbiAtIFRoZSBuZXcgZnVuY3Rpb24gdG8gYWRkIHRvIHRoZSBwaXBlbGluZS5cbiAgICovXG4gIGx1bnIuUGlwZWxpbmUucHJvdG90eXBlLmFmdGVyID0gZnVuY3Rpb24gKGV4aXN0aW5nRm4sIG5ld0ZuKSB7XG4gICAgbHVuci5QaXBlbGluZS53YXJuSWZGdW5jdGlvbk5vdFJlZ2lzdGVyZWQobmV3Rm4pO1xuXG4gICAgdmFyIHBvcyA9IHRoaXMuX3N0YWNrLmluZGV4T2YoZXhpc3RpbmdGbik7XG4gICAgaWYgKHBvcyA9PSAtMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgZXhpc3RpbmdGblwiKTtcbiAgICB9XG5cbiAgICBwb3MgPSBwb3MgKyAxO1xuICAgIHRoaXMuX3N0YWNrLnNwbGljZShwb3MsIDAsIG5ld0ZuKTtcbiAgfTtcblxuICAvKipcbiAgICogQWRkcyBhIHNpbmdsZSBmdW5jdGlvbiBiZWZvcmUgYSBmdW5jdGlvbiB0aGF0IGFscmVhZHkgZXhpc3RzIGluIHRoZVxuICAgKiBwaXBlbGluZS5cbiAgICpcbiAgICogTG9ncyBhIHdhcm5pbmcgaWYgdGhlIGZ1bmN0aW9uIGhhcyBub3QgYmVlbiByZWdpc3RlcmVkLlxuICAgKlxuICAgKiBAcGFyYW0ge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn0gZXhpc3RpbmdGbiAtIEEgZnVuY3Rpb24gdGhhdCBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgcGlwZWxpbmUuXG4gICAqIEBwYXJhbSB7bHVuci5QaXBlbGluZUZ1bmN0aW9ufSBuZXdGbiAtIFRoZSBuZXcgZnVuY3Rpb24gdG8gYWRkIHRvIHRoZSBwaXBlbGluZS5cbiAgICovXG4gIGx1bnIuUGlwZWxpbmUucHJvdG90eXBlLmJlZm9yZSA9IGZ1bmN0aW9uIChleGlzdGluZ0ZuLCBuZXdGbikge1xuICAgIGx1bnIuUGlwZWxpbmUud2FybklmRnVuY3Rpb25Ob3RSZWdpc3RlcmVkKG5ld0ZuKTtcblxuICAgIHZhciBwb3MgPSB0aGlzLl9zdGFjay5pbmRleE9mKGV4aXN0aW5nRm4pO1xuICAgIGlmIChwb3MgPT0gLTEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIGV4aXN0aW5nRm5cIik7XG4gICAgfVxuXG4gICAgdGhpcy5fc3RhY2suc3BsaWNlKHBvcywgMCwgbmV3Rm4pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgZnVuY3Rpb24gZnJvbSB0aGUgcGlwZWxpbmUuXG4gICAqXG4gICAqIEBwYXJhbSB7bHVuci5QaXBlbGluZUZ1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gcmVtb3ZlIGZyb20gdGhlIHBpcGVsaW5lLlxuICAgKi9cbiAgbHVuci5QaXBlbGluZS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgdmFyIHBvcyA9IHRoaXMuX3N0YWNrLmluZGV4T2YoZm4pO1xuICAgIGlmIChwb3MgPT0gLTEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9zdGFjay5zcGxpY2UocG9zLCAxKTtcbiAgfTtcblxuICAvKipcbiAgICogUnVucyB0aGUgY3VycmVudCBsaXN0IG9mIGZ1bmN0aW9ucyB0aGF0IG1ha2UgdXAgdGhlIHBpcGVsaW5lIGFnYWluc3QgdGhlXG4gICAqIHBhc3NlZCB0b2tlbnMuXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl9IHRva2VucyBUaGUgdG9rZW5zIHRvIHJ1biB0aHJvdWdoIHRoZSBwaXBlbGluZS5cbiAgICogQHJldHVybnMge0FycmF5fVxuICAgKi9cbiAgbHVuci5QaXBlbGluZS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKHRva2Vucykge1xuICAgIHZhciBzdGFja0xlbmd0aCA9IHRoaXMuX3N0YWNrLmxlbmd0aDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhY2tMZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGZuID0gdGhpcy5fc3RhY2tbaV07XG4gICAgICB2YXIgbWVtbyA9IFtdO1xuXG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRva2Vucy5sZW5ndGg7IGorKykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gZm4odG9rZW5zW2pdLCBqLCB0b2tlbnMpO1xuXG4gICAgICAgIGlmIChyZXN1bHQgPT09IG51bGwgfHwgcmVzdWx0ID09PSB2b2lkIDAgfHwgcmVzdWx0ID09PSBcIlwiKSBjb250aW51ZTtcblxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXN1bHQpKSB7XG4gICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCByZXN1bHQubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgIG1lbW8ucHVzaChyZXN1bHRba10pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtZW1vLnB1c2gocmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0b2tlbnMgPSBtZW1vO1xuICAgIH1cblxuICAgIHJldHVybiB0b2tlbnM7XG4gIH07XG5cbiAgLyoqXG4gICAqIENvbnZlbmllbmNlIG1ldGhvZCBmb3IgcGFzc2luZyBhIHN0cmluZyB0aHJvdWdoIGEgcGlwZWxpbmUgYW5kIGdldHRpbmdcbiAgICogc3RyaW5ncyBvdXQuIFRoaXMgbWV0aG9kIHRha2VzIGNhcmUgb2Ygd3JhcHBpbmcgdGhlIHBhc3NlZCBzdHJpbmcgaW4gYVxuICAgKiB0b2tlbiBhbmQgbWFwcGluZyB0aGUgcmVzdWx0aW5nIHRva2VucyBiYWNrIHRvIHN0cmluZ3MuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgLSBUaGUgc3RyaW5nIHRvIHBhc3MgdGhyb3VnaCB0aGUgcGlwZWxpbmUuXG4gICAqIEBwYXJhbSB7P29iamVjdH0gbWV0YWRhdGEgLSBPcHRpb25hbCBtZXRhZGF0YSB0byBhc3NvY2lhdGUgd2l0aCB0aGUgdG9rZW5cbiAgICogcGFzc2VkIHRvIHRoZSBwaXBlbGluZS5cbiAgICogQHJldHVybnMge3N0cmluZ1tdfVxuICAgKi9cbiAgbHVuci5QaXBlbGluZS5wcm90b3R5cGUucnVuU3RyaW5nID0gZnVuY3Rpb24gKHN0ciwgbWV0YWRhdGEpIHtcbiAgICB2YXIgdG9rZW4gPSBuZXcgbHVuci5Ub2tlbihzdHIsIG1ldGFkYXRhKTtcblxuICAgIHJldHVybiB0aGlzLnJ1bihbdG9rZW5dKS5tYXAoZnVuY3Rpb24gKHQpIHtcbiAgICAgIHJldHVybiB0LnRvU3RyaW5nKCk7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlc2V0cyB0aGUgcGlwZWxpbmUgYnkgcmVtb3ZpbmcgYW55IGV4aXN0aW5nIHByb2Nlc3NvcnMuXG4gICAqXG4gICAqL1xuICBsdW5yLlBpcGVsaW5lLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9zdGFjayA9IFtdO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgcmVwcmVzZW50YXRpb24gb2YgdGhlIHBpcGVsaW5lIHJlYWR5IGZvciBzZXJpYWxpc2F0aW9uLlxuICAgKlxuICAgKiBMb2dzIGEgd2FybmluZyBpZiB0aGUgZnVuY3Rpb24gaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQuXG4gICAqXG4gICAqIEByZXR1cm5zIHtBcnJheX1cbiAgICovXG4gIGx1bnIuUGlwZWxpbmUucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fc3RhY2subWFwKGZ1bmN0aW9uIChmbikge1xuICAgICAgbHVuci5QaXBlbGluZS53YXJuSWZGdW5jdGlvbk5vdFJlZ2lzdGVyZWQoZm4pO1xuXG4gICAgICByZXR1cm4gZm4ubGFiZWw7XG4gICAgfSk7XG4gIH07XG4gIC8qIVxuICAgKiBsdW5yLlZlY3RvclxuICAgKiBDb3B5cmlnaHQgKEMpIDIwMjAgT2xpdmVyIE5pZ2h0aW5nYWxlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBIHZlY3RvciBpcyB1c2VkIHRvIGNvbnN0cnVjdCB0aGUgdmVjdG9yIHNwYWNlIG9mIGRvY3VtZW50cyBhbmQgcXVlcmllcy4gVGhlc2VcbiAgICogdmVjdG9ycyBzdXBwb3J0IG9wZXJhdGlvbnMgdG8gZGV0ZXJtaW5lIHRoZSBzaW1pbGFyaXR5IGJldHdlZW4gdHdvIGRvY3VtZW50cyBvclxuICAgKiBhIGRvY3VtZW50IGFuZCBhIHF1ZXJ5LlxuICAgKlxuICAgKiBOb3JtYWxseSBubyBwYXJhbWV0ZXJzIGFyZSByZXF1aXJlZCBmb3IgaW5pdGlhbGl6aW5nIGEgdmVjdG9yLCBidXQgaW4gdGhlIGNhc2Ugb2ZcbiAgICogbG9hZGluZyBhIHByZXZpb3VzbHkgZHVtcGVkIHZlY3RvciB0aGUgcmF3IGVsZW1lbnRzIGNhbiBiZSBwcm92aWRlZCB0byB0aGUgY29uc3RydWN0b3IuXG4gICAqXG4gICAqIEZvciBwZXJmb3JtYW5jZSByZWFzb25zIHZlY3RvcnMgYXJlIGltcGxlbWVudGVkIHdpdGggYSBmbGF0IGFycmF5LCB3aGVyZSBhbiBlbGVtZW50c1xuICAgKiBpbmRleCBpcyBpbW1lZGlhdGVseSBmb2xsb3dlZCBieSBpdHMgdmFsdWUuIEUuZy4gW2luZGV4LCB2YWx1ZSwgaW5kZXgsIHZhbHVlXS4gVGhpc1xuICAgKiBhbGxvd3MgdGhlIHVuZGVybHlpbmcgYXJyYXkgdG8gYmUgYXMgc3BhcnNlIGFzIHBvc3NpYmxlIGFuZCBzdGlsbCBvZmZlciBkZWNlbnRcbiAgICogcGVyZm9ybWFuY2Ugd2hlbiBiZWluZyB1c2VkIGZvciB2ZWN0b3IgY2FsY3VsYXRpb25zLlxuICAgKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHtOdW1iZXJbXX0gW2VsZW1lbnRzXSAtIFRoZSBmbGF0IGxpc3Qgb2YgZWxlbWVudCBpbmRleCBhbmQgZWxlbWVudCB2YWx1ZSBwYWlycy5cbiAgICovXG4gIGx1bnIuVmVjdG9yID0gZnVuY3Rpb24gKGVsZW1lbnRzKSB7XG4gICAgdGhpcy5fbWFnbml0dWRlID0gMDtcbiAgICB0aGlzLmVsZW1lbnRzID0gZWxlbWVudHMgfHwgW107XG4gIH07XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZXMgdGhlIHBvc2l0aW9uIHdpdGhpbiB0aGUgdmVjdG9yIHRvIGluc2VydCBhIGdpdmVuIGluZGV4LlxuICAgKlxuICAgKiBUaGlzIGlzIHVzZWQgaW50ZXJuYWxseSBieSBpbnNlcnQgYW5kIHVwc2VydC4gSWYgdGhlcmUgYXJlIGR1cGxpY2F0ZSBpbmRleGVzIHRoZW5cbiAgICogdGhlIHBvc2l0aW9uIGlzIHJldHVybmVkIGFzIGlmIHRoZSB2YWx1ZSBmb3IgdGhhdCBpbmRleCB3ZXJlIHRvIGJlIHVwZGF0ZWQsIGJ1dCBpdFxuICAgKiBpcyB0aGUgY2FsbGVycyByZXNwb25zaWJpbGl0eSB0byBjaGVjayB3aGV0aGVyIHRoZXJlIGlzIGEgZHVwbGljYXRlIGF0IHRoYXQgaW5kZXhcbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluc2VydElkeCAtIFRoZSBpbmRleCBhdCB3aGljaCB0aGUgZWxlbWVudCBzaG91bGQgYmUgaW5zZXJ0ZWQuXG4gICAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gICAqL1xuICBsdW5yLlZlY3Rvci5wcm90b3R5cGUucG9zaXRpb25Gb3JJbmRleCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgIC8vIEZvciBhbiBlbXB0eSB2ZWN0b3IgdGhlIHR1cGxlIGNhbiBiZSBpbnNlcnRlZCBhdCB0aGUgYmVnaW5uaW5nXG4gICAgaWYgKHRoaXMuZWxlbWVudHMubGVuZ3RoID09IDApIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHZhciBzdGFydCA9IDAsXG4gICAgICBlbmQgPSB0aGlzLmVsZW1lbnRzLmxlbmd0aCAvIDIsXG4gICAgICBzbGljZUxlbmd0aCA9IGVuZCAtIHN0YXJ0LFxuICAgICAgcGl2b3RQb2ludCA9IE1hdGguZmxvb3Ioc2xpY2VMZW5ndGggLyAyKSxcbiAgICAgIHBpdm90SW5kZXggPSB0aGlzLmVsZW1lbnRzW3Bpdm90UG9pbnQgKiAyXTtcblxuICAgIHdoaWxlIChzbGljZUxlbmd0aCA+IDEpIHtcbiAgICAgIGlmIChwaXZvdEluZGV4IDwgaW5kZXgpIHtcbiAgICAgICAgc3RhcnQgPSBwaXZvdFBvaW50O1xuICAgICAgfVxuXG4gICAgICBpZiAocGl2b3RJbmRleCA+IGluZGV4KSB7XG4gICAgICAgIGVuZCA9IHBpdm90UG9pbnQ7XG4gICAgICB9XG5cbiAgICAgIGlmIChwaXZvdEluZGV4ID09IGluZGV4KSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBzbGljZUxlbmd0aCA9IGVuZCAtIHN0YXJ0O1xuICAgICAgcGl2b3RQb2ludCA9IHN0YXJ0ICsgTWF0aC5mbG9vcihzbGljZUxlbmd0aCAvIDIpO1xuICAgICAgcGl2b3RJbmRleCA9IHRoaXMuZWxlbWVudHNbcGl2b3RQb2ludCAqIDJdO1xuICAgIH1cblxuICAgIGlmIChwaXZvdEluZGV4ID09IGluZGV4KSB7XG4gICAgICByZXR1cm4gcGl2b3RQb2ludCAqIDI7XG4gICAgfVxuXG4gICAgaWYgKHBpdm90SW5kZXggPiBpbmRleCkge1xuICAgICAgcmV0dXJuIHBpdm90UG9pbnQgKiAyO1xuICAgIH1cblxuICAgIGlmIChwaXZvdEluZGV4IDwgaW5kZXgpIHtcbiAgICAgIHJldHVybiAocGl2b3RQb2ludCArIDEpICogMjtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEluc2VydHMgYW4gZWxlbWVudCBhdCBhbiBpbmRleCB3aXRoaW4gdGhlIHZlY3Rvci5cbiAgICpcbiAgICogRG9lcyBub3QgYWxsb3cgZHVwbGljYXRlcywgd2lsbCB0aHJvdyBhbiBlcnJvciBpZiB0aGVyZSBpcyBhbHJlYWR5IGFuIGVudHJ5XG4gICAqIGZvciB0aGlzIGluZGV4LlxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gaW5zZXJ0SWR4IC0gVGhlIGluZGV4IGF0IHdoaWNoIHRoZSBlbGVtZW50IHNob3VsZCBiZSBpbnNlcnRlZC5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IHZhbCAtIFRoZSB2YWx1ZSB0byBiZSBpbnNlcnRlZCBpbnRvIHRoZSB2ZWN0b3IuXG4gICAqL1xuICBsdW5yLlZlY3Rvci5wcm90b3R5cGUuaW5zZXJ0ID0gZnVuY3Rpb24gKGluc2VydElkeCwgdmFsKSB7XG4gICAgdGhpcy51cHNlcnQoaW5zZXJ0SWR4LCB2YWwsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHRocm93IFwiZHVwbGljYXRlIGluZGV4XCI7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluc2VydHMgb3IgdXBkYXRlcyBhbiBleGlzdGluZyBpbmRleCB3aXRoaW4gdGhlIHZlY3Rvci5cbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluc2VydElkeCAtIFRoZSBpbmRleCBhdCB3aGljaCB0aGUgZWxlbWVudCBzaG91bGQgYmUgaW5zZXJ0ZWQuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB2YWwgLSBUaGUgdmFsdWUgdG8gYmUgaW5zZXJ0ZWQgaW50byB0aGUgdmVjdG9yLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmbiAtIEEgZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgZm9yIHVwZGF0ZXMsIHRoZSBleGlzdGluZyB2YWx1ZSBhbmQgdGhlXG4gICAqIHJlcXVlc3RlZCB2YWx1ZSBhcmUgcGFzc2VkIGFzIGFyZ3VtZW50c1xuICAgKi9cbiAgbHVuci5WZWN0b3IucHJvdG90eXBlLnVwc2VydCA9IGZ1bmN0aW9uIChpbnNlcnRJZHgsIHZhbCwgZm4pIHtcbiAgICB0aGlzLl9tYWduaXR1ZGUgPSAwO1xuICAgIHZhciBwb3NpdGlvbiA9IHRoaXMucG9zaXRpb25Gb3JJbmRleChpbnNlcnRJZHgpO1xuXG4gICAgaWYgKHRoaXMuZWxlbWVudHNbcG9zaXRpb25dID09IGluc2VydElkeCkge1xuICAgICAgdGhpcy5lbGVtZW50c1twb3NpdGlvbiArIDFdID0gZm4odGhpcy5lbGVtZW50c1twb3NpdGlvbiArIDFdLCB2YWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsZW1lbnRzLnNwbGljZShwb3NpdGlvbiwgMCwgaW5zZXJ0SWR4LCB2YWwpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQ2FsY3VsYXRlcyB0aGUgbWFnbml0dWRlIG9mIHRoaXMgdmVjdG9yLlxuICAgKlxuICAgKiBAcmV0dXJucyB7TnVtYmVyfVxuICAgKi9cbiAgbHVuci5WZWN0b3IucHJvdG90eXBlLm1hZ25pdHVkZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fbWFnbml0dWRlKSByZXR1cm4gdGhpcy5fbWFnbml0dWRlO1xuXG4gICAgdmFyIHN1bU9mU3F1YXJlcyA9IDAsXG4gICAgICBlbGVtZW50c0xlbmd0aCA9IHRoaXMuZWxlbWVudHMubGVuZ3RoO1xuXG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBlbGVtZW50c0xlbmd0aDsgaSArPSAyKSB7XG4gICAgICB2YXIgdmFsID0gdGhpcy5lbGVtZW50c1tpXTtcbiAgICAgIHN1bU9mU3F1YXJlcyArPSB2YWwgKiB2YWw7XG4gICAgfVxuXG4gICAgcmV0dXJuICh0aGlzLl9tYWduaXR1ZGUgPSBNYXRoLnNxcnQoc3VtT2ZTcXVhcmVzKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZXMgdGhlIGRvdCBwcm9kdWN0IG9mIHRoaXMgdmVjdG9yIGFuZCBhbm90aGVyIHZlY3Rvci5cbiAgICpcbiAgICogQHBhcmFtIHtsdW5yLlZlY3Rvcn0gb3RoZXJWZWN0b3IgLSBUaGUgdmVjdG9yIHRvIGNvbXB1dGUgdGhlIGRvdCBwcm9kdWN0IHdpdGguXG4gICAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gICAqL1xuICBsdW5yLlZlY3Rvci5wcm90b3R5cGUuZG90ID0gZnVuY3Rpb24gKG90aGVyVmVjdG9yKSB7XG4gICAgdmFyIGRvdFByb2R1Y3QgPSAwLFxuICAgICAgYSA9IHRoaXMuZWxlbWVudHMsXG4gICAgICBiID0gb3RoZXJWZWN0b3IuZWxlbWVudHMsXG4gICAgICBhTGVuID0gYS5sZW5ndGgsXG4gICAgICBiTGVuID0gYi5sZW5ndGgsXG4gICAgICBhVmFsID0gMCxcbiAgICAgIGJWYWwgPSAwLFxuICAgICAgaSA9IDAsXG4gICAgICBqID0gMDtcblxuICAgIHdoaWxlIChpIDwgYUxlbiAmJiBqIDwgYkxlbikge1xuICAgICAgKGFWYWwgPSBhW2ldKSwgKGJWYWwgPSBiW2pdKTtcbiAgICAgIGlmIChhVmFsIDwgYlZhbCkge1xuICAgICAgICBpICs9IDI7XG4gICAgICB9IGVsc2UgaWYgKGFWYWwgPiBiVmFsKSB7XG4gICAgICAgIGogKz0gMjtcbiAgICAgIH0gZWxzZSBpZiAoYVZhbCA9PSBiVmFsKSB7XG4gICAgICAgIGRvdFByb2R1Y3QgKz0gYVtpICsgMV0gKiBiW2ogKyAxXTtcbiAgICAgICAgaSArPSAyO1xuICAgICAgICBqICs9IDI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGRvdFByb2R1Y3Q7XG4gIH07XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZXMgdGhlIHNpbWlsYXJpdHkgYmV0d2VlbiB0aGlzIHZlY3RvciBhbmQgYW5vdGhlciB2ZWN0b3IuXG4gICAqXG4gICAqIEBwYXJhbSB7bHVuci5WZWN0b3J9IG90aGVyVmVjdG9yIC0gVGhlIG90aGVyIHZlY3RvciB0byBjYWxjdWxhdGUgdGhlXG4gICAqIHNpbWlsYXJpdHkgd2l0aC5cbiAgICogQHJldHVybnMge051bWJlcn1cbiAgICovXG4gIGx1bnIuVmVjdG9yLnByb3RvdHlwZS5zaW1pbGFyaXR5ID0gZnVuY3Rpb24gKG90aGVyVmVjdG9yKSB7XG4gICAgcmV0dXJuIHRoaXMuZG90KG90aGVyVmVjdG9yKSAvIHRoaXMubWFnbml0dWRlKCkgfHwgMDtcbiAgfTtcblxuICAvKipcbiAgICogQ29udmVydHMgdGhlIHZlY3RvciB0byBhbiBhcnJheSBvZiB0aGUgZWxlbWVudHMgd2l0aGluIHRoZSB2ZWN0b3IuXG4gICAqXG4gICAqIEByZXR1cm5zIHtOdW1iZXJbXX1cbiAgICovXG4gIGx1bnIuVmVjdG9yLnByb3RvdHlwZS50b0FycmF5ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvdXRwdXQgPSBuZXcgQXJyYXkodGhpcy5lbGVtZW50cy5sZW5ndGggLyAyKTtcblxuICAgIGZvciAodmFyIGkgPSAxLCBqID0gMDsgaSA8IHRoaXMuZWxlbWVudHMubGVuZ3RoOyBpICs9IDIsIGorKykge1xuICAgICAgb3V0cHV0W2pdID0gdGhpcy5lbGVtZW50c1tpXTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0cHV0O1xuICB9O1xuXG4gIC8qKlxuICAgKiBBIEpTT04gc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB2ZWN0b3IuXG4gICAqXG4gICAqIEByZXR1cm5zIHtOdW1iZXJbXX1cbiAgICovXG4gIGx1bnIuVmVjdG9yLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudHM7XG4gIH07XG4gIC8qIGVzbGludC1kaXNhYmxlICovXG4gIC8qIVxuICAgKiBsdW5yLnN0ZW1tZXJcbiAgICogQ29weXJpZ2h0IChDKSAyMDIwIE9saXZlciBOaWdodGluZ2FsZVxuICAgKiBJbmNsdWRlcyBjb2RlIGZyb20gLSBodHRwOi8vdGFydGFydXMub3JnL35tYXJ0aW4vUG9ydGVyU3RlbW1lci9qcy50eHRcbiAgICovXG5cbiAgLyoqXG4gICAqIGx1bnIuc3RlbW1lciBpcyBhbiBlbmdsaXNoIGxhbmd1YWdlIHN0ZW1tZXIsIHRoaXMgaXMgYSBKYXZhU2NyaXB0XG4gICAqIGltcGxlbWVudGF0aW9uIG9mIHRoZSBQb3J0ZXJTdGVtbWVyIHRha2VuIGZyb20gaHR0cDovL3RhcnRhcnVzLm9yZy9+bWFydGluXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQGltcGxlbWVudHMge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn1cbiAgICogQHBhcmFtIHtsdW5yLlRva2VufSB0b2tlbiAtIFRoZSBzdHJpbmcgdG8gc3RlbVxuICAgKiBAcmV0dXJucyB7bHVuci5Ub2tlbn1cbiAgICogQHNlZSB7QGxpbmsgbHVuci5QaXBlbGluZX1cbiAgICogQGZ1bmN0aW9uXG4gICAqL1xuICBsdW5yLnN0ZW1tZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBzdGVwMmxpc3QgPSB7XG4gICAgICAgIGF0aW9uYWw6IFwiYXRlXCIsXG4gICAgICAgIHRpb25hbDogXCJ0aW9uXCIsXG4gICAgICAgIGVuY2k6IFwiZW5jZVwiLFxuICAgICAgICBhbmNpOiBcImFuY2VcIixcbiAgICAgICAgaXplcjogXCJpemVcIixcbiAgICAgICAgYmxpOiBcImJsZVwiLFxuICAgICAgICBhbGxpOiBcImFsXCIsXG4gICAgICAgIGVudGxpOiBcImVudFwiLFxuICAgICAgICBlbGk6IFwiZVwiLFxuICAgICAgICBvdXNsaTogXCJvdXNcIixcbiAgICAgICAgaXphdGlvbjogXCJpemVcIixcbiAgICAgICAgYXRpb246IFwiYXRlXCIsXG4gICAgICAgIGF0b3I6IFwiYXRlXCIsXG4gICAgICAgIGFsaXNtOiBcImFsXCIsXG4gICAgICAgIGl2ZW5lc3M6IFwiaXZlXCIsXG4gICAgICAgIGZ1bG5lc3M6IFwiZnVsXCIsXG4gICAgICAgIG91c25lc3M6IFwib3VzXCIsXG4gICAgICAgIGFsaXRpOiBcImFsXCIsXG4gICAgICAgIGl2aXRpOiBcIml2ZVwiLFxuICAgICAgICBiaWxpdGk6IFwiYmxlXCIsXG4gICAgICAgIGxvZ2k6IFwibG9nXCIsXG4gICAgICB9LFxuICAgICAgc3RlcDNsaXN0ID0ge1xuICAgICAgICBpY2F0ZTogXCJpY1wiLFxuICAgICAgICBhdGl2ZTogXCJcIixcbiAgICAgICAgYWxpemU6IFwiYWxcIixcbiAgICAgICAgaWNpdGk6IFwiaWNcIixcbiAgICAgICAgaWNhbDogXCJpY1wiLFxuICAgICAgICBmdWw6IFwiXCIsXG4gICAgICAgIG5lc3M6IFwiXCIsXG4gICAgICB9LFxuICAgICAgYyA9IFwiW15hZWlvdV1cIiwgLy8gY29uc29uYW50XG4gICAgICB2ID0gXCJbYWVpb3V5XVwiLCAvLyB2b3dlbFxuICAgICAgQyA9IGMgKyBcIlteYWVpb3V5XSpcIiwgLy8gY29uc29uYW50IHNlcXVlbmNlXG4gICAgICBWID0gdiArIFwiW2FlaW91XSpcIiwgLy8gdm93ZWwgc2VxdWVuY2VcbiAgICAgIG1ncjAgPSBcIl4oXCIgKyBDICsgXCIpP1wiICsgViArIEMsIC8vIFtDXVZDLi4uIGlzIG0+MFxuICAgICAgbWVxMSA9IFwiXihcIiArIEMgKyBcIik/XCIgKyBWICsgQyArIFwiKFwiICsgViArIFwiKT8kXCIsIC8vIFtDXVZDW1ZdIGlzIG09MVxuICAgICAgbWdyMSA9IFwiXihcIiArIEMgKyBcIik/XCIgKyBWICsgQyArIFYgKyBDLCAvLyBbQ11WQ1ZDLi4uIGlzIG0+MVxuICAgICAgc192ID0gXCJeKFwiICsgQyArIFwiKT9cIiArIHY7IC8vIHZvd2VsIGluIHN0ZW1cblxuICAgIHZhciByZV9tZ3IwID0gbmV3IFJlZ0V4cChtZ3IwKTtcbiAgICB2YXIgcmVfbWdyMSA9IG5ldyBSZWdFeHAobWdyMSk7XG4gICAgdmFyIHJlX21lcTEgPSBuZXcgUmVnRXhwKG1lcTEpO1xuICAgIHZhciByZV9zX3YgPSBuZXcgUmVnRXhwKHNfdik7XG5cbiAgICB2YXIgcmVfMWEgPSAvXiguKz8pKHNzfGkpZXMkLztcbiAgICB2YXIgcmUyXzFhID0gL14oLis/KShbXnNdKXMkLztcbiAgICB2YXIgcmVfMWIgPSAvXiguKz8pZWVkJC87XG4gICAgdmFyIHJlMl8xYiA9IC9eKC4rPykoZWR8aW5nKSQvO1xuICAgIHZhciByZV8xYl8yID0gLy4kLztcbiAgICB2YXIgcmUyXzFiXzIgPSAvKGF0fGJsfGl6KSQvO1xuICAgIHZhciByZTNfMWJfMiA9IG5ldyBSZWdFeHAoXCIoW15hZWlvdXlsc3pdKVxcXFwxJFwiKTtcbiAgICB2YXIgcmU0XzFiXzIgPSBuZXcgUmVnRXhwKFwiXlwiICsgQyArIHYgKyBcIlteYWVpb3V3eHldJFwiKTtcblxuICAgIHZhciByZV8xYyA9IC9eKC4rP1teYWVpb3VdKXkkLztcbiAgICB2YXIgcmVfMiA9XG4gICAgICAvXiguKz8pKGF0aW9uYWx8dGlvbmFsfGVuY2l8YW5jaXxpemVyfGJsaXxhbGxpfGVudGxpfGVsaXxvdXNsaXxpemF0aW9ufGF0aW9ufGF0b3J8YWxpc218aXZlbmVzc3xmdWxuZXNzfG91c25lc3N8YWxpdGl8aXZpdGl8YmlsaXRpfGxvZ2kpJC87XG5cbiAgICB2YXIgcmVfMyA9IC9eKC4rPykoaWNhdGV8YXRpdmV8YWxpemV8aWNpdGl8aWNhbHxmdWx8bmVzcykkLztcblxuICAgIHZhciByZV80ID1cbiAgICAgIC9eKC4rPykoYWx8YW5jZXxlbmNlfGVyfGljfGFibGV8aWJsZXxhbnR8ZW1lbnR8bWVudHxlbnR8b3V8aXNtfGF0ZXxpdGl8b3VzfGl2ZXxpemUpJC87XG4gICAgdmFyIHJlMl80ID0gL14oLis/KShzfHQpKGlvbikkLztcblxuICAgIHZhciByZV81ID0gL14oLis/KWUkLztcbiAgICB2YXIgcmVfNV8xID0gL2xsJC87XG4gICAgdmFyIHJlM181ID0gbmV3IFJlZ0V4cChcIl5cIiArIEMgKyB2ICsgXCJbXmFlaW91d3h5XSRcIik7XG5cbiAgICB2YXIgcG9ydGVyU3RlbW1lciA9IGZ1bmN0aW9uIHBvcnRlclN0ZW1tZXIodykge1xuICAgICAgdmFyIHN0ZW0sIHN1ZmZpeCwgZmlyc3RjaCwgcmUsIHJlMiwgcmUzLCByZTQ7XG5cbiAgICAgIGlmICh3Lmxlbmd0aCA8IDMpIHtcbiAgICAgICAgcmV0dXJuIHc7XG4gICAgICB9XG5cbiAgICAgIGZpcnN0Y2ggPSB3LnN1YnN0cigwLCAxKTtcbiAgICAgIGlmIChmaXJzdGNoID09IFwieVwiKSB7XG4gICAgICAgIHcgPSBmaXJzdGNoLnRvVXBwZXJDYXNlKCkgKyB3LnN1YnN0cigxKTtcbiAgICAgIH1cblxuICAgICAgLy8gU3RlcCAxYVxuICAgICAgcmUgPSByZV8xYTtcbiAgICAgIHJlMiA9IHJlMl8xYTtcblxuICAgICAgaWYgKHJlLnRlc3QodykpIHtcbiAgICAgICAgdyA9IHcucmVwbGFjZShyZSwgXCIkMSQyXCIpO1xuICAgICAgfSBlbHNlIGlmIChyZTIudGVzdCh3KSkge1xuICAgICAgICB3ID0gdy5yZXBsYWNlKHJlMiwgXCIkMSQyXCIpO1xuICAgICAgfVxuXG4gICAgICAvLyBTdGVwIDFiXG4gICAgICByZSA9IHJlXzFiO1xuICAgICAgcmUyID0gcmUyXzFiO1xuICAgICAgaWYgKHJlLnRlc3QodykpIHtcbiAgICAgICAgdmFyIGZwID0gcmUuZXhlYyh3KTtcbiAgICAgICAgcmUgPSByZV9tZ3IwO1xuICAgICAgICBpZiAocmUudGVzdChmcFsxXSkpIHtcbiAgICAgICAgICByZSA9IHJlXzFiXzI7XG4gICAgICAgICAgdyA9IHcucmVwbGFjZShyZSwgXCJcIik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocmUyLnRlc3QodykpIHtcbiAgICAgICAgdmFyIGZwID0gcmUyLmV4ZWModyk7XG4gICAgICAgIHN0ZW0gPSBmcFsxXTtcbiAgICAgICAgcmUyID0gcmVfc192O1xuICAgICAgICBpZiAocmUyLnRlc3Qoc3RlbSkpIHtcbiAgICAgICAgICB3ID0gc3RlbTtcbiAgICAgICAgICByZTIgPSByZTJfMWJfMjtcbiAgICAgICAgICByZTMgPSByZTNfMWJfMjtcbiAgICAgICAgICByZTQgPSByZTRfMWJfMjtcbiAgICAgICAgICBpZiAocmUyLnRlc3QodykpIHtcbiAgICAgICAgICAgIHcgPSB3ICsgXCJlXCI7XG4gICAgICAgICAgfSBlbHNlIGlmIChyZTMudGVzdCh3KSkge1xuICAgICAgICAgICAgcmUgPSByZV8xYl8yO1xuICAgICAgICAgICAgdyA9IHcucmVwbGFjZShyZSwgXCJcIik7XG4gICAgICAgICAgfSBlbHNlIGlmIChyZTQudGVzdCh3KSkge1xuICAgICAgICAgICAgdyA9IHcgKyBcImVcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gU3RlcCAxYyAtIHJlcGxhY2Ugc3VmZml4IHkgb3IgWSBieSBpIGlmIHByZWNlZGVkIGJ5IGEgbm9uLXZvd2VsIHdoaWNoIGlzIG5vdCB0aGUgZmlyc3QgbGV0dGVyIG9mIHRoZSB3b3JkIChzbyBjcnkgLT4gY3JpLCBieSAtPiBieSwgc2F5IC0+IHNheSlcbiAgICAgIHJlID0gcmVfMWM7XG4gICAgICBpZiAocmUudGVzdCh3KSkge1xuICAgICAgICB2YXIgZnAgPSByZS5leGVjKHcpO1xuICAgICAgICBzdGVtID0gZnBbMV07XG4gICAgICAgIHcgPSBzdGVtICsgXCJpXCI7XG4gICAgICB9XG5cbiAgICAgIC8vIFN0ZXAgMlxuICAgICAgcmUgPSByZV8yO1xuICAgICAgaWYgKHJlLnRlc3QodykpIHtcbiAgICAgICAgdmFyIGZwID0gcmUuZXhlYyh3KTtcbiAgICAgICAgc3RlbSA9IGZwWzFdO1xuICAgICAgICBzdWZmaXggPSBmcFsyXTtcbiAgICAgICAgcmUgPSByZV9tZ3IwO1xuICAgICAgICBpZiAocmUudGVzdChzdGVtKSkge1xuICAgICAgICAgIHcgPSBzdGVtICsgc3RlcDJsaXN0W3N1ZmZpeF07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gU3RlcCAzXG4gICAgICByZSA9IHJlXzM7XG4gICAgICBpZiAocmUudGVzdCh3KSkge1xuICAgICAgICB2YXIgZnAgPSByZS5leGVjKHcpO1xuICAgICAgICBzdGVtID0gZnBbMV07XG4gICAgICAgIHN1ZmZpeCA9IGZwWzJdO1xuICAgICAgICByZSA9IHJlX21ncjA7XG4gICAgICAgIGlmIChyZS50ZXN0KHN0ZW0pKSB7XG4gICAgICAgICAgdyA9IHN0ZW0gKyBzdGVwM2xpc3Rbc3VmZml4XTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBTdGVwIDRcbiAgICAgIHJlID0gcmVfNDtcbiAgICAgIHJlMiA9IHJlMl80O1xuICAgICAgaWYgKHJlLnRlc3QodykpIHtcbiAgICAgICAgdmFyIGZwID0gcmUuZXhlYyh3KTtcbiAgICAgICAgc3RlbSA9IGZwWzFdO1xuICAgICAgICByZSA9IHJlX21ncjE7XG4gICAgICAgIGlmIChyZS50ZXN0KHN0ZW0pKSB7XG4gICAgICAgICAgdyA9IHN0ZW07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocmUyLnRlc3QodykpIHtcbiAgICAgICAgdmFyIGZwID0gcmUyLmV4ZWModyk7XG4gICAgICAgIHN0ZW0gPSBmcFsxXSArIGZwWzJdO1xuICAgICAgICByZTIgPSByZV9tZ3IxO1xuICAgICAgICBpZiAocmUyLnRlc3Qoc3RlbSkpIHtcbiAgICAgICAgICB3ID0gc3RlbTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBTdGVwIDVcbiAgICAgIHJlID0gcmVfNTtcbiAgICAgIGlmIChyZS50ZXN0KHcpKSB7XG4gICAgICAgIHZhciBmcCA9IHJlLmV4ZWModyk7XG4gICAgICAgIHN0ZW0gPSBmcFsxXTtcbiAgICAgICAgcmUgPSByZV9tZ3IxO1xuICAgICAgICByZTIgPSByZV9tZXExO1xuICAgICAgICByZTMgPSByZTNfNTtcbiAgICAgICAgaWYgKHJlLnRlc3Qoc3RlbSkgfHwgKHJlMi50ZXN0KHN0ZW0pICYmICFyZTMudGVzdChzdGVtKSkpIHtcbiAgICAgICAgICB3ID0gc3RlbTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZSA9IHJlXzVfMTtcbiAgICAgIHJlMiA9IHJlX21ncjE7XG4gICAgICBpZiAocmUudGVzdCh3KSAmJiByZTIudGVzdCh3KSkge1xuICAgICAgICByZSA9IHJlXzFiXzI7XG4gICAgICAgIHcgPSB3LnJlcGxhY2UocmUsIFwiXCIpO1xuICAgICAgfVxuXG4gICAgICAvLyBhbmQgdHVybiBpbml0aWFsIFkgYmFjayB0byB5XG5cbiAgICAgIGlmIChmaXJzdGNoID09IFwieVwiKSB7XG4gICAgICAgIHcgPSBmaXJzdGNoLnRvTG93ZXJDYXNlKCkgKyB3LnN1YnN0cigxKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHc7XG4gICAgfTtcblxuICAgIHJldHVybiBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgIHJldHVybiB0b2tlbi51cGRhdGUocG9ydGVyU3RlbW1lcik7XG4gICAgfTtcbiAgfSkoKTtcblxuICBsdW5yLlBpcGVsaW5lLnJlZ2lzdGVyRnVuY3Rpb24obHVuci5zdGVtbWVyLCBcInN0ZW1tZXJcIik7XG4gIC8qIVxuICAgKiBsdW5yLnN0b3BXb3JkRmlsdGVyXG4gICAqIENvcHlyaWdodCAoQykgMjAyMCBPbGl2ZXIgTmlnaHRpbmdhbGVcbiAgICovXG5cbiAgLyoqXG4gICAqIGx1bnIuZ2VuZXJhdGVTdG9wV29yZEZpbHRlciBidWlsZHMgYSBzdG9wV29yZEZpbHRlciBmdW5jdGlvbiBmcm9tIHRoZSBwcm92aWRlZFxuICAgKiBsaXN0IG9mIHN0b3Agd29yZHMuXG4gICAqXG4gICAqIFRoZSBidWlsdCBpbiBsdW5yLnN0b3BXb3JkRmlsdGVyIGlzIGJ1aWx0IHVzaW5nIHRoaXMgZ2VuZXJhdG9yIGFuZCBjYW4gYmUgdXNlZFxuICAgKiB0byBnZW5lcmF0ZSBjdXN0b20gc3RvcFdvcmRGaWx0ZXJzIGZvciBhcHBsaWNhdGlvbnMgb3Igbm9uIEVuZ2xpc2ggbGFuZ3VhZ2VzLlxuICAgKlxuICAgKiBAZnVuY3Rpb25cbiAgICogQHBhcmFtIHtBcnJheX0gdG9rZW4gVGhlIHRva2VuIHRvIHBhc3MgdGhyb3VnaCB0aGUgZmlsdGVyXG4gICAqIEByZXR1cm5zIHtsdW5yLlBpcGVsaW5lRnVuY3Rpb259XG4gICAqIEBzZWUgbHVuci5QaXBlbGluZVxuICAgKiBAc2VlIGx1bnIuc3RvcFdvcmRGaWx0ZXJcbiAgICovXG4gIGx1bnIuZ2VuZXJhdGVTdG9wV29yZEZpbHRlciA9IGZ1bmN0aW9uIChzdG9wV29yZHMpIHtcbiAgICB2YXIgd29yZHMgPSBzdG9wV29yZHMucmVkdWNlKGZ1bmN0aW9uIChtZW1vLCBzdG9wV29yZCkge1xuICAgICAgbWVtb1tzdG9wV29yZF0gPSBzdG9wV29yZDtcbiAgICAgIHJldHVybiBtZW1vO1xuICAgIH0sIHt9KTtcblxuICAgIHJldHVybiBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgIGlmICh0b2tlbiAmJiB3b3Jkc1t0b2tlbi50b1N0cmluZygpXSAhPT0gdG9rZW4udG9TdHJpbmcoKSkgcmV0dXJuIHRva2VuO1xuICAgIH07XG4gIH07XG5cbiAgLyoqXG4gICAqIGx1bnIuc3RvcFdvcmRGaWx0ZXIgaXMgYW4gRW5nbGlzaCBsYW5ndWFnZSBzdG9wIHdvcmQgbGlzdCBmaWx0ZXIsIGFueSB3b3Jkc1xuICAgKiBjb250YWluZWQgaW4gdGhlIGxpc3Qgd2lsbCBub3QgYmUgcGFzc2VkIHRocm91Z2ggdGhlIGZpbHRlci5cbiAgICpcbiAgICogVGhpcyBpcyBpbnRlbmRlZCB0byBiZSB1c2VkIGluIHRoZSBQaXBlbGluZS4gSWYgdGhlIHRva2VuIGRvZXMgbm90IHBhc3MgdGhlXG4gICAqIGZpbHRlciB0aGVuIHVuZGVmaW5lZCB3aWxsIGJlIHJldHVybmVkLlxuICAgKlxuICAgKiBAZnVuY3Rpb25cbiAgICogQGltcGxlbWVudHMge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn1cbiAgICogQHBhcmFtcyB7bHVuci5Ub2tlbn0gdG9rZW4gLSBBIHRva2VuIHRvIGNoZWNrIGZvciBiZWluZyBhIHN0b3Agd29yZC5cbiAgICogQHJldHVybnMge2x1bnIuVG9rZW59XG4gICAqIEBzZWUge0BsaW5rIGx1bnIuUGlwZWxpbmV9XG4gICAqL1xuICBsdW5yLnN0b3BXb3JkRmlsdGVyID0gbHVuci5nZW5lcmF0ZVN0b3BXb3JkRmlsdGVyKFtcbiAgICBcImFcIixcbiAgICBcImFibGVcIixcbiAgICBcImFib3V0XCIsXG4gICAgXCJhY3Jvc3NcIixcbiAgICBcImFmdGVyXCIsXG4gICAgXCJhbGxcIixcbiAgICBcImFsbW9zdFwiLFxuICAgIFwiYWxzb1wiLFxuICAgIFwiYW1cIixcbiAgICBcImFtb25nXCIsXG4gICAgXCJhblwiLFxuICAgIFwiYW5kXCIsXG4gICAgXCJhbnlcIixcbiAgICBcImFyZVwiLFxuICAgIFwiYXNcIixcbiAgICBcImF0XCIsXG4gICAgXCJiZVwiLFxuICAgIFwiYmVjYXVzZVwiLFxuICAgIFwiYmVlblwiLFxuICAgIFwiYnV0XCIsXG4gICAgXCJieVwiLFxuICAgIFwiY2FuXCIsXG4gICAgXCJjYW5ub3RcIixcbiAgICBcImNvdWxkXCIsXG4gICAgXCJkZWFyXCIsXG4gICAgXCJkaWRcIixcbiAgICBcImRvXCIsXG4gICAgXCJkb2VzXCIsXG4gICAgXCJlaXRoZXJcIixcbiAgICBcImVsc2VcIixcbiAgICBcImV2ZXJcIixcbiAgICBcImV2ZXJ5XCIsXG4gICAgXCJmb3JcIixcbiAgICBcImZyb21cIixcbiAgICBcImdldFwiLFxuICAgIFwiZ290XCIsXG4gICAgXCJoYWRcIixcbiAgICBcImhhc1wiLFxuICAgIFwiaGF2ZVwiLFxuICAgIFwiaGVcIixcbiAgICBcImhlclwiLFxuICAgIFwiaGVyc1wiLFxuICAgIFwiaGltXCIsXG4gICAgXCJoaXNcIixcbiAgICBcImhvd1wiLFxuICAgIFwiaG93ZXZlclwiLFxuICAgIFwiaVwiLFxuICAgIFwiaWZcIixcbiAgICBcImluXCIsXG4gICAgXCJpbnRvXCIsXG4gICAgXCJpc1wiLFxuICAgIFwiaXRcIixcbiAgICBcIml0c1wiLFxuICAgIFwianVzdFwiLFxuICAgIFwibGVhc3RcIixcbiAgICBcImxldFwiLFxuICAgIFwibGlrZVwiLFxuICAgIFwibGlrZWx5XCIsXG4gICAgXCJtYXlcIixcbiAgICBcIm1lXCIsXG4gICAgXCJtaWdodFwiLFxuICAgIFwibW9zdFwiLFxuICAgIFwibXVzdFwiLFxuICAgIFwibXlcIixcbiAgICBcIm5laXRoZXJcIixcbiAgICBcIm5vXCIsXG4gICAgXCJub3JcIixcbiAgICBcIm5vdFwiLFxuICAgIFwib2ZcIixcbiAgICBcIm9mZlwiLFxuICAgIFwib2Z0ZW5cIixcbiAgICBcIm9uXCIsXG4gICAgXCJvbmx5XCIsXG4gICAgXCJvclwiLFxuICAgIFwib3RoZXJcIixcbiAgICBcIm91clwiLFxuICAgIFwib3duXCIsXG4gICAgXCJyYXRoZXJcIixcbiAgICBcInNhaWRcIixcbiAgICBcInNheVwiLFxuICAgIFwic2F5c1wiLFxuICAgIFwic2hlXCIsXG4gICAgXCJzaG91bGRcIixcbiAgICBcInNpbmNlXCIsXG4gICAgXCJzb1wiLFxuICAgIFwic29tZVwiLFxuICAgIFwidGhhblwiLFxuICAgIFwidGhhdFwiLFxuICAgIFwidGhlXCIsXG4gICAgXCJ0aGVpclwiLFxuICAgIFwidGhlbVwiLFxuICAgIFwidGhlblwiLFxuICAgIFwidGhlcmVcIixcbiAgICBcInRoZXNlXCIsXG4gICAgXCJ0aGV5XCIsXG4gICAgXCJ0aGlzXCIsXG4gICAgXCJ0aXNcIixcbiAgICBcInRvXCIsXG4gICAgXCJ0b29cIixcbiAgICBcInR3YXNcIixcbiAgICBcInVzXCIsXG4gICAgXCJ3YW50c1wiLFxuICAgIFwid2FzXCIsXG4gICAgXCJ3ZVwiLFxuICAgIFwid2VyZVwiLFxuICAgIFwid2hhdFwiLFxuICAgIFwid2hlblwiLFxuICAgIFwid2hlcmVcIixcbiAgICBcIndoaWNoXCIsXG4gICAgXCJ3aGlsZVwiLFxuICAgIFwid2hvXCIsXG4gICAgXCJ3aG9tXCIsXG4gICAgXCJ3aHlcIixcbiAgICBcIndpbGxcIixcbiAgICBcIndpdGhcIixcbiAgICBcIndvdWxkXCIsXG4gICAgXCJ5ZXRcIixcbiAgICBcInlvdVwiLFxuICAgIFwieW91clwiLFxuICBdKTtcblxuICBsdW5yLlBpcGVsaW5lLnJlZ2lzdGVyRnVuY3Rpb24obHVuci5zdG9wV29yZEZpbHRlciwgXCJzdG9wV29yZEZpbHRlclwiKTtcbiAgLyohXG4gICAqIGx1bnIudHJpbW1lclxuICAgKiBDb3B5cmlnaHQgKEMpIDIwMjAgT2xpdmVyIE5pZ2h0aW5nYWxlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBsdW5yLnRyaW1tZXIgaXMgYSBwaXBlbGluZSBmdW5jdGlvbiBmb3IgdHJpbW1pbmcgbm9uIHdvcmRcbiAgICogY2hhcmFjdGVycyBmcm9tIHRoZSBiZWdpbm5pbmcgYW5kIGVuZCBvZiB0b2tlbnMgYmVmb3JlIHRoZXlcbiAgICogZW50ZXIgdGhlIGluZGV4LlxuICAgKlxuICAgKiBUaGlzIGltcGxlbWVudGF0aW9uIG1heSBub3Qgd29yayBjb3JyZWN0bHkgZm9yIG5vbiBsYXRpblxuICAgKiBjaGFyYWN0ZXJzIGFuZCBzaG91bGQgZWl0aGVyIGJlIHJlbW92ZWQgb3IgYWRhcHRlZCBmb3IgdXNlXG4gICAqIHdpdGggbGFuZ3VhZ2VzIHdpdGggbm9uLWxhdGluIGNoYXJhY3RlcnMuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQGltcGxlbWVudHMge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn1cbiAgICogQHBhcmFtIHtsdW5yLlRva2VufSB0b2tlbiBUaGUgdG9rZW4gdG8gcGFzcyB0aHJvdWdoIHRoZSBmaWx0ZXJcbiAgICogQHJldHVybnMge2x1bnIuVG9rZW59XG4gICAqIEBzZWUgbHVuci5QaXBlbGluZVxuICAgKi9cbiAgbHVuci50cmltbWVyID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgcmV0dXJuIHRva2VuLnVwZGF0ZShmdW5jdGlvbiAocykge1xuICAgICAgcmV0dXJuIHMucmVwbGFjZSgvXlxcVysvLCBcIlwiKS5yZXBsYWNlKC9cXFcrJC8sIFwiXCIpO1xuICAgIH0pO1xuICB9O1xuXG4gIGx1bnIuUGlwZWxpbmUucmVnaXN0ZXJGdW5jdGlvbihsdW5yLnRyaW1tZXIsIFwidHJpbW1lclwiKTtcbiAgLyohXG4gICAqIGx1bnIuVG9rZW5TZXRcbiAgICogQ29weXJpZ2h0IChDKSAyMDIwIE9saXZlciBOaWdodGluZ2FsZVxuICAgKi9cblxuICAvKipcbiAgICogQSB0b2tlbiBzZXQgaXMgdXNlZCB0byBzdG9yZSB0aGUgdW5pcXVlIGxpc3Qgb2YgYWxsIHRva2Vuc1xuICAgKiB3aXRoaW4gYW4gaW5kZXguIFRva2VuIHNldHMgYXJlIGFsc28gdXNlZCB0byByZXByZXNlbnQgYW5cbiAgICogaW5jb21pbmcgcXVlcnkgdG8gdGhlIGluZGV4LCB0aGlzIHF1ZXJ5IHRva2VuIHNldCBhbmQgaW5kZXhcbiAgICogdG9rZW4gc2V0IGFyZSB0aGVuIGludGVyc2VjdGVkIHRvIGZpbmQgd2hpY2ggdG9rZW5zIHRvIGxvb2tcbiAgICogdXAgaW4gdGhlIGludmVydGVkIGluZGV4LlxuICAgKlxuICAgKiBBIHRva2VuIHNldCBjYW4gaG9sZCBtdWx0aXBsZSB0b2tlbnMsIGFzIGluIHRoZSBjYXNlIG9mIHRoZVxuICAgKiBpbmRleCB0b2tlbiBzZXQsIG9yIGl0IGNhbiBob2xkIGEgc2luZ2xlIHRva2VuIGFzIGluIHRoZVxuICAgKiBjYXNlIG9mIGEgc2ltcGxlIHF1ZXJ5IHRva2VuIHNldC5cbiAgICpcbiAgICogQWRkaXRpb25hbGx5IHRva2VuIHNldHMgYXJlIHVzZWQgdG8gcGVyZm9ybSB3aWxkY2FyZCBtYXRjaGluZy5cbiAgICogTGVhZGluZywgY29udGFpbmVkIGFuZCB0cmFpbGluZyB3aWxkY2FyZHMgYXJlIHN1cHBvcnRlZCwgYW5kXG4gICAqIGZyb20gdGhpcyBlZGl0IGRpc3RhbmNlIG1hdGNoaW5nIGNhbiBhbHNvIGJlIHByb3ZpZGVkLlxuICAgKlxuICAgKiBUb2tlbiBzZXRzIGFyZSBpbXBsZW1lbnRlZCBhcyBhIG1pbmltYWwgZmluaXRlIHN0YXRlIGF1dG9tYXRhLFxuICAgKiB3aGVyZSBib3RoIGNvbW1vbiBwcmVmaXhlcyBhbmQgc3VmZml4ZXMgYXJlIHNoYXJlZCBiZXR3ZWVuIHRva2Vucy5cbiAgICogVGhpcyBoZWxwcyB0byByZWR1Y2UgdGhlIHNwYWNlIHVzZWQgZm9yIHN0b3JpbmcgdGhlIHRva2VuIHNldC5cbiAgICpcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqL1xuICBsdW5yLlRva2VuU2V0ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZmluYWwgPSBmYWxzZTtcbiAgICB0aGlzLmVkZ2VzID0ge307XG4gICAgdGhpcy5pZCA9IGx1bnIuVG9rZW5TZXQuX25leHRJZDtcbiAgICBsdW5yLlRva2VuU2V0Ll9uZXh0SWQgKz0gMTtcbiAgfTtcblxuICAvKipcbiAgICogS2VlcHMgdHJhY2sgb2YgdGhlIG5leHQsIGF1dG8gaW5jcmVtZW50LCBpZGVudGlmaWVyIHRvIGFzc2lnblxuICAgKiB0byBhIG5ldyB0b2tlblNldC5cbiAgICpcbiAgICogVG9rZW5TZXRzIHJlcXVpcmUgYSB1bmlxdWUgaWRlbnRpZmllciB0byBiZSBjb3JyZWN0bHkgbWluaW1pc2VkLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgbHVuci5Ub2tlblNldC5fbmV4dElkID0gMTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIFRva2VuU2V0IGluc3RhbmNlIGZyb20gdGhlIGdpdmVuIHNvcnRlZCBhcnJheSBvZiB3b3Jkcy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmdbXX0gYXJyIC0gQSBzb3J0ZWQgYXJyYXkgb2Ygc3RyaW5ncyB0byBjcmVhdGUgdGhlIHNldCBmcm9tLlxuICAgKiBAcmV0dXJucyB7bHVuci5Ub2tlblNldH1cbiAgICogQHRocm93cyBXaWxsIHRocm93IGFuIGVycm9yIGlmIHRoZSBpbnB1dCBhcnJheSBpcyBub3Qgc29ydGVkLlxuICAgKi9cbiAgbHVuci5Ub2tlblNldC5mcm9tQXJyYXkgPSBmdW5jdGlvbiAoYXJyKSB7XG4gICAgdmFyIGJ1aWxkZXIgPSBuZXcgbHVuci5Ub2tlblNldC5CdWlsZGVyKCk7XG5cbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gYXJyLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBidWlsZGVyLmluc2VydChhcnJbaV0pO1xuICAgIH1cblxuICAgIGJ1aWxkZXIuZmluaXNoKCk7XG4gICAgcmV0dXJuIGJ1aWxkZXIucm9vdDtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIHRva2VuIHNldCBmcm9tIGEgcXVlcnkgY2xhdXNlLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gY2xhdXNlIC0gQSBzaW5nbGUgY2xhdXNlIGZyb20gbHVuci5RdWVyeS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXVzZS50ZXJtIC0gVGhlIHF1ZXJ5IGNsYXVzZSB0ZXJtLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW2NsYXVzZS5lZGl0RGlzdGFuY2VdIC0gVGhlIG9wdGlvbmFsIGVkaXQgZGlzdGFuY2UgZm9yIHRoZSB0ZXJtLlxuICAgKiBAcmV0dXJucyB7bHVuci5Ub2tlblNldH1cbiAgICovXG4gIGx1bnIuVG9rZW5TZXQuZnJvbUNsYXVzZSA9IGZ1bmN0aW9uIChjbGF1c2UpIHtcbiAgICBpZiAoXCJlZGl0RGlzdGFuY2VcIiBpbiBjbGF1c2UpIHtcbiAgICAgIHJldHVybiBsdW5yLlRva2VuU2V0LmZyb21GdXp6eVN0cmluZyhjbGF1c2UudGVybSwgY2xhdXNlLmVkaXREaXN0YW5jZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBsdW5yLlRva2VuU2V0LmZyb21TdHJpbmcoY2xhdXNlLnRlcm0pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIHRva2VuIHNldCByZXByZXNlbnRpbmcgYSBzaW5nbGUgc3RyaW5nIHdpdGggYSBzcGVjaWZpZWRcbiAgICogZWRpdCBkaXN0YW5jZS5cbiAgICpcbiAgICogSW5zZXJ0aW9ucywgZGVsZXRpb25zLCBzdWJzdGl0dXRpb25zIGFuZCB0cmFuc3Bvc2l0aW9ucyBhcmUgZWFjaFxuICAgKiB0cmVhdGVkIGFzIGFuIGVkaXQgZGlzdGFuY2Ugb2YgMS5cbiAgICpcbiAgICogSW5jcmVhc2luZyB0aGUgYWxsb3dlZCBlZGl0IGRpc3RhbmNlIHdpbGwgaGF2ZSBhIGRyYW1hdGljIGltcGFjdFxuICAgKiBvbiB0aGUgcGVyZm9ybWFuY2Ugb2YgYm90aCBjcmVhdGluZyBhbmQgaW50ZXJzZWN0aW5nIHRoZXNlIFRva2VuU2V0cy5cbiAgICogSXQgaXMgYWR2aXNlZCB0byBrZWVwIHRoZSBlZGl0IGRpc3RhbmNlIGxlc3MgdGhhbiAzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyIC0gVGhlIHN0cmluZyB0byBjcmVhdGUgdGhlIHRva2VuIHNldCBmcm9tLlxuICAgKiBAcGFyYW0ge251bWJlcn0gZWRpdERpc3RhbmNlIC0gVGhlIGFsbG93ZWQgZWRpdCBkaXN0YW5jZSB0byBtYXRjaC5cbiAgICogQHJldHVybnMge2x1bnIuVmVjdG9yfVxuICAgKi9cbiAgbHVuci5Ub2tlblNldC5mcm9tRnV6enlTdHJpbmcgPSBmdW5jdGlvbiAoc3RyLCBlZGl0RGlzdGFuY2UpIHtcbiAgICB2YXIgcm9vdCA9IG5ldyBsdW5yLlRva2VuU2V0KCk7XG5cbiAgICB2YXIgc3RhY2sgPSBbXG4gICAgICB7XG4gICAgICAgIG5vZGU6IHJvb3QsXG4gICAgICAgIGVkaXRzUmVtYWluaW5nOiBlZGl0RGlzdGFuY2UsXG4gICAgICAgIHN0cjogc3RyLFxuICAgICAgfSxcbiAgICBdO1xuXG4gICAgd2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuICAgICAgdmFyIGZyYW1lID0gc3RhY2sucG9wKCk7XG5cbiAgICAgIC8vIG5vIGVkaXRcbiAgICAgIGlmIChmcmFtZS5zdHIubGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgY2hhciA9IGZyYW1lLnN0ci5jaGFyQXQoMCksXG4gICAgICAgICAgbm9FZGl0Tm9kZTtcblxuICAgICAgICBpZiAoY2hhciBpbiBmcmFtZS5ub2RlLmVkZ2VzKSB7XG4gICAgICAgICAgbm9FZGl0Tm9kZSA9IGZyYW1lLm5vZGUuZWRnZXNbY2hhcl07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbm9FZGl0Tm9kZSA9IG5ldyBsdW5yLlRva2VuU2V0KCk7XG4gICAgICAgICAgZnJhbWUubm9kZS5lZGdlc1tjaGFyXSA9IG5vRWRpdE5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZnJhbWUuc3RyLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgbm9FZGl0Tm9kZS5maW5hbCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBzdGFjay5wdXNoKHtcbiAgICAgICAgICBub2RlOiBub0VkaXROb2RlLFxuICAgICAgICAgIGVkaXRzUmVtYWluaW5nOiBmcmFtZS5lZGl0c1JlbWFpbmluZyxcbiAgICAgICAgICBzdHI6IGZyYW1lLnN0ci5zbGljZSgxKSxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChmcmFtZS5lZGl0c1JlbWFpbmluZyA9PSAwKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBpbnNlcnRpb25cbiAgICAgIGlmIChcIipcIiBpbiBmcmFtZS5ub2RlLmVkZ2VzKSB7XG4gICAgICAgIHZhciBpbnNlcnRpb25Ob2RlID0gZnJhbWUubm9kZS5lZGdlc1tcIipcIl07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgaW5zZXJ0aW9uTm9kZSA9IG5ldyBsdW5yLlRva2VuU2V0KCk7XG4gICAgICAgIGZyYW1lLm5vZGUuZWRnZXNbXCIqXCJdID0gaW5zZXJ0aW9uTm9kZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZyYW1lLnN0ci5sZW5ndGggPT0gMCkge1xuICAgICAgICBpbnNlcnRpb25Ob2RlLmZpbmFsID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgc3RhY2sucHVzaCh7XG4gICAgICAgIG5vZGU6IGluc2VydGlvbk5vZGUsXG4gICAgICAgIGVkaXRzUmVtYWluaW5nOiBmcmFtZS5lZGl0c1JlbWFpbmluZyAtIDEsXG4gICAgICAgIHN0cjogZnJhbWUuc3RyLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIGRlbGV0aW9uXG4gICAgICAvLyBjYW4gb25seSBkbyBhIGRlbGV0aW9uIGlmIHdlIGhhdmUgZW5vdWdoIGVkaXRzIHJlbWFpbmluZ1xuICAgICAgLy8gYW5kIGlmIHRoZXJlIGFyZSBjaGFyYWN0ZXJzIGxlZnQgdG8gZGVsZXRlIGluIHRoZSBzdHJpbmdcbiAgICAgIGlmIChmcmFtZS5zdHIubGVuZ3RoID4gMSkge1xuICAgICAgICBzdGFjay5wdXNoKHtcbiAgICAgICAgICBub2RlOiBmcmFtZS5ub2RlLFxuICAgICAgICAgIGVkaXRzUmVtYWluaW5nOiBmcmFtZS5lZGl0c1JlbWFpbmluZyAtIDEsXG4gICAgICAgICAgc3RyOiBmcmFtZS5zdHIuc2xpY2UoMSksXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBkZWxldGlvblxuICAgICAgLy8ganVzdCByZW1vdmluZyB0aGUgbGFzdCBjaGFyYWN0ZXIgZnJvbSB0aGUgc3RyXG4gICAgICBpZiAoZnJhbWUuc3RyLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgIGZyYW1lLm5vZGUuZmluYWwgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBzdWJzdGl0dXRpb25cbiAgICAgIC8vIGNhbiBvbmx5IGRvIGEgc3Vic3RpdHV0aW9uIGlmIHdlIGhhdmUgZW5vdWdoIGVkaXRzIHJlbWFpbmluZ1xuICAgICAgLy8gYW5kIGlmIHRoZXJlIGFyZSBjaGFyYWN0ZXJzIGxlZnQgdG8gc3Vic3RpdHV0ZVxuICAgICAgaWYgKGZyYW1lLnN0ci5sZW5ndGggPj0gMSkge1xuICAgICAgICBpZiAoXCIqXCIgaW4gZnJhbWUubm9kZS5lZGdlcykge1xuICAgICAgICAgIHZhciBzdWJzdGl0dXRpb25Ob2RlID0gZnJhbWUubm9kZS5lZGdlc1tcIipcIl07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHN1YnN0aXR1dGlvbk5vZGUgPSBuZXcgbHVuci5Ub2tlblNldCgpO1xuICAgICAgICAgIGZyYW1lLm5vZGUuZWRnZXNbXCIqXCJdID0gc3Vic3RpdHV0aW9uTm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmcmFtZS5zdHIubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICBzdWJzdGl0dXRpb25Ob2RlLmZpbmFsID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0YWNrLnB1c2goe1xuICAgICAgICAgIG5vZGU6IHN1YnN0aXR1dGlvbk5vZGUsXG4gICAgICAgICAgZWRpdHNSZW1haW5pbmc6IGZyYW1lLmVkaXRzUmVtYWluaW5nIC0gMSxcbiAgICAgICAgICBzdHI6IGZyYW1lLnN0ci5zbGljZSgxKSxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIHRyYW5zcG9zaXRpb25cbiAgICAgIC8vIGNhbiBvbmx5IGRvIGEgdHJhbnNwb3NpdGlvbiBpZiB0aGVyZSBhcmUgZWRpdHMgcmVtYWluaW5nXG4gICAgICAvLyBhbmQgdGhlcmUgYXJlIGVub3VnaCBjaGFyYWN0ZXJzIHRvIHRyYW5zcG9zZVxuICAgICAgaWYgKGZyYW1lLnN0ci5sZW5ndGggPiAxKSB7XG4gICAgICAgIHZhciBjaGFyQSA9IGZyYW1lLnN0ci5jaGFyQXQoMCksXG4gICAgICAgICAgY2hhckIgPSBmcmFtZS5zdHIuY2hhckF0KDEpLFxuICAgICAgICAgIHRyYW5zcG9zZU5vZGU7XG5cbiAgICAgICAgaWYgKGNoYXJCIGluIGZyYW1lLm5vZGUuZWRnZXMpIHtcbiAgICAgICAgICB0cmFuc3Bvc2VOb2RlID0gZnJhbWUubm9kZS5lZGdlc1tjaGFyQl07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdHJhbnNwb3NlTm9kZSA9IG5ldyBsdW5yLlRva2VuU2V0KCk7XG4gICAgICAgICAgZnJhbWUubm9kZS5lZGdlc1tjaGFyQl0gPSB0cmFuc3Bvc2VOb2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZyYW1lLnN0ci5sZW5ndGggPT0gMSkge1xuICAgICAgICAgIHRyYW5zcG9zZU5vZGUuZmluYWwgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhY2sucHVzaCh7XG4gICAgICAgICAgbm9kZTogdHJhbnNwb3NlTm9kZSxcbiAgICAgICAgICBlZGl0c1JlbWFpbmluZzogZnJhbWUuZWRpdHNSZW1haW5pbmcgLSAxLFxuICAgICAgICAgIHN0cjogY2hhckEgKyBmcmFtZS5zdHIuc2xpY2UoMiksXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByb290O1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgVG9rZW5TZXQgZnJvbSBhIHN0cmluZy5cbiAgICpcbiAgICogVGhlIHN0cmluZyBtYXkgY29udGFpbiBvbmUgb3IgbW9yZSB3aWxkY2FyZCBjaGFyYWN0ZXJzICgqKVxuICAgKiB0aGF0IHdpbGwgYWxsb3cgd2lsZGNhcmQgbWF0Y2hpbmcgd2hlbiBpbnRlcnNlY3Rpbmcgd2l0aFxuICAgKiBhbm90aGVyIFRva2VuU2V0LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyIC0gVGhlIHN0cmluZyB0byBjcmVhdGUgYSBUb2tlblNldCBmcm9tLlxuICAgKiBAcmV0dXJucyB7bHVuci5Ub2tlblNldH1cbiAgICovXG4gIGx1bnIuVG9rZW5TZXQuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICB2YXIgbm9kZSA9IG5ldyBsdW5yLlRva2VuU2V0KCksXG4gICAgICByb290ID0gbm9kZTtcblxuICAgIC8qXG4gICAgICogSXRlcmF0ZXMgdGhyb3VnaCBhbGwgY2hhcmFjdGVycyB3aXRoaW4gdGhlIHBhc3NlZCBzdHJpbmdcbiAgICAgKiBhcHBlbmRpbmcgYSBub2RlIGZvciBlYWNoIGNoYXJhY3Rlci5cbiAgICAgKlxuICAgICAqIFdoZW4gYSB3aWxkY2FyZCBjaGFyYWN0ZXIgaXMgZm91bmQgdGhlbiBhIHNlbGZcbiAgICAgKiByZWZlcmVuY2luZyBlZGdlIGlzIGludHJvZHVjZWQgdG8gY29udGludWFsbHkgbWF0Y2hcbiAgICAgKiBhbnkgbnVtYmVyIG9mIGFueSBjaGFyYWN0ZXJzLlxuICAgICAqL1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBzdHIubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHZhciBjaGFyID0gc3RyW2ldLFxuICAgICAgICBmaW5hbCA9IGkgPT0gbGVuIC0gMTtcblxuICAgICAgaWYgKGNoYXIgPT0gXCIqXCIpIHtcbiAgICAgICAgbm9kZS5lZGdlc1tjaGFyXSA9IG5vZGU7XG4gICAgICAgIG5vZGUuZmluYWwgPSBmaW5hbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBuZXh0ID0gbmV3IGx1bnIuVG9rZW5TZXQoKTtcbiAgICAgICAgbmV4dC5maW5hbCA9IGZpbmFsO1xuXG4gICAgICAgIG5vZGUuZWRnZXNbY2hhcl0gPSBuZXh0O1xuICAgICAgICBub2RlID0gbmV4dDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcm9vdDtcbiAgfTtcblxuICAvKipcbiAgICogQ29udmVydHMgdGhpcyBUb2tlblNldCBpbnRvIGFuIGFycmF5IG9mIHN0cmluZ3NcbiAgICogY29udGFpbmVkIHdpdGhpbiB0aGUgVG9rZW5TZXQuXG4gICAqXG4gICAqIFRoaXMgaXMgbm90IGludGVuZGVkIHRvIGJlIHVzZWQgb24gYSBUb2tlblNldCB0aGF0XG4gICAqIGNvbnRhaW5zIHdpbGRjYXJkcywgaW4gdGhlc2UgY2FzZXMgdGhlIHJlc3VsdHMgYXJlXG4gICAqIHVuZGVmaW5lZCBhbmQgYXJlIGxpa2VseSB0byBjYXVzZSBhbiBpbmZpbml0ZSBsb29wLlxuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nW119XG4gICAqL1xuICBsdW5yLlRva2VuU2V0LnByb3RvdHlwZS50b0FycmF5ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciB3b3JkcyA9IFtdO1xuXG4gICAgdmFyIHN0YWNrID0gW1xuICAgICAge1xuICAgICAgICBwcmVmaXg6IFwiXCIsXG4gICAgICAgIG5vZGU6IHRoaXMsXG4gICAgICB9LFxuICAgIF07XG5cbiAgICB3aGlsZSAoc3RhY2subGVuZ3RoKSB7XG4gICAgICB2YXIgZnJhbWUgPSBzdGFjay5wb3AoKSxcbiAgICAgICAgZWRnZXMgPSBPYmplY3Qua2V5cyhmcmFtZS5ub2RlLmVkZ2VzKSxcbiAgICAgICAgbGVuID0gZWRnZXMubGVuZ3RoO1xuXG4gICAgICBpZiAoZnJhbWUubm9kZS5maW5hbCkge1xuICAgICAgICAvKiBJbiBTYWZhcmksIGF0IHRoaXMgcG9pbnQgdGhlIHByZWZpeCBpcyBzb21ldGltZXMgY29ycnVwdGVkLCBzZWU6XG4gICAgICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9vbGl2ZXJubi9sdW5yLmpzL2lzc3Vlcy8yNzkgQ2FsbGluZyBhbnlcbiAgICAgICAgICogU3RyaW5nLnByb3RvdHlwZSBtZXRob2QgZm9yY2VzIFNhZmFyaSB0byBcImNhc3RcIiB0aGlzIHN0cmluZyB0byB3aGF0XG4gICAgICAgICAqIGl0J3Mgc3VwcG9zZWQgdG8gYmUsIGZpeGluZyB0aGUgYnVnLiAqL1xuICAgICAgICBmcmFtZS5wcmVmaXguY2hhckF0KDApO1xuICAgICAgICB3b3Jkcy5wdXNoKGZyYW1lLnByZWZpeCk7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdmFyIGVkZ2UgPSBlZGdlc1tpXTtcblxuICAgICAgICBzdGFjay5wdXNoKHtcbiAgICAgICAgICBwcmVmaXg6IGZyYW1lLnByZWZpeC5jb25jYXQoZWRnZSksXG4gICAgICAgICAgbm9kZTogZnJhbWUubm9kZS5lZGdlc1tlZGdlXSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHdvcmRzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBUb2tlblNldC5cbiAgICpcbiAgICogVGhpcyBpcyBpbnRlbmRlZCB0byBhbGxvdyBUb2tlblNldHMgdG8gYmUgdXNlZCBhcyBrZXlzXG4gICAqIGluIG9iamVjdHMsIGxhcmdlbHkgdG8gYWlkIHRoZSBjb25zdHJ1Y3Rpb24gYW5kIG1pbmltaXNhdGlvblxuICAgKiBvZiBhIFRva2VuU2V0LiBBcyBzdWNoIGl0IGlzIG5vdCBkZXNpZ25lZCB0byBiZSBhIGh1bWFuXG4gICAqIGZyaWVuZGx5IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBUb2tlblNldC5cbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIGx1bnIuVG9rZW5TZXQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIE5PVEU6IFVzaW5nIE9iamVjdC5rZXlzIGhlcmUgYXMgdGhpcy5lZGdlcyBpcyB2ZXJ5IGxpa2VseVxuICAgIC8vIHRvIGVudGVyICdoYXNoLW1vZGUnIHdpdGggbWFueSBrZXlzIGJlaW5nIGFkZGVkXG4gICAgLy9cbiAgICAvLyBhdm9pZGluZyBhIGZvci1pbiBsb29wIGhlcmUgYXMgaXQgbGVhZHMgdG8gdGhlIGZ1bmN0aW9uXG4gICAgLy8gYmVpbmcgZGUtb3B0aW1pc2VkIChhdCBsZWFzdCBpbiBWOCkuIEZyb20gc29tZSBzaW1wbGVcbiAgICAvLyBiZW5jaG1hcmtzIHRoZSBwZXJmb3JtYW5jZSBpcyBjb21wYXJhYmxlLCBidXQgYWxsb3dpbmdcbiAgICAvLyBWOCB0byBvcHRpbWl6ZSBtYXkgbWVhbiBlYXN5IHBlcmZvcm1hbmNlIHdpbnMgaW4gdGhlIGZ1dHVyZS5cblxuICAgIGlmICh0aGlzLl9zdHIpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zdHI7XG4gICAgfVxuXG4gICAgdmFyIHN0ciA9IHRoaXMuZmluYWwgPyBcIjFcIiA6IFwiMFwiLFxuICAgICAgbGFiZWxzID0gT2JqZWN0LmtleXModGhpcy5lZGdlcykuc29ydCgpLFxuICAgICAgbGVuID0gbGFiZWxzLmxlbmd0aDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHZhciBsYWJlbCA9IGxhYmVsc1tpXSxcbiAgICAgICAgbm9kZSA9IHRoaXMuZWRnZXNbbGFiZWxdO1xuXG4gICAgICBzdHIgPSBzdHIgKyBsYWJlbCArIG5vZGUuaWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0cjtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyBhIG5ldyBUb2tlblNldCB0aGF0IGlzIHRoZSBpbnRlcnNlY3Rpb24gb2ZcbiAgICogdGhpcyBUb2tlblNldCBhbmQgdGhlIHBhc3NlZCBUb2tlblNldC5cbiAgICpcbiAgICogVGhpcyBpbnRlcnNlY3Rpb24gd2lsbCB0YWtlIGludG8gYWNjb3VudCBhbnkgd2lsZGNhcmRzXG4gICAqIGNvbnRhaW5lZCB3aXRoaW4gdGhlIFRva2VuU2V0LlxuICAgKlxuICAgKiBAcGFyYW0ge2x1bnIuVG9rZW5TZXR9IGIgLSBBbiBvdGhlciBUb2tlblNldCB0byBpbnRlcnNlY3Qgd2l0aC5cbiAgICogQHJldHVybnMge2x1bnIuVG9rZW5TZXR9XG4gICAqL1xuICBsdW5yLlRva2VuU2V0LnByb3RvdHlwZS5pbnRlcnNlY3QgPSBmdW5jdGlvbiAoYikge1xuICAgIHZhciBvdXRwdXQgPSBuZXcgbHVuci5Ub2tlblNldCgpLFxuICAgICAgZnJhbWUgPSB1bmRlZmluZWQ7XG5cbiAgICB2YXIgc3RhY2sgPSBbXG4gICAgICB7XG4gICAgICAgIHFOb2RlOiBiLFxuICAgICAgICBvdXRwdXQ6IG91dHB1dCxcbiAgICAgICAgbm9kZTogdGhpcyxcbiAgICAgIH0sXG4gICAgXTtcblxuICAgIHdoaWxlIChzdGFjay5sZW5ndGgpIHtcbiAgICAgIGZyYW1lID0gc3RhY2sucG9wKCk7XG5cbiAgICAgIC8vIE5PVEU6IEFzIHdpdGggdGhlICN0b1N0cmluZyBtZXRob2QsIHdlIGFyZSB1c2luZ1xuICAgICAgLy8gT2JqZWN0LmtleXMgYW5kIGEgZm9yIGxvb3AgaW5zdGVhZCBvZiBhIGZvci1pbiBsb29wXG4gICAgICAvLyBhcyBib3RoIG9mIHRoZXNlIG9iamVjdHMgZW50ZXIgJ2hhc2gnIG1vZGUsIGNhdXNpbmdcbiAgICAgIC8vIHRoZSBmdW5jdGlvbiB0byBiZSBkZS1vcHRpbWlzZWQgaW4gVjhcbiAgICAgIHZhciBxRWRnZXMgPSBPYmplY3Qua2V5cyhmcmFtZS5xTm9kZS5lZGdlcyksXG4gICAgICAgIHFMZW4gPSBxRWRnZXMubGVuZ3RoLFxuICAgICAgICBuRWRnZXMgPSBPYmplY3Qua2V5cyhmcmFtZS5ub2RlLmVkZ2VzKSxcbiAgICAgICAgbkxlbiA9IG5FZGdlcy5sZW5ndGg7XG5cbiAgICAgIGZvciAodmFyIHEgPSAwOyBxIDwgcUxlbjsgcSsrKSB7XG4gICAgICAgIHZhciBxRWRnZSA9IHFFZGdlc1txXTtcblxuICAgICAgICBmb3IgKHZhciBuID0gMDsgbiA8IG5MZW47IG4rKykge1xuICAgICAgICAgIHZhciBuRWRnZSA9IG5FZGdlc1tuXTtcblxuICAgICAgICAgIGlmIChuRWRnZSA9PSBxRWRnZSB8fCBxRWRnZSA9PSBcIipcIikge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSBmcmFtZS5ub2RlLmVkZ2VzW25FZGdlXSxcbiAgICAgICAgICAgICAgcU5vZGUgPSBmcmFtZS5xTm9kZS5lZGdlc1txRWRnZV0sXG4gICAgICAgICAgICAgIGZpbmFsID0gbm9kZS5maW5hbCAmJiBxTm9kZS5maW5hbCxcbiAgICAgICAgICAgICAgbmV4dCA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgaWYgKG5FZGdlIGluIGZyYW1lLm91dHB1dC5lZGdlcykge1xuICAgICAgICAgICAgICAvLyBhbiBlZGdlIGFscmVhZHkgZXhpc3RzIGZvciB0aGlzIGNoYXJhY3RlclxuICAgICAgICAgICAgICAvLyBubyBuZWVkIHRvIGNyZWF0ZSBhIG5ldyBub2RlLCBqdXN0IHNldCB0aGUgZmluYWxpdHlcbiAgICAgICAgICAgICAgLy8gYml0IHVubGVzcyB0aGlzIG5vZGUgaXMgYWxyZWFkeSBmaW5hbFxuICAgICAgICAgICAgICBuZXh0ID0gZnJhbWUub3V0cHV0LmVkZ2VzW25FZGdlXTtcbiAgICAgICAgICAgICAgbmV4dC5maW5hbCA9IG5leHQuZmluYWwgfHwgZmluYWw7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBubyBlZGdlIGV4aXN0cyB5ZXQsIG11c3QgY3JlYXRlIG9uZVxuICAgICAgICAgICAgICAvLyBzZXQgdGhlIGZpbmFsaXR5IGJpdCBhbmQgaW5zZXJ0IGl0XG4gICAgICAgICAgICAgIC8vIGludG8gdGhlIG91dHB1dFxuICAgICAgICAgICAgICBuZXh0ID0gbmV3IGx1bnIuVG9rZW5TZXQoKTtcbiAgICAgICAgICAgICAgbmV4dC5maW5hbCA9IGZpbmFsO1xuICAgICAgICAgICAgICBmcmFtZS5vdXRwdXQuZWRnZXNbbkVkZ2VdID0gbmV4dDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc3RhY2sucHVzaCh7XG4gICAgICAgICAgICAgIHFOb2RlOiBxTm9kZSxcbiAgICAgICAgICAgICAgb3V0cHV0OiBuZXh0LFxuICAgICAgICAgICAgICBub2RlOiBub2RlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfTtcbiAgbHVuci5Ub2tlblNldC5CdWlsZGVyID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMucHJldmlvdXNXb3JkID0gXCJcIjtcbiAgICB0aGlzLnJvb3QgPSBuZXcgbHVuci5Ub2tlblNldCgpO1xuICAgIHRoaXMudW5jaGVja2VkTm9kZXMgPSBbXTtcbiAgICB0aGlzLm1pbmltaXplZE5vZGVzID0ge307XG4gIH07XG5cbiAgbHVuci5Ub2tlblNldC5CdWlsZGVyLnByb3RvdHlwZS5pbnNlcnQgPSBmdW5jdGlvbiAod29yZCkge1xuICAgIHZhciBub2RlLFxuICAgICAgY29tbW9uUHJlZml4ID0gMDtcblxuICAgIGlmICh3b3JkIDwgdGhpcy5wcmV2aW91c1dvcmQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk91dCBvZiBvcmRlciB3b3JkIGluc2VydGlvblwiKTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHdvcmQubGVuZ3RoICYmIGkgPCB0aGlzLnByZXZpb3VzV29yZC5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHdvcmRbaV0gIT0gdGhpcy5wcmV2aW91c1dvcmRbaV0pIGJyZWFrO1xuICAgICAgY29tbW9uUHJlZml4Kys7XG4gICAgfVxuXG4gICAgdGhpcy5taW5pbWl6ZShjb21tb25QcmVmaXgpO1xuXG4gICAgaWYgKHRoaXMudW5jaGVja2VkTm9kZXMubGVuZ3RoID09IDApIHtcbiAgICAgIG5vZGUgPSB0aGlzLnJvb3Q7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vZGUgPSB0aGlzLnVuY2hlY2tlZE5vZGVzW3RoaXMudW5jaGVja2VkTm9kZXMubGVuZ3RoIC0gMV0uY2hpbGQ7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IGNvbW1vblByZWZpeDsgaSA8IHdvcmQubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBuZXh0Tm9kZSA9IG5ldyBsdW5yLlRva2VuU2V0KCksXG4gICAgICAgIGNoYXIgPSB3b3JkW2ldO1xuXG4gICAgICBub2RlLmVkZ2VzW2NoYXJdID0gbmV4dE5vZGU7XG5cbiAgICAgIHRoaXMudW5jaGVja2VkTm9kZXMucHVzaCh7XG4gICAgICAgIHBhcmVudDogbm9kZSxcbiAgICAgICAgY2hhcjogY2hhcixcbiAgICAgICAgY2hpbGQ6IG5leHROb2RlLFxuICAgICAgfSk7XG5cbiAgICAgIG5vZGUgPSBuZXh0Tm9kZTtcbiAgICB9XG5cbiAgICBub2RlLmZpbmFsID0gdHJ1ZTtcbiAgICB0aGlzLnByZXZpb3VzV29yZCA9IHdvcmQ7XG4gIH07XG5cbiAgbHVuci5Ub2tlblNldC5CdWlsZGVyLnByb3RvdHlwZS5maW5pc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5taW5pbWl6ZSgwKTtcbiAgfTtcblxuICBsdW5yLlRva2VuU2V0LkJ1aWxkZXIucHJvdG90eXBlLm1pbmltaXplID0gZnVuY3Rpb24gKGRvd25Ubykge1xuICAgIGZvciAodmFyIGkgPSB0aGlzLnVuY2hlY2tlZE5vZGVzLmxlbmd0aCAtIDE7IGkgPj0gZG93blRvOyBpLS0pIHtcbiAgICAgIHZhciBub2RlID0gdGhpcy51bmNoZWNrZWROb2Rlc1tpXSxcbiAgICAgICAgY2hpbGRLZXkgPSBub2RlLmNoaWxkLnRvU3RyaW5nKCk7XG5cbiAgICAgIGlmIChjaGlsZEtleSBpbiB0aGlzLm1pbmltaXplZE5vZGVzKSB7XG4gICAgICAgIG5vZGUucGFyZW50LmVkZ2VzW25vZGUuY2hhcl0gPSB0aGlzLm1pbmltaXplZE5vZGVzW2NoaWxkS2V5XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIENhY2hlIHRoZSBrZXkgZm9yIHRoaXMgbm9kZSBzaW5jZVxuICAgICAgICAvLyB3ZSBrbm93IGl0IGNhbid0IGNoYW5nZSBhbnltb3JlXG4gICAgICAgIG5vZGUuY2hpbGQuX3N0ciA9IGNoaWxkS2V5O1xuXG4gICAgICAgIHRoaXMubWluaW1pemVkTm9kZXNbY2hpbGRLZXldID0gbm9kZS5jaGlsZDtcbiAgICAgIH1cblxuICAgICAgdGhpcy51bmNoZWNrZWROb2Rlcy5wb3AoKTtcbiAgICB9XG4gIH07XG4gIC8qIVxuICAgKiBsdW5yLkluZGV4XG4gICAqIENvcHlyaWdodCAoQykgMjAyMCBPbGl2ZXIgTmlnaHRpbmdhbGVcbiAgICovXG5cbiAgLyoqXG4gICAqIEFuIGluZGV4IGNvbnRhaW5zIHRoZSBidWlsdCBpbmRleCBvZiBhbGwgZG9jdW1lbnRzIGFuZCBwcm92aWRlcyBhIHF1ZXJ5IGludGVyZmFjZVxuICAgKiB0byB0aGUgaW5kZXguXG4gICAqXG4gICAqIFVzdWFsbHkgaW5zdGFuY2VzIG9mIGx1bnIuSW5kZXggd2lsbCBub3QgYmUgY3JlYXRlZCB1c2luZyB0aGlzIGNvbnN0cnVjdG9yLCBpbnN0ZWFkXG4gICAqIGx1bnIuQnVpbGRlciBzaG91bGQgYmUgdXNlZCB0byBjb25zdHJ1Y3QgbmV3IGluZGV4ZXMsIG9yIGx1bnIuSW5kZXgubG9hZCBzaG91bGQgYmVcbiAgICogdXNlZCB0byBsb2FkIHByZXZpb3VzbHkgYnVpbHQgYW5kIHNlcmlhbGl6ZWQgaW5kZXhlcy5cbiAgICpcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhdHRycyAtIFRoZSBhdHRyaWJ1dGVzIG9mIHRoZSBidWlsdCBzZWFyY2ggaW5kZXguXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhdHRycy5pbnZlcnRlZEluZGV4IC0gQW4gaW5kZXggb2YgdGVybS9maWVsZCB0byBkb2N1bWVudCByZWZlcmVuY2UuXG4gICAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgbHVuci5WZWN0b3I+fSBhdHRycy5maWVsZFZlY3RvcnMgLSBGaWVsZCB2ZWN0b3JzXG4gICAqIEBwYXJhbSB7bHVuci5Ub2tlblNldH0gYXR0cnMudG9rZW5TZXQgLSBBbiBzZXQgb2YgYWxsIGNvcnB1cyB0b2tlbnMuXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IGF0dHJzLmZpZWxkcyAtIFRoZSBuYW1lcyBvZiBpbmRleGVkIGRvY3VtZW50IGZpZWxkcy5cbiAgICogQHBhcmFtIHtsdW5yLlBpcGVsaW5lfSBhdHRycy5waXBlbGluZSAtIFRoZSBwaXBlbGluZSB0byB1c2UgZm9yIHNlYXJjaCB0ZXJtcy5cbiAgICovXG4gIGx1bnIuSW5kZXggPSBmdW5jdGlvbiAoYXR0cnMpIHtcbiAgICB0aGlzLmludmVydGVkSW5kZXggPSBhdHRycy5pbnZlcnRlZEluZGV4O1xuICAgIHRoaXMuZmllbGRWZWN0b3JzID0gYXR0cnMuZmllbGRWZWN0b3JzO1xuICAgIHRoaXMudG9rZW5TZXQgPSBhdHRycy50b2tlblNldDtcbiAgICB0aGlzLmZpZWxkcyA9IGF0dHJzLmZpZWxkcztcbiAgICB0aGlzLnBpcGVsaW5lID0gYXR0cnMucGlwZWxpbmU7XG4gIH07XG5cbiAgLyoqXG4gICAqIEEgcmVzdWx0IGNvbnRhaW5zIGRldGFpbHMgb2YgYSBkb2N1bWVudCBtYXRjaGluZyBhIHNlYXJjaCBxdWVyeS5cbiAgICogQHR5cGVkZWYge09iamVjdH0gbHVuci5JbmRleH5SZXN1bHRcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IHJlZiAtIFRoZSByZWZlcmVuY2Ugb2YgdGhlIGRvY3VtZW50IHRoaXMgcmVzdWx0IHJlcHJlc2VudHMuXG4gICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBzY29yZSAtIEEgbnVtYmVyIGJldHdlZW4gMCBhbmQgMSByZXByZXNlbnRpbmcgaG93IHNpbWlsYXIgdGhpcyBkb2N1bWVudCBpcyB0byB0aGUgcXVlcnkuXG4gICAqIEBwcm9wZXJ0eSB7bHVuci5NYXRjaERhdGF9IG1hdGNoRGF0YSAtIENvbnRhaW5zIG1ldGFkYXRhIGFib3V0IHRoaXMgbWF0Y2ggaW5jbHVkaW5nIHdoaWNoIHRlcm0ocykgY2F1c2VkIHRoZSBtYXRjaC5cbiAgICovXG5cbiAgLyoqXG4gICAqIEFsdGhvdWdoIGx1bnIgcHJvdmlkZXMgdGhlIGFiaWxpdHkgdG8gY3JlYXRlIHF1ZXJpZXMgdXNpbmcgbHVuci5RdWVyeSwgaXQgYWxzbyBwcm92aWRlcyBhIHNpbXBsZVxuICAgKiBxdWVyeSBsYW5ndWFnZSB3aGljaCBpdHNlbGYgaXMgcGFyc2VkIGludG8gYW4gaW5zdGFuY2Ugb2YgbHVuci5RdWVyeS5cbiAgICpcbiAgICogRm9yIHByb2dyYW1tYXRpY2FsbHkgYnVpbGRpbmcgcXVlcmllcyBpdCBpcyBhZHZpc2VkIHRvIGRpcmVjdGx5IHVzZSBsdW5yLlF1ZXJ5LCB0aGUgcXVlcnkgbGFuZ3VhZ2VcbiAgICogaXMgYmVzdCB1c2VkIGZvciBodW1hbiBlbnRlcmVkIHRleHQgcmF0aGVyIHRoYW4gcHJvZ3JhbSBnZW5lcmF0ZWQgdGV4dC5cbiAgICpcbiAgICogQXQgaXRzIHNpbXBsZXN0IHF1ZXJpZXMgY2FuIGp1c3QgYmUgYSBzaW5nbGUgdGVybSwgZS5nLiBgaGVsbG9gLCBtdWx0aXBsZSB0ZXJtcyBhcmUgYWxzbyBzdXBwb3J0ZWRcbiAgICogYW5kIHdpbGwgYmUgY29tYmluZWQgd2l0aCBPUiwgZS5nIGBoZWxsbyB3b3JsZGAgd2lsbCBtYXRjaCBkb2N1bWVudHMgdGhhdCBjb250YWluIGVpdGhlciAnaGVsbG8nXG4gICAqIG9yICd3b3JsZCcsIHRob3VnaCB0aG9zZSB0aGF0IGNvbnRhaW4gYm90aCB3aWxsIHJhbmsgaGlnaGVyIGluIHRoZSByZXN1bHRzLlxuICAgKlxuICAgKiBXaWxkY2FyZHMgY2FuIGJlIGluY2x1ZGVkIGluIHRlcm1zIHRvIG1hdGNoIG9uZSBvciBtb3JlIHVuc3BlY2lmaWVkIGNoYXJhY3RlcnMsIHRoZXNlIHdpbGRjYXJkcyBjYW5cbiAgICogYmUgaW5zZXJ0ZWQgYW55d2hlcmUgd2l0aGluIHRoZSB0ZXJtLCBhbmQgbW9yZSB0aGFuIG9uZSB3aWxkY2FyZCBjYW4gZXhpc3QgaW4gYSBzaW5nbGUgdGVybS4gQWRkaW5nXG4gICAqIHdpbGRjYXJkcyB3aWxsIGluY3JlYXNlIHRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHRoYXQgd2lsbCBiZSBmb3VuZCBidXQgY2FuIGFsc28gaGF2ZSBhIG5lZ2F0aXZlXG4gICAqIGltcGFjdCBvbiBxdWVyeSBwZXJmb3JtYW5jZSwgZXNwZWNpYWxseSB3aXRoIHdpbGRjYXJkcyBhdCB0aGUgYmVnaW5uaW5nIG9mIGEgdGVybS5cbiAgICpcbiAgICogVGVybXMgY2FuIGJlIHJlc3RyaWN0ZWQgdG8gc3BlY2lmaWMgZmllbGRzLCBlLmcuIGB0aXRsZTpoZWxsb2AsIG9ubHkgZG9jdW1lbnRzIHdpdGggdGhlIHRlcm1cbiAgICogaGVsbG8gaW4gdGhlIHRpdGxlIGZpZWxkIHdpbGwgbWF0Y2ggdGhpcyBxdWVyeS4gVXNpbmcgYSBmaWVsZCBub3QgcHJlc2VudCBpbiB0aGUgaW5kZXggd2lsbCBsZWFkXG4gICAqIHRvIGFuIGVycm9yIGJlaW5nIHRocm93bi5cbiAgICpcbiAgICogTW9kaWZpZXJzIGNhbiBhbHNvIGJlIGFkZGVkIHRvIHRlcm1zLCBsdW5yIHN1cHBvcnRzIGVkaXQgZGlzdGFuY2UgYW5kIGJvb3N0IG1vZGlmaWVycyBvbiB0ZXJtcy4gQSB0ZXJtXG4gICAqIGJvb3N0IHdpbGwgbWFrZSBkb2N1bWVudHMgbWF0Y2hpbmcgdGhhdCB0ZXJtIHNjb3JlIGhpZ2hlciwgZS5nLiBgZm9vXjVgLiBFZGl0IGRpc3RhbmNlIGlzIGFsc28gc3VwcG9ydGVkXG4gICAqIHRvIHByb3ZpZGUgZnV6enkgbWF0Y2hpbmcsIGUuZy4gJ2hlbGxvfjInIHdpbGwgbWF0Y2ggZG9jdW1lbnRzIHdpdGggaGVsbG8gd2l0aCBhbiBlZGl0IGRpc3RhbmNlIG9mIDIuXG4gICAqIEF2b2lkIGxhcmdlIHZhbHVlcyBmb3IgZWRpdCBkaXN0YW5jZSB0byBpbXByb3ZlIHF1ZXJ5IHBlcmZvcm1hbmNlLlxuICAgKlxuICAgKiBFYWNoIHRlcm0gYWxzbyBzdXBwb3J0cyBhIHByZXNlbmNlIG1vZGlmaWVyLiBCeSBkZWZhdWx0IGEgdGVybSdzIHByZXNlbmNlIGluIGRvY3VtZW50IGlzIG9wdGlvbmFsLCBob3dldmVyXG4gICAqIHRoaXMgY2FuIGJlIGNoYW5nZWQgdG8gZWl0aGVyIHJlcXVpcmVkIG9yIHByb2hpYml0ZWQuIEZvciBhIHRlcm0ncyBwcmVzZW5jZSB0byBiZSByZXF1aXJlZCBpbiBhIGRvY3VtZW50IHRoZVxuICAgKiB0ZXJtIHNob3VsZCBiZSBwcmVmaXhlZCB3aXRoIGEgJysnLCBlLmcuIGArZm9vIGJhcmAgaXMgYSBzZWFyY2ggZm9yIGRvY3VtZW50cyB0aGF0IG11c3QgY29udGFpbiAnZm9vJyBhbmRcbiAgICogb3B0aW9uYWxseSBjb250YWluICdiYXInLiBDb252ZXJzZWx5IGEgbGVhZGluZyAnLScgc2V0cyB0aGUgdGVybXMgcHJlc2VuY2UgdG8gcHJvaGliaXRlZCwgaS5lLiBpdCBtdXN0IG5vdFxuICAgKiBhcHBlYXIgaW4gYSBkb2N1bWVudCwgZS5nLiBgLWZvbyBiYXJgIGlzIGEgc2VhcmNoIGZvciBkb2N1bWVudHMgdGhhdCBkbyBub3QgY29udGFpbiAnZm9vJyBidXQgbWF5IGNvbnRhaW4gJ2JhcicuXG4gICAqXG4gICAqIFRvIGVzY2FwZSBzcGVjaWFsIGNoYXJhY3RlcnMgdGhlIGJhY2tzbGFzaCBjaGFyYWN0ZXIgJ1xcJyBjYW4gYmUgdXNlZCwgdGhpcyBhbGxvd3Mgc2VhcmNoZXMgdG8gaW5jbHVkZVxuICAgKiBjaGFyYWN0ZXJzIHRoYXQgd291bGQgbm9ybWFsbHkgYmUgY29uc2lkZXJlZCBtb2RpZmllcnMsIGUuZy4gYGZvb1xcfjJgIHdpbGwgc2VhcmNoIGZvciBhIHRlcm0gXCJmb29+MlwiIGluc3RlYWRcbiAgICogb2YgYXR0ZW1wdGluZyB0byBhcHBseSBhIGJvb3N0IG9mIDIgdG8gdGhlIHNlYXJjaCB0ZXJtIFwiZm9vXCIuXG4gICAqXG4gICAqIEB0eXBlZGVmIHtzdHJpbmd9IGx1bnIuSW5kZXh+UXVlcnlTdHJpbmdcbiAgICogQGV4YW1wbGUgPGNhcHRpb24+U2ltcGxlIHNpbmdsZSB0ZXJtIHF1ZXJ5PC9jYXB0aW9uPlxuICAgKiBoZWxsb1xuICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5NdWx0aXBsZSB0ZXJtIHF1ZXJ5PC9jYXB0aW9uPlxuICAgKiBoZWxsbyB3b3JsZFxuICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj50ZXJtIHNjb3BlZCB0byBhIGZpZWxkPC9jYXB0aW9uPlxuICAgKiB0aXRsZTpoZWxsb1xuICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj50ZXJtIHdpdGggYSBib29zdCBvZiAxMDwvY2FwdGlvbj5cbiAgICogaGVsbG9eMTBcbiAgICogQGV4YW1wbGUgPGNhcHRpb24+dGVybSB3aXRoIGFuIGVkaXQgZGlzdGFuY2Ugb2YgMjwvY2FwdGlvbj5cbiAgICogaGVsbG9+MlxuICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj50ZXJtcyB3aXRoIHByZXNlbmNlIG1vZGlmaWVyczwvY2FwdGlvbj5cbiAgICogLWZvbyArYmFyIGJhelxuICAgKi9cblxuICAvKipcbiAgICogUGVyZm9ybXMgYSBzZWFyY2ggYWdhaW5zdCB0aGUgaW5kZXggdXNpbmcgbHVuciBxdWVyeSBzeW50YXguXG4gICAqXG4gICAqIFJlc3VsdHMgd2lsbCBiZSByZXR1cm5lZCBzb3J0ZWQgYnkgdGhlaXIgc2NvcmUsIHRoZSBtb3N0IHJlbGV2YW50IHJlc3VsdHNcbiAgICogd2lsbCBiZSByZXR1cm5lZCBmaXJzdC4gIEZvciBkZXRhaWxzIG9uIGhvdyB0aGUgc2NvcmUgaXMgY2FsY3VsYXRlZCwgcGxlYXNlIHNlZVxuICAgKiB0aGUge0BsaW5rIGh0dHBzOi8vbHVucmpzLmNvbS9ndWlkZXMvc2VhcmNoaW5nLmh0bWwjc2NvcmluZ3xndWlkZX0uXG4gICAqXG4gICAqIEZvciBtb3JlIHByb2dyYW1tYXRpYyBxdWVyeWluZyB1c2UgbHVuci5JbmRleCNxdWVyeS5cbiAgICpcbiAgICogQHBhcmFtIHtsdW5yLkluZGV4flF1ZXJ5U3RyaW5nfSBxdWVyeVN0cmluZyAtIEEgc3RyaW5nIGNvbnRhaW5pbmcgYSBsdW5yIHF1ZXJ5LlxuICAgKiBAdGhyb3dzIHtsdW5yLlF1ZXJ5UGFyc2VFcnJvcn0gSWYgdGhlIHBhc3NlZCBxdWVyeSBzdHJpbmcgY2Fubm90IGJlIHBhcnNlZC5cbiAgICogQHJldHVybnMge2x1bnIuSW5kZXh+UmVzdWx0W119XG4gICAqL1xuICBsdW5yLkluZGV4LnByb3RvdHlwZS5zZWFyY2ggPSBmdW5jdGlvbiAocXVlcnlTdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5xdWVyeShmdW5jdGlvbiAocXVlcnkpIHtcbiAgICAgIHZhciBwYXJzZXIgPSBuZXcgbHVuci5RdWVyeVBhcnNlcihxdWVyeVN0cmluZywgcXVlcnkpO1xuICAgICAgcGFyc2VyLnBhcnNlKCk7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEEgcXVlcnkgYnVpbGRlciBjYWxsYmFjayBwcm92aWRlcyBhIHF1ZXJ5IG9iamVjdCB0byBiZSB1c2VkIHRvIGV4cHJlc3NcbiAgICogdGhlIHF1ZXJ5IHRvIHBlcmZvcm0gb24gdGhlIGluZGV4LlxuICAgKlxuICAgKiBAY2FsbGJhY2sgbHVuci5JbmRleH5xdWVyeUJ1aWxkZXJcbiAgICogQHBhcmFtIHtsdW5yLlF1ZXJ5fSBxdWVyeSAtIFRoZSBxdWVyeSBvYmplY3QgdG8gYnVpbGQgdXAuXG4gICAqIEB0aGlzIGx1bnIuUXVlcnlcbiAgICovXG5cbiAgLyoqXG4gICAqIFBlcmZvcm1zIGEgcXVlcnkgYWdhaW5zdCB0aGUgaW5kZXggdXNpbmcgdGhlIHlpZWxkZWQgbHVuci5RdWVyeSBvYmplY3QuXG4gICAqXG4gICAqIElmIHBlcmZvcm1pbmcgcHJvZ3JhbW1hdGljIHF1ZXJpZXMgYWdhaW5zdCB0aGUgaW5kZXgsIHRoaXMgbWV0aG9kIGlzIHByZWZlcnJlZFxuICAgKiBvdmVyIGx1bnIuSW5kZXgjc2VhcmNoIHNvIGFzIHRvIGF2b2lkIHRoZSBhZGRpdGlvbmFsIHF1ZXJ5IHBhcnNpbmcgb3ZlcmhlYWQuXG4gICAqXG4gICAqIEEgcXVlcnkgb2JqZWN0IGlzIHlpZWxkZWQgdG8gdGhlIHN1cHBsaWVkIGZ1bmN0aW9uIHdoaWNoIHNob3VsZCBiZSB1c2VkIHRvXG4gICAqIGV4cHJlc3MgdGhlIHF1ZXJ5IHRvIGJlIHJ1biBhZ2FpbnN0IHRoZSBpbmRleC5cbiAgICpcbiAgICogTm90ZSB0aGF0IGFsdGhvdWdoIHRoaXMgZnVuY3Rpb24gdGFrZXMgYSBjYWxsYmFjayBwYXJhbWV0ZXIgaXQgaXMgX25vdF8gYW5cbiAgICogYXN5bmNocm9ub3VzIG9wZXJhdGlvbiwgdGhlIGNhbGxiYWNrIGlzIGp1c3QgeWllbGRlZCBhIHF1ZXJ5IG9iamVjdCB0byBiZVxuICAgKiBjdXN0b21pemVkLlxuICAgKlxuICAgKiBAcGFyYW0ge2x1bnIuSW5kZXh+cXVlcnlCdWlsZGVyfSBmbiAtIEEgZnVuY3Rpb24gdGhhdCBpcyB1c2VkIHRvIGJ1aWxkIHRoZSBxdWVyeS5cbiAgICogQHJldHVybnMge2x1bnIuSW5kZXh+UmVzdWx0W119XG4gICAqL1xuICBsdW5yLkluZGV4LnByb3RvdHlwZS5xdWVyeSA9IGZ1bmN0aW9uIChmbikge1xuICAgIC8vIGZvciBlYWNoIHF1ZXJ5IGNsYXVzZVxuICAgIC8vICogcHJvY2VzcyB0ZXJtc1xuICAgIC8vICogZXhwYW5kIHRlcm1zIGZyb20gdG9rZW4gc2V0XG4gICAgLy8gKiBmaW5kIG1hdGNoaW5nIGRvY3VtZW50cyBhbmQgbWV0YWRhdGFcbiAgICAvLyAqIGdldCBkb2N1bWVudCB2ZWN0b3JzXG4gICAgLy8gKiBzY29yZSBkb2N1bWVudHNcblxuICAgIHZhciBxdWVyeSA9IG5ldyBsdW5yLlF1ZXJ5KHRoaXMuZmllbGRzKSxcbiAgICAgIG1hdGNoaW5nRmllbGRzID0gT2JqZWN0LmNyZWF0ZShudWxsKSxcbiAgICAgIHF1ZXJ5VmVjdG9ycyA9IE9iamVjdC5jcmVhdGUobnVsbCksXG4gICAgICB0ZXJtRmllbGRDYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCksXG4gICAgICByZXF1aXJlZE1hdGNoZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpLFxuICAgICAgcHJvaGliaXRlZE1hdGNoZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gICAgLypcbiAgICAgKiBUbyBzdXBwb3J0IGZpZWxkIGxldmVsIGJvb3N0cyBhIHF1ZXJ5IHZlY3RvciBpcyBjcmVhdGVkIHBlclxuICAgICAqIGZpZWxkLiBBbiBlbXB0eSB2ZWN0b3IgaXMgZWFnZXJseSBjcmVhdGVkIHRvIHN1cHBvcnQgbmVnYXRlZFxuICAgICAqIHF1ZXJpZXMuXG4gICAgICovXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmZpZWxkcy5sZW5ndGg7IGkrKykge1xuICAgICAgcXVlcnlWZWN0b3JzW3RoaXMuZmllbGRzW2ldXSA9IG5ldyBsdW5yLlZlY3RvcigpO1xuICAgIH1cblxuICAgIGZuLmNhbGwocXVlcnksIHF1ZXJ5KTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcXVlcnkuY2xhdXNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgLypcbiAgICAgICAqIFVubGVzcyB0aGUgcGlwZWxpbmUgaGFzIGJlZW4gZGlzYWJsZWQgZm9yIHRoaXMgdGVybSwgd2hpY2ggaXNcbiAgICAgICAqIHRoZSBjYXNlIGZvciB0ZXJtcyB3aXRoIHdpbGRjYXJkcywgd2UgbmVlZCB0byBwYXNzIHRoZSBjbGF1c2VcbiAgICAgICAqIHRlcm0gdGhyb3VnaCB0aGUgc2VhcmNoIHBpcGVsaW5lLiBBIHBpcGVsaW5lIHJldHVybnMgYW4gYXJyYXlcbiAgICAgICAqIG9mIHByb2Nlc3NlZCB0ZXJtcy4gUGlwZWxpbmUgZnVuY3Rpb25zIG1heSBleHBhbmQgdGhlIHBhc3NlZFxuICAgICAgICogdGVybSwgd2hpY2ggbWVhbnMgd2UgbWF5IGVuZCB1cCBwZXJmb3JtaW5nIG11bHRpcGxlIGluZGV4IGxvb2t1cHNcbiAgICAgICAqIGZvciBhIHNpbmdsZSBxdWVyeSB0ZXJtLlxuICAgICAgICovXG4gICAgICB2YXIgY2xhdXNlID0gcXVlcnkuY2xhdXNlc1tpXSxcbiAgICAgICAgdGVybXMgPSBudWxsLFxuICAgICAgICBjbGF1c2VNYXRjaGVzID0gbHVuci5TZXQuZW1wdHk7XG5cbiAgICAgIGlmIChjbGF1c2UudXNlUGlwZWxpbmUpIHtcbiAgICAgICAgdGVybXMgPSB0aGlzLnBpcGVsaW5lLnJ1blN0cmluZyhjbGF1c2UudGVybSwge1xuICAgICAgICAgIGZpZWxkczogY2xhdXNlLmZpZWxkcyxcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0ZXJtcyA9IFtjbGF1c2UudGVybV07XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIG0gPSAwOyBtIDwgdGVybXMubGVuZ3RoOyBtKyspIHtcbiAgICAgICAgdmFyIHRlcm0gPSB0ZXJtc1ttXTtcblxuICAgICAgICAvKlxuICAgICAgICAgKiBFYWNoIHRlcm0gcmV0dXJuZWQgZnJvbSB0aGUgcGlwZWxpbmUgbmVlZHMgdG8gdXNlIHRoZSBzYW1lIHF1ZXJ5XG4gICAgICAgICAqIGNsYXVzZSBvYmplY3QsIGUuZy4gdGhlIHNhbWUgYm9vc3QgYW5kIG9yIGVkaXQgZGlzdGFuY2UuIFRoZVxuICAgICAgICAgKiBzaW1wbGVzdCB3YXkgdG8gZG8gdGhpcyBpcyB0byByZS11c2UgdGhlIGNsYXVzZSBvYmplY3QgYnV0IG11dGF0ZVxuICAgICAgICAgKiBpdHMgdGVybSBwcm9wZXJ0eS5cbiAgICAgICAgICovXG4gICAgICAgIGNsYXVzZS50ZXJtID0gdGVybTtcblxuICAgICAgICAvKlxuICAgICAgICAgKiBGcm9tIHRoZSB0ZXJtIGluIHRoZSBjbGF1c2Ugd2UgY3JlYXRlIGEgdG9rZW4gc2V0IHdoaWNoIHdpbGwgdGhlblxuICAgICAgICAgKiBiZSB1c2VkIHRvIGludGVyc2VjdCB0aGUgaW5kZXhlcyB0b2tlbiBzZXQgdG8gZ2V0IGEgbGlzdCBvZiB0ZXJtc1xuICAgICAgICAgKiB0byBsb29rdXAgaW4gdGhlIGludmVydGVkIGluZGV4XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgdGVybVRva2VuU2V0ID0gbHVuci5Ub2tlblNldC5mcm9tQ2xhdXNlKGNsYXVzZSksXG4gICAgICAgICAgZXhwYW5kZWRUZXJtcyA9IHRoaXMudG9rZW5TZXQuaW50ZXJzZWN0KHRlcm1Ub2tlblNldCkudG9BcnJheSgpO1xuXG4gICAgICAgIC8qXG4gICAgICAgICAqIElmIGEgdGVybSBtYXJrZWQgYXMgcmVxdWlyZWQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIHRva2VuU2V0IGl0IGlzXG4gICAgICAgICAqIGltcG9zc2libGUgZm9yIHRoZSBzZWFyY2ggdG8gcmV0dXJuIGFueSBtYXRjaGVzLiBXZSBzZXQgYWxsIHRoZSBmaWVsZFxuICAgICAgICAgKiBzY29wZWQgcmVxdWlyZWQgbWF0Y2hlcyBzZXQgdG8gZW1wdHkgYW5kIHN0b3AgZXhhbWluaW5nIGFueSBmdXJ0aGVyXG4gICAgICAgICAqIGNsYXVzZXMuXG4gICAgICAgICAqL1xuICAgICAgICBpZiAoXG4gICAgICAgICAgZXhwYW5kZWRUZXJtcy5sZW5ndGggPT09IDAgJiZcbiAgICAgICAgICBjbGF1c2UucHJlc2VuY2UgPT09IGx1bnIuUXVlcnkucHJlc2VuY2UuUkVRVUlSRURcbiAgICAgICAgKSB7XG4gICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBjbGF1c2UuZmllbGRzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICB2YXIgZmllbGQgPSBjbGF1c2UuZmllbGRzW2tdO1xuICAgICAgICAgICAgcmVxdWlyZWRNYXRjaGVzW2ZpZWxkXSA9IGx1bnIuU2V0LmVtcHR5O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBleHBhbmRlZFRlcm1zLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgLypcbiAgICAgICAgICAgKiBGb3IgZWFjaCB0ZXJtIGdldCB0aGUgcG9zdGluZyBhbmQgdGVybUluZGV4LCB0aGlzIGlzIHJlcXVpcmVkIGZvclxuICAgICAgICAgICAqIGJ1aWxkaW5nIHRoZSBxdWVyeSB2ZWN0b3IuXG4gICAgICAgICAgICovXG4gICAgICAgICAgdmFyIGV4cGFuZGVkVGVybSA9IGV4cGFuZGVkVGVybXNbal0sXG4gICAgICAgICAgICBwb3N0aW5nID0gdGhpcy5pbnZlcnRlZEluZGV4W2V4cGFuZGVkVGVybV0sXG4gICAgICAgICAgICB0ZXJtSW5kZXggPSBwb3N0aW5nLl9pbmRleDtcblxuICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgY2xhdXNlLmZpZWxkcy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAqIEZvciBlYWNoIGZpZWxkIHRoYXQgdGhpcyBxdWVyeSB0ZXJtIGlzIHNjb3BlZCBieSAoYnkgZGVmYXVsdFxuICAgICAgICAgICAgICogYWxsIGZpZWxkcyBhcmUgaW4gc2NvcGUpIHdlIG5lZWQgdG8gZ2V0IGFsbCB0aGUgZG9jdW1lbnQgcmVmc1xuICAgICAgICAgICAgICogdGhhdCBoYXZlIHRoaXMgdGVybSBpbiB0aGF0IGZpZWxkLlxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIFRoZSBwb3N0aW5nIGlzIHRoZSBlbnRyeSBpbiB0aGUgaW52ZXJ0ZWRJbmRleCBmb3IgdGhlIG1hdGNoaW5nXG4gICAgICAgICAgICAgKiB0ZXJtIGZyb20gYWJvdmUuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHZhciBmaWVsZCA9IGNsYXVzZS5maWVsZHNba10sXG4gICAgICAgICAgICAgIGZpZWxkUG9zdGluZyA9IHBvc3RpbmdbZmllbGRdLFxuICAgICAgICAgICAgICBtYXRjaGluZ0RvY3VtZW50UmVmcyA9IE9iamVjdC5rZXlzKGZpZWxkUG9zdGluZyksXG4gICAgICAgICAgICAgIHRlcm1GaWVsZCA9IGV4cGFuZGVkVGVybSArIFwiL1wiICsgZmllbGQsXG4gICAgICAgICAgICAgIG1hdGNoaW5nRG9jdW1lbnRzU2V0ID0gbmV3IGx1bnIuU2V0KG1hdGNoaW5nRG9jdW1lbnRSZWZzKTtcblxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAqIGlmIHRoZSBwcmVzZW5jZSBvZiB0aGlzIHRlcm0gaXMgcmVxdWlyZWQgZW5zdXJlIHRoYXQgdGhlIG1hdGNoaW5nXG4gICAgICAgICAgICAgKiBkb2N1bWVudHMgYXJlIGFkZGVkIHRvIHRoZSBzZXQgb2YgcmVxdWlyZWQgbWF0Y2hlcyBmb3IgdGhpcyBjbGF1c2UuXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpZiAoY2xhdXNlLnByZXNlbmNlID09IGx1bnIuUXVlcnkucHJlc2VuY2UuUkVRVUlSRUQpIHtcbiAgICAgICAgICAgICAgY2xhdXNlTWF0Y2hlcyA9IGNsYXVzZU1hdGNoZXMudW5pb24obWF0Y2hpbmdEb2N1bWVudHNTZXQpO1xuXG4gICAgICAgICAgICAgIGlmIChyZXF1aXJlZE1hdGNoZXNbZmllbGRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZE1hdGNoZXNbZmllbGRdID0gbHVuci5TZXQuY29tcGxldGU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAqIGlmIHRoZSBwcmVzZW5jZSBvZiB0aGlzIHRlcm0gaXMgcHJvaGliaXRlZCBlbnN1cmUgdGhhdCB0aGUgbWF0Y2hpbmdcbiAgICAgICAgICAgICAqIGRvY3VtZW50cyBhcmUgYWRkZWQgdG8gdGhlIHNldCBvZiBwcm9oaWJpdGVkIG1hdGNoZXMgZm9yIHRoaXMgZmllbGQsXG4gICAgICAgICAgICAgKiBjcmVhdGluZyB0aGF0IHNldCBpZiBpdCBkb2VzIG5vdCB5ZXQgZXhpc3QuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGlmIChjbGF1c2UucHJlc2VuY2UgPT0gbHVuci5RdWVyeS5wcmVzZW5jZS5QUk9ISUJJVEVEKSB7XG4gICAgICAgICAgICAgIGlmIChwcm9oaWJpdGVkTWF0Y2hlc1tmaWVsZF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHByb2hpYml0ZWRNYXRjaGVzW2ZpZWxkXSA9IGx1bnIuU2V0LmVtcHR5O1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgcHJvaGliaXRlZE1hdGNoZXNbZmllbGRdID1cbiAgICAgICAgICAgICAgICBwcm9oaWJpdGVkTWF0Y2hlc1tmaWVsZF0udW5pb24obWF0Y2hpbmdEb2N1bWVudHNTZXQpO1xuXG4gICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAqIFByb2hpYml0ZWQgbWF0Y2hlcyBzaG91bGQgbm90IGJlIHBhcnQgb2YgdGhlIHF1ZXJ5IHZlY3RvciB1c2VkIGZvclxuICAgICAgICAgICAgICAgKiBzaW1pbGFyaXR5IHNjb3JpbmcgYW5kIG5vIG1ldGFkYXRhIHNob3VsZCBiZSBleHRyYWN0ZWQgc28gd2UgY29udGludWVcbiAgICAgICAgICAgICAgICogdG8gdGhlIG5leHQgZmllbGRcbiAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgICogVGhlIHF1ZXJ5IGZpZWxkIHZlY3RvciBpcyBwb3B1bGF0ZWQgdXNpbmcgdGhlIHRlcm1JbmRleCBmb3VuZCBmb3JcbiAgICAgICAgICAgICAqIHRoZSB0ZXJtIGFuZCBhIHVuaXQgdmFsdWUgd2l0aCB0aGUgYXBwcm9wcmlhdGUgYm9vc3QgYXBwbGllZC5cbiAgICAgICAgICAgICAqIFVzaW5nIHVwc2VydCBiZWNhdXNlIHRoZXJlIGNvdWxkIGFscmVhZHkgYmUgYW4gZW50cnkgaW4gdGhlIHZlY3RvclxuICAgICAgICAgICAgICogZm9yIHRoZSB0ZXJtIHdlIGFyZSB3b3JraW5nIHdpdGguIEluIHRoYXQgY2FzZSB3ZSBqdXN0IGFkZCB0aGUgc2NvcmVzXG4gICAgICAgICAgICAgKiB0b2dldGhlci5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgcXVlcnlWZWN0b3JzW2ZpZWxkXS51cHNlcnQoXG4gICAgICAgICAgICAgIHRlcm1JbmRleCxcbiAgICAgICAgICAgICAgY2xhdXNlLmJvb3N0LFxuICAgICAgICAgICAgICBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgICAgIHJldHVybiBhICsgYjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJZiB3ZSd2ZSBhbHJlYWR5IHNlZW4gdGhpcyB0ZXJtLCBmaWVsZCBjb21ibyB0aGVuIHdlJ3ZlIGFscmVhZHkgY29sbGVjdGVkXG4gICAgICAgICAgICAgKiB0aGUgbWF0Y2hpbmcgZG9jdW1lbnRzIGFuZCBtZXRhZGF0YSwgbm8gbmVlZCB0byBnbyB0aHJvdWdoIGFsbCB0aGF0IGFnYWluXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGlmICh0ZXJtRmllbGRDYWNoZVt0ZXJtRmllbGRdKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHZhciBsID0gMDsgbCA8IG1hdGNoaW5nRG9jdW1lbnRSZWZzLmxlbmd0aDsgbCsrKSB7XG4gICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAqIEFsbCBtZXRhZGF0YSBmb3IgdGhpcyB0ZXJtL2ZpZWxkL2RvY3VtZW50IHRyaXBsZVxuICAgICAgICAgICAgICAgKiBhcmUgdGhlbiBleHRyYWN0ZWQgYW5kIGNvbGxlY3RlZCBpbnRvIGFuIGluc3RhbmNlXG4gICAgICAgICAgICAgICAqIG9mIGx1bnIuTWF0Y2hEYXRhIHJlYWR5IHRvIGJlIHJldHVybmVkIGluIHRoZSBxdWVyeVxuICAgICAgICAgICAgICAgKiByZXN1bHRzXG4gICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICB2YXIgbWF0Y2hpbmdEb2N1bWVudFJlZiA9IG1hdGNoaW5nRG9jdW1lbnRSZWZzW2xdLFxuICAgICAgICAgICAgICAgIG1hdGNoaW5nRmllbGRSZWYgPSBuZXcgbHVuci5GaWVsZFJlZihcbiAgICAgICAgICAgICAgICAgIG1hdGNoaW5nRG9jdW1lbnRSZWYsXG4gICAgICAgICAgICAgICAgICBmaWVsZFxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgbWV0YWRhdGEgPSBmaWVsZFBvc3RpbmdbbWF0Y2hpbmdEb2N1bWVudFJlZl0sXG4gICAgICAgICAgICAgICAgZmllbGRNYXRjaDtcblxuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgKGZpZWxkTWF0Y2ggPSBtYXRjaGluZ0ZpZWxkc1ttYXRjaGluZ0ZpZWxkUmVmXSkgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBtYXRjaGluZ0ZpZWxkc1ttYXRjaGluZ0ZpZWxkUmVmXSA9IG5ldyBsdW5yLk1hdGNoRGF0YShcbiAgICAgICAgICAgICAgICAgIGV4cGFuZGVkVGVybSxcbiAgICAgICAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgICAgICAgbWV0YWRhdGFcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZpZWxkTWF0Y2guYWRkKGV4cGFuZGVkVGVybSwgZmllbGQsIG1ldGFkYXRhKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0ZXJtRmllbGRDYWNoZVt0ZXJtRmllbGRdID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBJZiB0aGUgcHJlc2VuY2Ugd2FzIHJlcXVpcmVkIHdlIG5lZWQgdG8gdXBkYXRlIHRoZSByZXF1aXJlZE1hdGNoZXMgZmllbGQgc2V0cy5cbiAgICAgICAqIFdlIGRvIHRoaXMgYWZ0ZXIgYWxsIGZpZWxkcyBmb3IgdGhlIHRlcm0gaGF2ZSBjb2xsZWN0ZWQgdGhlaXIgbWF0Y2hlcyBiZWNhdXNlXG4gICAgICAgKiB0aGUgY2xhdXNlIHRlcm1zIHByZXNlbmNlIGlzIHJlcXVpcmVkIGluIF9hbnlfIG9mIHRoZSBmaWVsZHMgbm90IF9hbGxfIG9mIHRoZVxuICAgICAgICogZmllbGRzLlxuICAgICAgICovXG4gICAgICBpZiAoY2xhdXNlLnByZXNlbmNlID09PSBsdW5yLlF1ZXJ5LnByZXNlbmNlLlJFUVVJUkVEKSB7XG4gICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgY2xhdXNlLmZpZWxkcy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgIHZhciBmaWVsZCA9IGNsYXVzZS5maWVsZHNba107XG4gICAgICAgICAgcmVxdWlyZWRNYXRjaGVzW2ZpZWxkXSA9XG4gICAgICAgICAgICByZXF1aXJlZE1hdGNoZXNbZmllbGRdLmludGVyc2VjdChjbGF1c2VNYXRjaGVzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE5lZWQgdG8gY29tYmluZSB0aGUgZmllbGQgc2NvcGVkIHJlcXVpcmVkIGFuZCBwcm9oaWJpdGVkXG4gICAgICogbWF0Y2hpbmcgZG9jdW1lbnRzIGludG8gYSBnbG9iYWwgc2V0IG9mIHJlcXVpcmVkIGFuZCBwcm9oaWJpdGVkXG4gICAgICogbWF0Y2hlc1xuICAgICAqL1xuICAgIHZhciBhbGxSZXF1aXJlZE1hdGNoZXMgPSBsdW5yLlNldC5jb21wbGV0ZSxcbiAgICAgIGFsbFByb2hpYml0ZWRNYXRjaGVzID0gbHVuci5TZXQuZW1wdHk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZmllbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkc1tpXTtcblxuICAgICAgaWYgKHJlcXVpcmVkTWF0Y2hlc1tmaWVsZF0pIHtcbiAgICAgICAgYWxsUmVxdWlyZWRNYXRjaGVzID0gYWxsUmVxdWlyZWRNYXRjaGVzLmludGVyc2VjdChcbiAgICAgICAgICByZXF1aXJlZE1hdGNoZXNbZmllbGRdXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9oaWJpdGVkTWF0Y2hlc1tmaWVsZF0pIHtcbiAgICAgICAgYWxsUHJvaGliaXRlZE1hdGNoZXMgPSBhbGxQcm9oaWJpdGVkTWF0Y2hlcy51bmlvbihcbiAgICAgICAgICBwcm9oaWJpdGVkTWF0Y2hlc1tmaWVsZF1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgbWF0Y2hpbmdGaWVsZFJlZnMgPSBPYmplY3Qua2V5cyhtYXRjaGluZ0ZpZWxkcyksXG4gICAgICByZXN1bHRzID0gW10sXG4gICAgICBtYXRjaGVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAgIC8qXG4gICAgICogSWYgdGhlIHF1ZXJ5IGlzIG5lZ2F0ZWQgKGNvbnRhaW5zIG9ubHkgcHJvaGliaXRlZCB0ZXJtcylcbiAgICAgKiB3ZSBuZWVkIHRvIGdldCBfYWxsXyBmaWVsZFJlZnMgY3VycmVudGx5IGV4aXN0aW5nIGluIHRoZVxuICAgICAqIGluZGV4LiBUaGlzIGlzIG9ubHkgZG9uZSB3aGVuIHdlIGtub3cgdGhhdCB0aGUgcXVlcnkgaXNcbiAgICAgKiBlbnRpcmVseSBwcm9oaWJpdGVkIHRlcm1zIHRvIGF2b2lkIGFueSBjb3N0IG9mIGdldHRpbmcgYWxsXG4gICAgICogZmllbGRSZWZzIHVubmVjZXNzYXJpbHkuXG4gICAgICpcbiAgICAgKiBBZGRpdGlvbmFsbHksIGJsYW5rIE1hdGNoRGF0YSBtdXN0IGJlIGNyZWF0ZWQgdG8gY29ycmVjdGx5XG4gICAgICogcG9wdWxhdGUgdGhlIHJlc3VsdHMuXG4gICAgICovXG4gICAgaWYgKHF1ZXJ5LmlzTmVnYXRlZCgpKSB7XG4gICAgICBtYXRjaGluZ0ZpZWxkUmVmcyA9IE9iamVjdC5rZXlzKHRoaXMuZmllbGRWZWN0b3JzKTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXRjaGluZ0ZpZWxkUmVmcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgbWF0Y2hpbmdGaWVsZFJlZiA9IG1hdGNoaW5nRmllbGRSZWZzW2ldO1xuICAgICAgICB2YXIgZmllbGRSZWYgPSBsdW5yLkZpZWxkUmVmLmZyb21TdHJpbmcobWF0Y2hpbmdGaWVsZFJlZik7XG4gICAgICAgIG1hdGNoaW5nRmllbGRzW21hdGNoaW5nRmllbGRSZWZdID0gbmV3IGx1bnIuTWF0Y2hEYXRhKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXRjaGluZ0ZpZWxkUmVmcy5sZW5ndGg7IGkrKykge1xuICAgICAgLypcbiAgICAgICAqIEN1cnJlbnRseSB3ZSBoYXZlIGRvY3VtZW50IGZpZWxkcyB0aGF0IG1hdGNoIHRoZSBxdWVyeSwgYnV0IHdlXG4gICAgICAgKiBuZWVkIHRvIHJldHVybiBkb2N1bWVudHMuIFRoZSBtYXRjaERhdGEgYW5kIHNjb3JlcyBhcmUgY29tYmluZWRcbiAgICAgICAqIGZyb20gbXVsdGlwbGUgZmllbGRzIGJlbG9uZ2luZyB0byB0aGUgc2FtZSBkb2N1bWVudC5cbiAgICAgICAqXG4gICAgICAgKiBTY29yZXMgYXJlIGNhbGN1bGF0ZWQgYnkgZmllbGQsIHVzaW5nIHRoZSBxdWVyeSB2ZWN0b3JzIGNyZWF0ZWRcbiAgICAgICAqIGFib3ZlLCBhbmQgY29tYmluZWQgaW50byBhIGZpbmFsIGRvY3VtZW50IHNjb3JlIHVzaW5nIGFkZGl0aW9uLlxuICAgICAgICovXG4gICAgICB2YXIgZmllbGRSZWYgPSBsdW5yLkZpZWxkUmVmLmZyb21TdHJpbmcobWF0Y2hpbmdGaWVsZFJlZnNbaV0pLFxuICAgICAgICBkb2NSZWYgPSBmaWVsZFJlZi5kb2NSZWY7XG5cbiAgICAgIGlmICghYWxsUmVxdWlyZWRNYXRjaGVzLmNvbnRhaW5zKGRvY1JlZikpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChhbGxQcm9oaWJpdGVkTWF0Y2hlcy5jb250YWlucyhkb2NSZWYpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICB2YXIgZmllbGRWZWN0b3IgPSB0aGlzLmZpZWxkVmVjdG9yc1tmaWVsZFJlZl0sXG4gICAgICAgIHNjb3JlID0gcXVlcnlWZWN0b3JzW2ZpZWxkUmVmLmZpZWxkTmFtZV0uc2ltaWxhcml0eShmaWVsZFZlY3RvciksXG4gICAgICAgIGRvY01hdGNoO1xuXG4gICAgICBpZiAoKGRvY01hdGNoID0gbWF0Y2hlc1tkb2NSZWZdKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGRvY01hdGNoLnNjb3JlICs9IHNjb3JlO1xuICAgICAgICBkb2NNYXRjaC5tYXRjaERhdGEuY29tYmluZShtYXRjaGluZ0ZpZWxkc1tmaWVsZFJlZl0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIG1hdGNoID0ge1xuICAgICAgICAgIHJlZjogZG9jUmVmLFxuICAgICAgICAgIHNjb3JlOiBzY29yZSxcbiAgICAgICAgICBtYXRjaERhdGE6IG1hdGNoaW5nRmllbGRzW2ZpZWxkUmVmXSxcbiAgICAgICAgfTtcbiAgICAgICAgbWF0Y2hlc1tkb2NSZWZdID0gbWF0Y2g7XG4gICAgICAgIHJlc3VsdHMucHVzaChtYXRjaCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBTb3J0IHRoZSByZXN1bHRzIG9iamVjdHMgYnkgc2NvcmUsIGhpZ2hlc3QgZmlyc3QuXG4gICAgICovXG4gICAgcmV0dXJuIHJlc3VsdHMuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgcmV0dXJuIGIuc2NvcmUgLSBhLnNjb3JlO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQcmVwYXJlcyB0aGUgaW5kZXggZm9yIEpTT04gc2VyaWFsaXphdGlvbi5cbiAgICpcbiAgICogVGhlIHNjaGVtYSBmb3IgdGhpcyBKU09OIGJsb2Igd2lsbCBiZSBkZXNjcmliZWQgaW4gYVxuICAgKiBzZXBhcmF0ZSBKU09OIHNjaGVtYSBmaWxlLlxuICAgKlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgbHVuci5JbmRleC5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBpbnZlcnRlZEluZGV4ID0gT2JqZWN0LmtleXModGhpcy5pbnZlcnRlZEluZGV4KVxuICAgICAgLnNvcnQoKVxuICAgICAgLm1hcChmdW5jdGlvbiAodGVybSkge1xuICAgICAgICByZXR1cm4gW3Rlcm0sIHRoaXMuaW52ZXJ0ZWRJbmRleFt0ZXJtXV07XG4gICAgICB9LCB0aGlzKTtcblxuICAgIHZhciBmaWVsZFZlY3RvcnMgPSBPYmplY3Qua2V5cyh0aGlzLmZpZWxkVmVjdG9ycykubWFwKGZ1bmN0aW9uIChyZWYpIHtcbiAgICAgIHJldHVybiBbcmVmLCB0aGlzLmZpZWxkVmVjdG9yc1tyZWZdLnRvSlNPTigpXTtcbiAgICB9LCB0aGlzKTtcblxuICAgIHJldHVybiB7XG4gICAgICB2ZXJzaW9uOiBsdW5yLnZlcnNpb24sXG4gICAgICBmaWVsZHM6IHRoaXMuZmllbGRzLFxuICAgICAgZmllbGRWZWN0b3JzOiBmaWVsZFZlY3RvcnMsXG4gICAgICBpbnZlcnRlZEluZGV4OiBpbnZlcnRlZEluZGV4LFxuICAgICAgcGlwZWxpbmU6IHRoaXMucGlwZWxpbmUudG9KU09OKCksXG4gICAgfTtcbiAgfTtcblxuICAvKipcbiAgICogTG9hZHMgYSBwcmV2aW91c2x5IHNlcmlhbGl6ZWQgbHVuci5JbmRleFxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gc2VyaWFsaXplZEluZGV4IC0gQSBwcmV2aW91c2x5IHNlcmlhbGl6ZWQgbHVuci5JbmRleFxuICAgKiBAcmV0dXJucyB7bHVuci5JbmRleH1cbiAgICovXG4gIGx1bnIuSW5kZXgubG9hZCA9IGZ1bmN0aW9uIChzZXJpYWxpemVkSW5kZXgpIHtcbiAgICB2YXIgYXR0cnMgPSB7fSxcbiAgICAgIGZpZWxkVmVjdG9ycyA9IHt9LFxuICAgICAgc2VyaWFsaXplZFZlY3RvcnMgPSBzZXJpYWxpemVkSW5kZXguZmllbGRWZWN0b3JzLFxuICAgICAgaW52ZXJ0ZWRJbmRleCA9IE9iamVjdC5jcmVhdGUobnVsbCksXG4gICAgICBzZXJpYWxpemVkSW52ZXJ0ZWRJbmRleCA9IHNlcmlhbGl6ZWRJbmRleC5pbnZlcnRlZEluZGV4LFxuICAgICAgdG9rZW5TZXRCdWlsZGVyID0gbmV3IGx1bnIuVG9rZW5TZXQuQnVpbGRlcigpLFxuICAgICAgcGlwZWxpbmUgPSBsdW5yLlBpcGVsaW5lLmxvYWQoc2VyaWFsaXplZEluZGV4LnBpcGVsaW5lKTtcblxuICAgIGlmIChzZXJpYWxpemVkSW5kZXgudmVyc2lvbiAhPSBsdW5yLnZlcnNpb24pIHtcbiAgICAgIGx1bnIudXRpbHMud2FybihcbiAgICAgICAgXCJWZXJzaW9uIG1pc21hdGNoIHdoZW4gbG9hZGluZyBzZXJpYWxpc2VkIGluZGV4LiBDdXJyZW50IHZlcnNpb24gb2YgbHVuciAnXCIgK1xuICAgICAgICAgIGx1bnIudmVyc2lvbiArXG4gICAgICAgICAgXCInIGRvZXMgbm90IG1hdGNoIHNlcmlhbGl6ZWQgaW5kZXggJ1wiICtcbiAgICAgICAgICBzZXJpYWxpemVkSW5kZXgudmVyc2lvbiArXG4gICAgICAgICAgXCInXCJcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXJpYWxpemVkVmVjdG9ycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHR1cGxlID0gc2VyaWFsaXplZFZlY3RvcnNbaV0sXG4gICAgICAgIHJlZiA9IHR1cGxlWzBdLFxuICAgICAgICBlbGVtZW50cyA9IHR1cGxlWzFdO1xuXG4gICAgICBmaWVsZFZlY3RvcnNbcmVmXSA9IG5ldyBsdW5yLlZlY3RvcihlbGVtZW50cyk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXJpYWxpemVkSW52ZXJ0ZWRJbmRleC5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHR1cGxlID0gc2VyaWFsaXplZEludmVydGVkSW5kZXhbaV0sXG4gICAgICAgIHRlcm0gPSB0dXBsZVswXSxcbiAgICAgICAgcG9zdGluZyA9IHR1cGxlWzFdO1xuXG4gICAgICB0b2tlblNldEJ1aWxkZXIuaW5zZXJ0KHRlcm0pO1xuICAgICAgaW52ZXJ0ZWRJbmRleFt0ZXJtXSA9IHBvc3Rpbmc7XG4gICAgfVxuXG4gICAgdG9rZW5TZXRCdWlsZGVyLmZpbmlzaCgpO1xuXG4gICAgYXR0cnMuZmllbGRzID0gc2VyaWFsaXplZEluZGV4LmZpZWxkcztcblxuICAgIGF0dHJzLmZpZWxkVmVjdG9ycyA9IGZpZWxkVmVjdG9ycztcbiAgICBhdHRycy5pbnZlcnRlZEluZGV4ID0gaW52ZXJ0ZWRJbmRleDtcbiAgICBhdHRycy50b2tlblNldCA9IHRva2VuU2V0QnVpbGRlci5yb290O1xuICAgIGF0dHJzLnBpcGVsaW5lID0gcGlwZWxpbmU7XG5cbiAgICByZXR1cm4gbmV3IGx1bnIuSW5kZXgoYXR0cnMpO1xuICB9O1xuICAvKiFcbiAgICogbHVuci5CdWlsZGVyXG4gICAqIENvcHlyaWdodCAoQykgMjAyMCBPbGl2ZXIgTmlnaHRpbmdhbGVcbiAgICovXG5cbiAgLyoqXG4gICAqIGx1bnIuQnVpbGRlciBwZXJmb3JtcyBpbmRleGluZyBvbiBhIHNldCBvZiBkb2N1bWVudHMgYW5kXG4gICAqIHJldHVybnMgaW5zdGFuY2VzIG9mIGx1bnIuSW5kZXggcmVhZHkgZm9yIHF1ZXJ5aW5nLlxuICAgKlxuICAgKiBBbGwgY29uZmlndXJhdGlvbiBvZiB0aGUgaW5kZXggaXMgZG9uZSB2aWEgdGhlIGJ1aWxkZXIsIHRoZVxuICAgKiBmaWVsZHMgdG8gaW5kZXgsIHRoZSBkb2N1bWVudCByZWZlcmVuY2UsIHRoZSB0ZXh0IHByb2Nlc3NpbmdcbiAgICogcGlwZWxpbmUgYW5kIGRvY3VtZW50IHNjb3JpbmcgcGFyYW1ldGVycyBhcmUgYWxsIHNldCBvbiB0aGVcbiAgICogYnVpbGRlciBiZWZvcmUgaW5kZXhpbmcuXG4gICAqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gX3JlZiAtIEludGVybmFsIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgcmVmZXJlbmNlIGZpZWxkLlxuICAgKiBAcHJvcGVydHkge3N0cmluZ1tdfSBfZmllbGRzIC0gSW50ZXJuYWwgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCBmaWVsZHMgdG8gaW5kZXguXG4gICAqIEBwcm9wZXJ0eSB7b2JqZWN0fSBpbnZlcnRlZEluZGV4IC0gVGhlIGludmVydGVkIGluZGV4IG1hcHMgdGVybXMgdG8gZG9jdW1lbnQgZmllbGRzLlxuICAgKiBAcHJvcGVydHkge29iamVjdH0gZG9jdW1lbnRUZXJtRnJlcXVlbmNpZXMgLSBLZWVwcyB0cmFjayBvZiBkb2N1bWVudCB0ZXJtIGZyZXF1ZW5jaWVzLlxuICAgKiBAcHJvcGVydHkge29iamVjdH0gZG9jdW1lbnRMZW5ndGhzIC0gS2VlcHMgdHJhY2sgb2YgdGhlIGxlbmd0aCBvZiBkb2N1bWVudHMgYWRkZWQgdG8gdGhlIGluZGV4LlxuICAgKiBAcHJvcGVydHkge2x1bnIudG9rZW5pemVyfSB0b2tlbml6ZXIgLSBGdW5jdGlvbiBmb3Igc3BsaXR0aW5nIHN0cmluZ3MgaW50byB0b2tlbnMgZm9yIGluZGV4aW5nLlxuICAgKiBAcHJvcGVydHkge2x1bnIuUGlwZWxpbmV9IHBpcGVsaW5lIC0gVGhlIHBpcGVsaW5lIHBlcmZvcm1zIHRleHQgcHJvY2Vzc2luZyBvbiB0b2tlbnMgYmVmb3JlIGluZGV4aW5nLlxuICAgKiBAcHJvcGVydHkge2x1bnIuUGlwZWxpbmV9IHNlYXJjaFBpcGVsaW5lIC0gQSBwaXBlbGluZSBmb3IgcHJvY2Vzc2luZyBzZWFyY2ggdGVybXMgYmVmb3JlIHF1ZXJ5aW5nIHRoZSBpbmRleC5cbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IGRvY3VtZW50Q291bnQgLSBLZWVwcyB0cmFjayBvZiB0aGUgdG90YWwgbnVtYmVyIG9mIGRvY3VtZW50cyBpbmRleGVkLlxuICAgKiBAcHJvcGVydHkge251bWJlcn0gX2IgLSBBIHBhcmFtZXRlciB0byBjb250cm9sIGZpZWxkIGxlbmd0aCBub3JtYWxpemF0aW9uLCBzZXR0aW5nIHRoaXMgdG8gMCBkaXNhYmxlZCBub3JtYWxpemF0aW9uLCAxIGZ1bGx5IG5vcm1hbGl6ZXMgZmllbGQgbGVuZ3RocywgdGhlIGRlZmF1bHQgdmFsdWUgaXMgMC43NS5cbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IF9rMSAtIEEgcGFyYW1ldGVyIHRvIGNvbnRyb2wgaG93IHF1aWNrbHkgYW4gaW5jcmVhc2UgaW4gdGVybSBmcmVxdWVuY3kgcmVzdWx0cyBpbiB0ZXJtIGZyZXF1ZW5jeSBzYXR1cmF0aW9uLCB0aGUgZGVmYXVsdCB2YWx1ZSBpcyAxLjIuXG4gICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0ZXJtSW5kZXggLSBBIGNvdW50ZXIgaW5jcmVtZW50ZWQgZm9yIGVhY2ggdW5pcXVlIHRlcm0sIHVzZWQgdG8gaWRlbnRpZnkgYSB0ZXJtcyBwb3NpdGlvbiBpbiB0aGUgdmVjdG9yIHNwYWNlLlxuICAgKiBAcHJvcGVydHkge2FycmF5fSBtZXRhZGF0YVdoaXRlbGlzdCAtIEEgbGlzdCBvZiBtZXRhZGF0YSBrZXlzIHRoYXQgaGF2ZSBiZWVuIHdoaXRlbGlzdGVkIGZvciBlbnRyeSBpbiB0aGUgaW5kZXguXG4gICAqL1xuICBsdW5yLkJ1aWxkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fcmVmID0gXCJpZFwiO1xuICAgIHRoaXMuX2ZpZWxkcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5fZG9jdW1lbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLmludmVydGVkSW5kZXggPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMuZmllbGRUZXJtRnJlcXVlbmNpZXMgPSB7fTtcbiAgICB0aGlzLmZpZWxkTGVuZ3RocyA9IHt9O1xuICAgIHRoaXMudG9rZW5pemVyID0gbHVuci50b2tlbml6ZXI7XG4gICAgdGhpcy5waXBlbGluZSA9IG5ldyBsdW5yLlBpcGVsaW5lKCk7XG4gICAgdGhpcy5zZWFyY2hQaXBlbGluZSA9IG5ldyBsdW5yLlBpcGVsaW5lKCk7XG4gICAgdGhpcy5kb2N1bWVudENvdW50ID0gMDtcbiAgICB0aGlzLl9iID0gMC43NTtcbiAgICB0aGlzLl9rMSA9IDEuMjtcbiAgICB0aGlzLnRlcm1JbmRleCA9IDA7XG4gICAgdGhpcy5tZXRhZGF0YVdoaXRlbGlzdCA9IFtdO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBkb2N1bWVudCBmaWVsZCB1c2VkIGFzIHRoZSBkb2N1bWVudCByZWZlcmVuY2UuIEV2ZXJ5IGRvY3VtZW50IG11c3QgaGF2ZSB0aGlzIGZpZWxkLlxuICAgKiBUaGUgdHlwZSBvZiB0aGlzIGZpZWxkIGluIHRoZSBkb2N1bWVudCBzaG91bGQgYmUgYSBzdHJpbmcsIGlmIGl0IGlzIG5vdCBhIHN0cmluZyBpdCB3aWxsIGJlXG4gICAqIGNvZXJjZWQgaW50byBhIHN0cmluZyBieSBjYWxsaW5nIHRvU3RyaW5nLlxuICAgKlxuICAgKiBUaGUgZGVmYXVsdCByZWYgaXMgJ2lkJy5cbiAgICpcbiAgICogVGhlIHJlZiBzaG91bGQgX25vdF8gYmUgY2hhbmdlZCBkdXJpbmcgaW5kZXhpbmcsIGl0IHNob3VsZCBiZSBzZXQgYmVmb3JlIGFueSBkb2N1bWVudHMgYXJlXG4gICAqIGFkZGVkIHRvIHRoZSBpbmRleC4gQ2hhbmdpbmcgaXQgZHVyaW5nIGluZGV4aW5nIGNhbiBsZWFkIHRvIGluY29uc2lzdGVudCByZXN1bHRzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVmIC0gVGhlIG5hbWUgb2YgdGhlIHJlZmVyZW5jZSBmaWVsZCBpbiB0aGUgZG9jdW1lbnQuXG4gICAqL1xuICBsdW5yLkJ1aWxkZXIucHJvdG90eXBlLnJlZiA9IGZ1bmN0aW9uIChyZWYpIHtcbiAgICB0aGlzLl9yZWYgPSByZWY7XG4gIH07XG5cbiAgLyoqXG4gICAqIEEgZnVuY3Rpb24gdGhhdCBpcyB1c2VkIHRvIGV4dHJhY3QgYSBmaWVsZCBmcm9tIGEgZG9jdW1lbnQuXG4gICAqXG4gICAqIEx1bnIgZXhwZWN0cyBhIGZpZWxkIHRvIGJlIGF0IHRoZSB0b3AgbGV2ZWwgb2YgYSBkb2N1bWVudCwgaWYgaG93ZXZlciB0aGUgZmllbGRcbiAgICogaXMgZGVlcGx5IG5lc3RlZCB3aXRoaW4gYSBkb2N1bWVudCBhbiBleHRyYWN0b3IgZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gZXh0cmFjdFxuICAgKiB0aGUgcmlnaHQgZmllbGQgZm9yIGluZGV4aW5nLlxuICAgKlxuICAgKiBAY2FsbGJhY2sgZmllbGRFeHRyYWN0b3JcbiAgICogQHBhcmFtIHtvYmplY3R9IGRvYyAtIFRoZSBkb2N1bWVudCBiZWluZyBhZGRlZCB0byB0aGUgaW5kZXguXG4gICAqIEByZXR1cm5zIHs/KHN0cmluZ3xvYmplY3R8b2JqZWN0W10pfSBvYmogLSBUaGUgb2JqZWN0IHRoYXQgd2lsbCBiZSBpbmRleGVkIGZvciB0aGlzIGZpZWxkLlxuICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FeHRyYWN0aW5nIGEgbmVzdGVkIGZpZWxkPC9jYXB0aW9uPlxuICAgKiBmdW5jdGlvbiAoZG9jKSB7IHJldHVybiBkb2MubmVzdGVkLmZpZWxkIH1cbiAgICovXG5cbiAgLyoqXG4gICAqIEFkZHMgYSBmaWVsZCB0byB0aGUgbGlzdCBvZiBkb2N1bWVudCBmaWVsZHMgdGhhdCB3aWxsIGJlIGluZGV4ZWQuIEV2ZXJ5IGRvY3VtZW50IGJlaW5nXG4gICAqIGluZGV4ZWQgc2hvdWxkIGhhdmUgdGhpcyBmaWVsZC4gTnVsbCB2YWx1ZXMgZm9yIHRoaXMgZmllbGQgaW4gaW5kZXhlZCBkb2N1bWVudHMgd2lsbFxuICAgKiBub3QgY2F1c2UgZXJyb3JzIGJ1dCB3aWxsIGxpbWl0IHRoZSBjaGFuY2Ugb2YgdGhhdCBkb2N1bWVudCBiZWluZyByZXRyaWV2ZWQgYnkgc2VhcmNoZXMuXG4gICAqXG4gICAqIEFsbCBmaWVsZHMgc2hvdWxkIGJlIGFkZGVkIGJlZm9yZSBhZGRpbmcgZG9jdW1lbnRzIHRvIHRoZSBpbmRleC4gQWRkaW5nIGZpZWxkcyBhZnRlclxuICAgKiBhIGRvY3VtZW50IGhhcyBiZWVuIGluZGV4ZWQgd2lsbCBoYXZlIG5vIGVmZmVjdCBvbiBhbHJlYWR5IGluZGV4ZWQgZG9jdW1lbnRzLlxuICAgKlxuICAgKiBGaWVsZHMgY2FuIGJlIGJvb3N0ZWQgYXQgYnVpbGQgdGltZS4gVGhpcyBhbGxvd3MgdGVybXMgd2l0aGluIHRoYXQgZmllbGQgdG8gaGF2ZSBtb3JlXG4gICAqIGltcG9ydGFuY2Ugd2hlbiByYW5raW5nIHNlYXJjaCByZXN1bHRzLiBVc2UgYSBmaWVsZCBib29zdCB0byBzcGVjaWZ5IHRoYXQgbWF0Y2hlcyB3aXRoaW5cbiAgICogb25lIGZpZWxkIGFyZSBtb3JlIGltcG9ydGFudCB0aGFuIG90aGVyIGZpZWxkcy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkTmFtZSAtIFRoZSBuYW1lIG9mIGEgZmllbGQgdG8gaW5kZXggaW4gYWxsIGRvY3VtZW50cy5cbiAgICogQHBhcmFtIHtvYmplY3R9IGF0dHJpYnV0ZXMgLSBPcHRpb25hbCBhdHRyaWJ1dGVzIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGZpZWxkLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW2F0dHJpYnV0ZXMuYm9vc3Q9MV0gLSBCb29zdCBhcHBsaWVkIHRvIGFsbCB0ZXJtcyB3aXRoaW4gdGhpcyBmaWVsZC5cbiAgICogQHBhcmFtIHtmaWVsZEV4dHJhY3Rvcn0gW2F0dHJpYnV0ZXMuZXh0cmFjdG9yXSAtIEZ1bmN0aW9uIHRvIGV4dHJhY3QgYSBmaWVsZCBmcm9tIGEgZG9jdW1lbnQuXG4gICAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IGZpZWxkTmFtZSBjYW5ub3QgY29udGFpbiB1bnN1cHBvcnRlZCBjaGFyYWN0ZXJzICcvJ1xuICAgKi9cbiAgbHVuci5CdWlsZGVyLnByb3RvdHlwZS5maWVsZCA9IGZ1bmN0aW9uIChmaWVsZE5hbWUsIGF0dHJpYnV0ZXMpIHtcbiAgICBpZiAoL1xcLy8udGVzdChmaWVsZE5hbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcbiAgICAgICAgXCJGaWVsZCAnXCIgKyBmaWVsZE5hbWUgKyBcIicgY29udGFpbnMgaWxsZWdhbCBjaGFyYWN0ZXIgJy8nXCJcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdGhpcy5fZmllbGRzW2ZpZWxkTmFtZV0gPSBhdHRyaWJ1dGVzIHx8IHt9O1xuICB9O1xuXG4gIC8qKlxuICAgKiBBIHBhcmFtZXRlciB0byB0dW5lIHRoZSBhbW91bnQgb2YgZmllbGQgbGVuZ3RoIG5vcm1hbGlzYXRpb24gdGhhdCBpcyBhcHBsaWVkIHdoZW5cbiAgICogY2FsY3VsYXRpbmcgcmVsZXZhbmNlIHNjb3Jlcy4gQSB2YWx1ZSBvZiAwIHdpbGwgY29tcGxldGVseSBkaXNhYmxlIGFueSBub3JtYWxpc2F0aW9uXG4gICAqIGFuZCBhIHZhbHVlIG9mIDEgd2lsbCBmdWxseSBub3JtYWxpc2UgZmllbGQgbGVuZ3Rocy4gVGhlIGRlZmF1bHQgaXMgMC43NS4gVmFsdWVzIG9mIGJcbiAgICogd2lsbCBiZSBjbGFtcGVkIHRvIHRoZSByYW5nZSAwIC0gMS5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IG51bWJlciAtIFRoZSB2YWx1ZSB0byBzZXQgZm9yIHRoaXMgdHVuaW5nIHBhcmFtZXRlci5cbiAgICovXG4gIGx1bnIuQnVpbGRlci5wcm90b3R5cGUuYiA9IGZ1bmN0aW9uIChudW1iZXIpIHtcbiAgICBpZiAobnVtYmVyIDwgMCkge1xuICAgICAgdGhpcy5fYiA9IDA7XG4gICAgfSBlbHNlIGlmIChudW1iZXIgPiAxKSB7XG4gICAgICB0aGlzLl9iID0gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYiA9IG51bWJlcjtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEEgcGFyYW1ldGVyIHRoYXQgY29udHJvbHMgdGhlIHNwZWVkIGF0IHdoaWNoIGEgcmlzZSBpbiB0ZXJtIGZyZXF1ZW5jeSByZXN1bHRzIGluIHRlcm1cbiAgICogZnJlcXVlbmN5IHNhdHVyYXRpb24uIFRoZSBkZWZhdWx0IHZhbHVlIGlzIDEuMi4gU2V0dGluZyB0aGlzIHRvIGEgaGlnaGVyIHZhbHVlIHdpbGwgZ2l2ZVxuICAgKiBzbG93ZXIgc2F0dXJhdGlvbiBsZXZlbHMsIGEgbG93ZXIgdmFsdWUgd2lsbCByZXN1bHQgaW4gcXVpY2tlciBzYXR1cmF0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gbnVtYmVyIC0gVGhlIHZhbHVlIHRvIHNldCBmb3IgdGhpcyB0dW5pbmcgcGFyYW1ldGVyLlxuICAgKi9cbiAgbHVuci5CdWlsZGVyLnByb3RvdHlwZS5rMSA9IGZ1bmN0aW9uIChudW1iZXIpIHtcbiAgICB0aGlzLl9rMSA9IG51bWJlcjtcbiAgfTtcblxuICAvKipcbiAgICogQWRkcyBhIGRvY3VtZW50IHRvIHRoZSBpbmRleC5cbiAgICpcbiAgICogQmVmb3JlIGFkZGluZyBmaWVsZHMgdG8gdGhlIGluZGV4IHRoZSBpbmRleCBzaG91bGQgaGF2ZSBiZWVuIGZ1bGx5IHNldHVwLCB3aXRoIHRoZSBkb2N1bWVudFxuICAgKiByZWYgYW5kIGFsbCBmaWVsZHMgdG8gaW5kZXggYWxyZWFkeSBoYXZpbmcgYmVlbiBzcGVjaWZpZWQuXG4gICAqXG4gICAqIFRoZSBkb2N1bWVudCBtdXN0IGhhdmUgYSBmaWVsZCBuYW1lIGFzIHNwZWNpZmllZCBieSB0aGUgcmVmIChieSBkZWZhdWx0IHRoaXMgaXMgJ2lkJykgYW5kXG4gICAqIGl0IHNob3VsZCBoYXZlIGFsbCBmaWVsZHMgZGVmaW5lZCBmb3IgaW5kZXhpbmcsIHRob3VnaCBudWxsIG9yIHVuZGVmaW5lZCB2YWx1ZXMgd2lsbCBub3RcbiAgICogY2F1c2UgZXJyb3JzLlxuICAgKlxuICAgKiBFbnRpcmUgZG9jdW1lbnRzIGNhbiBiZSBib29zdGVkIGF0IGJ1aWxkIHRpbWUuIEFwcGx5aW5nIGEgYm9vc3QgdG8gYSBkb2N1bWVudCBpbmRpY2F0ZXMgdGhhdFxuICAgKiB0aGlzIGRvY3VtZW50IHNob3VsZCByYW5rIGhpZ2hlciBpbiBzZWFyY2ggcmVzdWx0cyB0aGFuIG90aGVyIGRvY3VtZW50cy5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGRvYyAtIFRoZSBkb2N1bWVudCB0byBhZGQgdG8gdGhlIGluZGV4LlxuICAgKiBAcGFyYW0ge29iamVjdH0gYXR0cmlidXRlcyAtIE9wdGlvbmFsIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZG9jdW1lbnQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbYXR0cmlidXRlcy5ib29zdD0xXSAtIEJvb3N0IGFwcGxpZWQgdG8gYWxsIHRlcm1zIHdpdGhpbiB0aGlzIGRvY3VtZW50LlxuICAgKi9cbiAgbHVuci5CdWlsZGVyLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoZG9jLCBhdHRyaWJ1dGVzKSB7XG4gICAgdmFyIGRvY1JlZiA9IGRvY1t0aGlzLl9yZWZdLFxuICAgICAgZmllbGRzID0gT2JqZWN0LmtleXModGhpcy5fZmllbGRzKTtcblxuICAgIHRoaXMuX2RvY3VtZW50c1tkb2NSZWZdID0gYXR0cmlidXRlcyB8fCB7fTtcbiAgICB0aGlzLmRvY3VtZW50Q291bnQgKz0gMTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmllbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZmllbGROYW1lID0gZmllbGRzW2ldLFxuICAgICAgICBleHRyYWN0b3IgPSB0aGlzLl9maWVsZHNbZmllbGROYW1lXS5leHRyYWN0b3IsXG4gICAgICAgIGZpZWxkID0gZXh0cmFjdG9yID8gZXh0cmFjdG9yKGRvYykgOiBkb2NbZmllbGROYW1lXSxcbiAgICAgICAgdG9rZW5zID0gdGhpcy50b2tlbml6ZXIoZmllbGQsIHtcbiAgICAgICAgICBmaWVsZHM6IFtmaWVsZE5hbWVdLFxuICAgICAgICB9KSxcbiAgICAgICAgdGVybXMgPSB0aGlzLnBpcGVsaW5lLnJ1bih0b2tlbnMpLFxuICAgICAgICBmaWVsZFJlZiA9IG5ldyBsdW5yLkZpZWxkUmVmKGRvY1JlZiwgZmllbGROYW1lKSxcbiAgICAgICAgZmllbGRUZXJtcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgICAgIHRoaXMuZmllbGRUZXJtRnJlcXVlbmNpZXNbZmllbGRSZWZdID0gZmllbGRUZXJtcztcbiAgICAgIHRoaXMuZmllbGRMZW5ndGhzW2ZpZWxkUmVmXSA9IDA7XG5cbiAgICAgIC8vIHN0b3JlIHRoZSBsZW5ndGggb2YgdGhpcyBmaWVsZCBmb3IgdGhpcyBkb2N1bWVudFxuICAgICAgdGhpcy5maWVsZExlbmd0aHNbZmllbGRSZWZdICs9IHRlcm1zLmxlbmd0aDtcblxuICAgICAgLy8gY2FsY3VsYXRlIHRlcm0gZnJlcXVlbmNpZXMgZm9yIHRoaXMgZmllbGRcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGVybXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgdmFyIHRlcm0gPSB0ZXJtc1tqXTtcblxuICAgICAgICBpZiAoZmllbGRUZXJtc1t0ZXJtXSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBmaWVsZFRlcm1zW3Rlcm1dID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZpZWxkVGVybXNbdGVybV0gKz0gMTtcblxuICAgICAgICAvLyBhZGQgdG8gaW52ZXJ0ZWQgaW5kZXhcbiAgICAgICAgLy8gY3JlYXRlIGFuIGluaXRpYWwgcG9zdGluZyBpZiBvbmUgZG9lc24ndCBleGlzdFxuICAgICAgICBpZiAodGhpcy5pbnZlcnRlZEluZGV4W3Rlcm1dID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHZhciBwb3N0aW5nID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgICBwb3N0aW5nW1wiX2luZGV4XCJdID0gdGhpcy50ZXJtSW5kZXg7XG4gICAgICAgICAgdGhpcy50ZXJtSW5kZXggKz0gMTtcblxuICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZmllbGRzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICBwb3N0aW5nW2ZpZWxkc1trXV0gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuaW52ZXJ0ZWRJbmRleFt0ZXJtXSA9IHBvc3Rpbmc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhZGQgYW4gZW50cnkgZm9yIHRoaXMgdGVybS9maWVsZE5hbWUvZG9jUmVmIHRvIHRoZSBpbnZlcnRlZEluZGV4XG4gICAgICAgIGlmICh0aGlzLmludmVydGVkSW5kZXhbdGVybV1bZmllbGROYW1lXVtkb2NSZWZdID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMuaW52ZXJ0ZWRJbmRleFt0ZXJtXVtmaWVsZE5hbWVdW2RvY1JlZl0gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc3RvcmUgYWxsIHdoaXRlbGlzdGVkIG1ldGFkYXRhIGFib3V0IHRoaXMgdG9rZW4gaW4gdGhlXG4gICAgICAgIC8vIGludmVydGVkIGluZGV4XG4gICAgICAgIGZvciAodmFyIGwgPSAwOyBsIDwgdGhpcy5tZXRhZGF0YVdoaXRlbGlzdC5sZW5ndGg7IGwrKykge1xuICAgICAgICAgIHZhciBtZXRhZGF0YUtleSA9IHRoaXMubWV0YWRhdGFXaGl0ZWxpc3RbbF0sXG4gICAgICAgICAgICBtZXRhZGF0YSA9IHRlcm0ubWV0YWRhdGFbbWV0YWRhdGFLZXldO1xuXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbnZlcnRlZEluZGV4W3Rlcm1dW2ZpZWxkTmFtZV1bZG9jUmVmXVttZXRhZGF0YUtleV0gPT1cbiAgICAgICAgICAgIHVuZGVmaW5lZFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5pbnZlcnRlZEluZGV4W3Rlcm1dW2ZpZWxkTmFtZV1bZG9jUmVmXVttZXRhZGF0YUtleV0gPSBbXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLmludmVydGVkSW5kZXhbdGVybV1bZmllbGROYW1lXVtkb2NSZWZdW21ldGFkYXRhS2V5XS5wdXNoKFxuICAgICAgICAgICAgbWV0YWRhdGFcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGVzIHRoZSBhdmVyYWdlIGRvY3VtZW50IGxlbmd0aCBmb3IgdGhpcyBpbmRleFxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgbHVuci5CdWlsZGVyLnByb3RvdHlwZS5jYWxjdWxhdGVBdmVyYWdlRmllbGRMZW5ndGhzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBmaWVsZFJlZnMgPSBPYmplY3Qua2V5cyh0aGlzLmZpZWxkTGVuZ3RocyksXG4gICAgICBudW1iZXJPZkZpZWxkcyA9IGZpZWxkUmVmcy5sZW5ndGgsXG4gICAgICBhY2N1bXVsYXRvciA9IHt9LFxuICAgICAgZG9jdW1lbnRzV2l0aEZpZWxkID0ge307XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bWJlck9mRmllbGRzOyBpKyspIHtcbiAgICAgIHZhciBmaWVsZFJlZiA9IGx1bnIuRmllbGRSZWYuZnJvbVN0cmluZyhmaWVsZFJlZnNbaV0pLFxuICAgICAgICBmaWVsZCA9IGZpZWxkUmVmLmZpZWxkTmFtZTtcblxuICAgICAgZG9jdW1lbnRzV2l0aEZpZWxkW2ZpZWxkXSB8fCAoZG9jdW1lbnRzV2l0aEZpZWxkW2ZpZWxkXSA9IDApO1xuICAgICAgZG9jdW1lbnRzV2l0aEZpZWxkW2ZpZWxkXSArPSAxO1xuXG4gICAgICBhY2N1bXVsYXRvcltmaWVsZF0gfHwgKGFjY3VtdWxhdG9yW2ZpZWxkXSA9IDApO1xuICAgICAgYWNjdW11bGF0b3JbZmllbGRdICs9IHRoaXMuZmllbGRMZW5ndGhzW2ZpZWxkUmVmXTtcbiAgICB9XG5cbiAgICB2YXIgZmllbGRzID0gT2JqZWN0LmtleXModGhpcy5fZmllbGRzKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmllbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZmllbGROYW1lID0gZmllbGRzW2ldO1xuICAgICAgYWNjdW11bGF0b3JbZmllbGROYW1lXSA9XG4gICAgICAgIGFjY3VtdWxhdG9yW2ZpZWxkTmFtZV0gLyBkb2N1bWVudHNXaXRoRmllbGRbZmllbGROYW1lXTtcbiAgICB9XG5cbiAgICB0aGlzLmF2ZXJhZ2VGaWVsZExlbmd0aCA9IGFjY3VtdWxhdG9yO1xuICB9O1xuXG4gIC8qKlxuICAgKiBCdWlsZHMgYSB2ZWN0b3Igc3BhY2UgbW9kZWwgb2YgZXZlcnkgZG9jdW1lbnQgdXNpbmcgbHVuci5WZWN0b3JcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGx1bnIuQnVpbGRlci5wcm90b3R5cGUuY3JlYXRlRmllbGRWZWN0b3JzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBmaWVsZFZlY3RvcnMgPSB7fSxcbiAgICAgIGZpZWxkUmVmcyA9IE9iamVjdC5rZXlzKHRoaXMuZmllbGRUZXJtRnJlcXVlbmNpZXMpLFxuICAgICAgZmllbGRSZWZzTGVuZ3RoID0gZmllbGRSZWZzLmxlbmd0aCxcbiAgICAgIHRlcm1JZGZDYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpZWxkUmVmc0xlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZmllbGRSZWYgPSBsdW5yLkZpZWxkUmVmLmZyb21TdHJpbmcoZmllbGRSZWZzW2ldKSxcbiAgICAgICAgZmllbGROYW1lID0gZmllbGRSZWYuZmllbGROYW1lLFxuICAgICAgICBmaWVsZExlbmd0aCA9IHRoaXMuZmllbGRMZW5ndGhzW2ZpZWxkUmVmXSxcbiAgICAgICAgZmllbGRWZWN0b3IgPSBuZXcgbHVuci5WZWN0b3IoKSxcbiAgICAgICAgdGVybUZyZXF1ZW5jaWVzID0gdGhpcy5maWVsZFRlcm1GcmVxdWVuY2llc1tmaWVsZFJlZl0sXG4gICAgICAgIHRlcm1zID0gT2JqZWN0LmtleXModGVybUZyZXF1ZW5jaWVzKSxcbiAgICAgICAgdGVybXNMZW5ndGggPSB0ZXJtcy5sZW5ndGg7XG5cbiAgICAgIHZhciBmaWVsZEJvb3N0ID0gdGhpcy5fZmllbGRzW2ZpZWxkTmFtZV0uYm9vc3QgfHwgMSxcbiAgICAgICAgZG9jQm9vc3QgPSB0aGlzLl9kb2N1bWVudHNbZmllbGRSZWYuZG9jUmVmXS5ib29zdCB8fCAxO1xuXG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRlcm1zTGVuZ3RoOyBqKyspIHtcbiAgICAgICAgdmFyIHRlcm0gPSB0ZXJtc1tqXSxcbiAgICAgICAgICB0ZiA9IHRlcm1GcmVxdWVuY2llc1t0ZXJtXSxcbiAgICAgICAgICB0ZXJtSW5kZXggPSB0aGlzLmludmVydGVkSW5kZXhbdGVybV0uX2luZGV4LFxuICAgICAgICAgIGlkZixcbiAgICAgICAgICBzY29yZSxcbiAgICAgICAgICBzY29yZVdpdGhQcmVjaXNpb247XG5cbiAgICAgICAgaWYgKHRlcm1JZGZDYWNoZVt0ZXJtXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWRmID0gbHVuci5pZGYodGhpcy5pbnZlcnRlZEluZGV4W3Rlcm1dLCB0aGlzLmRvY3VtZW50Q291bnQpO1xuICAgICAgICAgIHRlcm1JZGZDYWNoZVt0ZXJtXSA9IGlkZjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZGYgPSB0ZXJtSWRmQ2FjaGVbdGVybV07XG4gICAgICAgIH1cblxuICAgICAgICBzY29yZSA9XG4gICAgICAgICAgKGlkZiAqICgodGhpcy5fazEgKyAxKSAqIHRmKSkgL1xuICAgICAgICAgICh0aGlzLl9rMSAqXG4gICAgICAgICAgICAoMSAtXG4gICAgICAgICAgICAgIHRoaXMuX2IgK1xuICAgICAgICAgICAgICB0aGlzLl9iICogKGZpZWxkTGVuZ3RoIC8gdGhpcy5hdmVyYWdlRmllbGRMZW5ndGhbZmllbGROYW1lXSkpICtcbiAgICAgICAgICAgIHRmKTtcbiAgICAgICAgc2NvcmUgKj0gZmllbGRCb29zdDtcbiAgICAgICAgc2NvcmUgKj0gZG9jQm9vc3Q7XG4gICAgICAgIHNjb3JlV2l0aFByZWNpc2lvbiA9IE1hdGgucm91bmQoc2NvcmUgKiAxMDAwKSAvIDEwMDA7XG4gICAgICAgIC8vIENvbnZlcnRzIDEuMjM0NTY3ODkgdG8gMS4yMzQuXG4gICAgICAgIC8vIFJlZHVjaW5nIHRoZSBwcmVjaXNpb24gc28gdGhhdCB0aGUgdmVjdG9ycyB0YWtlIHVwIGxlc3NcbiAgICAgICAgLy8gc3BhY2Ugd2hlbiBzZXJpYWxpc2VkLiBEb2luZyBpdCBub3cgc28gdGhhdCB0aGV5IGJlaGF2ZVxuICAgICAgICAvLyB0aGUgc2FtZSBiZWZvcmUgYW5kIGFmdGVyIHNlcmlhbGlzYXRpb24uIEFsc28sIHRoaXMgaXNcbiAgICAgICAgLy8gdGhlIGZhc3Rlc3QgYXBwcm9hY2ggdG8gcmVkdWNpbmcgYSBudW1iZXIncyBwcmVjaXNpb24gaW5cbiAgICAgICAgLy8gSmF2YVNjcmlwdC5cblxuICAgICAgICBmaWVsZFZlY3Rvci5pbnNlcnQodGVybUluZGV4LCBzY29yZVdpdGhQcmVjaXNpb24pO1xuICAgICAgfVxuXG4gICAgICBmaWVsZFZlY3RvcnNbZmllbGRSZWZdID0gZmllbGRWZWN0b3I7XG4gICAgfVxuXG4gICAgdGhpcy5maWVsZFZlY3RvcnMgPSBmaWVsZFZlY3RvcnM7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSB0b2tlbiBzZXQgb2YgYWxsIHRva2VucyBpbiB0aGUgaW5kZXggdXNpbmcgbHVuci5Ub2tlblNldFxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgbHVuci5CdWlsZGVyLnByb3RvdHlwZS5jcmVhdGVUb2tlblNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnRva2VuU2V0ID0gbHVuci5Ub2tlblNldC5mcm9tQXJyYXkoXG4gICAgICBPYmplY3Qua2V5cyh0aGlzLmludmVydGVkSW5kZXgpLnNvcnQoKVxuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEJ1aWxkcyB0aGUgaW5kZXgsIGNyZWF0aW5nIGFuIGluc3RhbmNlIG9mIGx1bnIuSW5kZXguXG4gICAqXG4gICAqIFRoaXMgY29tcGxldGVzIHRoZSBpbmRleGluZyBwcm9jZXNzIGFuZCBzaG91bGQgb25seSBiZSBjYWxsZWRcbiAgICogb25jZSBhbGwgZG9jdW1lbnRzIGhhdmUgYmVlbiBhZGRlZCB0byB0aGUgaW5kZXguXG4gICAqXG4gICAqIEByZXR1cm5zIHtsdW5yLkluZGV4fVxuICAgKi9cbiAgbHVuci5CdWlsZGVyLnByb3RvdHlwZS5idWlsZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmNhbGN1bGF0ZUF2ZXJhZ2VGaWVsZExlbmd0aHMoKTtcbiAgICB0aGlzLmNyZWF0ZUZpZWxkVmVjdG9ycygpO1xuICAgIHRoaXMuY3JlYXRlVG9rZW5TZXQoKTtcblxuICAgIHJldHVybiBuZXcgbHVuci5JbmRleCh7XG4gICAgICBpbnZlcnRlZEluZGV4OiB0aGlzLmludmVydGVkSW5kZXgsXG4gICAgICBmaWVsZFZlY3RvcnM6IHRoaXMuZmllbGRWZWN0b3JzLFxuICAgICAgdG9rZW5TZXQ6IHRoaXMudG9rZW5TZXQsXG4gICAgICBmaWVsZHM6IE9iamVjdC5rZXlzKHRoaXMuX2ZpZWxkcyksXG4gICAgICBwaXBlbGluZTogdGhpcy5zZWFyY2hQaXBlbGluZSxcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogQXBwbGllcyBhIHBsdWdpbiB0byB0aGUgaW5kZXggYnVpbGRlci5cbiAgICpcbiAgICogQSBwbHVnaW4gaXMgYSBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aXRoIHRoZSBpbmRleCBidWlsZGVyIGFzIGl0cyBjb250ZXh0LlxuICAgKiBQbHVnaW5zIGNhbiBiZSB1c2VkIHRvIGN1c3RvbWlzZSBvciBleHRlbmQgdGhlIGJlaGF2aW91ciBvZiB0aGUgaW5kZXhcbiAgICogaW4gc29tZSB3YXkuIEEgcGx1Z2luIGlzIGp1c3QgYSBmdW5jdGlvbiwgdGhhdCBlbmNhcHN1bGF0ZWQgdGhlIGN1c3RvbVxuICAgKiBiZWhhdmlvdXIgdGhhdCBzaG91bGQgYmUgYXBwbGllZCB3aGVuIGJ1aWxkaW5nIHRoZSBpbmRleC5cbiAgICpcbiAgICogVGhlIHBsdWdpbiBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZSBpbmRleCBidWlsZGVyIGFzIGl0cyBhcmd1bWVudCwgYWRkaXRpb25hbFxuICAgKiBhcmd1bWVudHMgY2FuIGFsc28gYmUgcGFzc2VkIHdoZW4gY2FsbGluZyB1c2UuIFRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZFxuICAgKiB3aXRoIHRoZSBpbmRleCBidWlsZGVyIGFzIGl0cyBjb250ZXh0LlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwbHVnaW4gVGhlIHBsdWdpbiB0byBhcHBseS5cbiAgICovXG4gIGx1bnIuQnVpbGRlci5wcm90b3R5cGUudXNlID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgIGFyZ3MudW5zaGlmdCh0aGlzKTtcbiAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfTtcbiAgLyoqXG4gICAqIENvbnRhaW5zIGFuZCBjb2xsZWN0cyBtZXRhZGF0YSBhYm91dCBhIG1hdGNoaW5nIGRvY3VtZW50LlxuICAgKiBBIHNpbmdsZSBpbnN0YW5jZSBvZiBsdW5yLk1hdGNoRGF0YSBpcyByZXR1cm5lZCBhcyBwYXJ0IG9mIGV2ZXJ5XG4gICAqIGx1bnIuSW5kZXh+UmVzdWx0LlxuICAgKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRlcm0gLSBUaGUgdGVybSB0aGlzIG1hdGNoIGRhdGEgaXMgYXNzb2NpYXRlZCB3aXRoXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmaWVsZCAtIFRoZSBmaWVsZCBpbiB3aGljaCB0aGUgdGVybSB3YXMgZm91bmRcbiAgICogQHBhcmFtIHtvYmplY3R9IG1ldGFkYXRhIC0gVGhlIG1ldGFkYXRhIHJlY29yZGVkIGFib3V0IHRoaXMgdGVybSBpbiB0aGlzIGZpZWxkXG4gICAqIEBwcm9wZXJ0eSB7b2JqZWN0fSBtZXRhZGF0YSAtIEEgY2xvbmVkIGNvbGxlY3Rpb24gb2YgbWV0YWRhdGEgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZG9jdW1lbnQuXG4gICAqIEBzZWUge0BsaW5rIGx1bnIuSW5kZXh+UmVzdWx0fVxuICAgKi9cbiAgbHVuci5NYXRjaERhdGEgPSBmdW5jdGlvbiAodGVybSwgZmllbGQsIG1ldGFkYXRhKSB7XG4gICAgdmFyIGNsb25lZE1ldGFkYXRhID0gT2JqZWN0LmNyZWF0ZShudWxsKSxcbiAgICAgIG1ldGFkYXRhS2V5cyA9IE9iamVjdC5rZXlzKG1ldGFkYXRhIHx8IHt9KTtcblxuICAgIC8vIENsb25pbmcgdGhlIG1ldGFkYXRhIHRvIHByZXZlbnQgdGhlIG9yaWdpbmFsXG4gICAgLy8gYmVpbmcgbXV0YXRlZCBkdXJpbmcgbWF0Y2ggZGF0YSBjb21iaW5hdGlvbi5cbiAgICAvLyBNZXRhZGF0YSBpcyBrZXB0IGluIGFuIGFycmF5IHdpdGhpbiB0aGUgaW52ZXJ0ZWRcbiAgICAvLyBpbmRleCBzbyBjbG9uaW5nIHRoZSBkYXRhIGNhbiBiZSBkb25lIHdpdGhcbiAgICAvLyBBcnJheSNzbGljZVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWV0YWRhdGFLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIga2V5ID0gbWV0YWRhdGFLZXlzW2ldO1xuICAgICAgY2xvbmVkTWV0YWRhdGFba2V5XSA9IG1ldGFkYXRhW2tleV0uc2xpY2UoKTtcbiAgICB9XG5cbiAgICB0aGlzLm1ldGFkYXRhID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAgIGlmICh0ZXJtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMubWV0YWRhdGFbdGVybV0gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgdGhpcy5tZXRhZGF0YVt0ZXJtXVtmaWVsZF0gPSBjbG9uZWRNZXRhZGF0YTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEFuIGluc3RhbmNlIG9mIGx1bnIuTWF0Y2hEYXRhIHdpbGwgYmUgY3JlYXRlZCBmb3IgZXZlcnkgdGVybSB0aGF0IG1hdGNoZXMgYVxuICAgKiBkb2N1bWVudC4gSG93ZXZlciBvbmx5IG9uZSBpbnN0YW5jZSBpcyByZXF1aXJlZCBpbiBhIGx1bnIuSW5kZXh+UmVzdWx0LiBUaGlzXG4gICAqIG1ldGhvZCBjb21iaW5lcyBtZXRhZGF0YSBmcm9tIGFub3RoZXIgaW5zdGFuY2Ugb2YgbHVuci5NYXRjaERhdGEgd2l0aCB0aGlzXG4gICAqIG9iamVjdHMgbWV0YWRhdGEuXG4gICAqXG4gICAqIEBwYXJhbSB7bHVuci5NYXRjaERhdGF9IG90aGVyTWF0Y2hEYXRhIC0gQW5vdGhlciBpbnN0YW5jZSBvZiBtYXRjaCBkYXRhIHRvIG1lcmdlIHdpdGggdGhpcyBvbmUuXG4gICAqIEBzZWUge0BsaW5rIGx1bnIuSW5kZXh+UmVzdWx0fVxuICAgKi9cbiAgbHVuci5NYXRjaERhdGEucHJvdG90eXBlLmNvbWJpbmUgPSBmdW5jdGlvbiAob3RoZXJNYXRjaERhdGEpIHtcbiAgICB2YXIgdGVybXMgPSBPYmplY3Qua2V5cyhvdGhlck1hdGNoRGF0YS5tZXRhZGF0YSk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlcm1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdGVybSA9IHRlcm1zW2ldLFxuICAgICAgICBmaWVsZHMgPSBPYmplY3Qua2V5cyhvdGhlck1hdGNoRGF0YS5tZXRhZGF0YVt0ZXJtXSk7XG5cbiAgICAgIGlmICh0aGlzLm1ldGFkYXRhW3Rlcm1dID09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLm1ldGFkYXRhW3Rlcm1dID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBmaWVsZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgdmFyIGZpZWxkID0gZmllbGRzW2pdLFxuICAgICAgICAgIGtleXMgPSBPYmplY3Qua2V5cyhvdGhlck1hdGNoRGF0YS5tZXRhZGF0YVt0ZXJtXVtmaWVsZF0pO1xuXG4gICAgICAgIGlmICh0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGtleXMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICB2YXIga2V5ID0ga2V5c1trXTtcblxuICAgICAgICAgIGlmICh0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXVtrZXldID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5tZXRhZGF0YVt0ZXJtXVtmaWVsZF1ba2V5XSA9XG4gICAgICAgICAgICAgIG90aGVyTWF0Y2hEYXRhLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXVtrZXldO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXVtrZXldID0gdGhpcy5tZXRhZGF0YVt0ZXJtXVtmaWVsZF1bXG4gICAgICAgICAgICAgIGtleVxuICAgICAgICAgICAgXS5jb25jYXQob3RoZXJNYXRjaERhdGEubWV0YWRhdGFbdGVybV1bZmllbGRdW2tleV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQWRkIG1ldGFkYXRhIGZvciBhIHRlcm0vZmllbGQgcGFpciB0byB0aGlzIGluc3RhbmNlIG9mIG1hdGNoIGRhdGEuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXJtIC0gVGhlIHRlcm0gdGhpcyBtYXRjaCBkYXRhIGlzIGFzc29jaWF0ZWQgd2l0aFxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmllbGQgLSBUaGUgZmllbGQgaW4gd2hpY2ggdGhlIHRlcm0gd2FzIGZvdW5kXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBtZXRhZGF0YSAtIFRoZSBtZXRhZGF0YSByZWNvcmRlZCBhYm91dCB0aGlzIHRlcm0gaW4gdGhpcyBmaWVsZFxuICAgKi9cbiAgbHVuci5NYXRjaERhdGEucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh0ZXJtLCBmaWVsZCwgbWV0YWRhdGEpIHtcbiAgICBpZiAoISh0ZXJtIGluIHRoaXMubWV0YWRhdGEpKSB7XG4gICAgICB0aGlzLm1ldGFkYXRhW3Rlcm1dID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgIHRoaXMubWV0YWRhdGFbdGVybV1bZmllbGRdID0gbWV0YWRhdGE7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCEoZmllbGQgaW4gdGhpcy5tZXRhZGF0YVt0ZXJtXSkpIHtcbiAgICAgIHRoaXMubWV0YWRhdGFbdGVybV1bZmllbGRdID0gbWV0YWRhdGE7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG1ldGFkYXRhS2V5cyA9IE9iamVjdC5rZXlzKG1ldGFkYXRhKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWV0YWRhdGFLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIga2V5ID0gbWV0YWRhdGFLZXlzW2ldO1xuXG4gICAgICBpZiAoa2V5IGluIHRoaXMubWV0YWRhdGFbdGVybV1bZmllbGRdKSB7XG4gICAgICAgIHRoaXMubWV0YWRhdGFbdGVybV1bZmllbGRdW2tleV0gPSB0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXVtcbiAgICAgICAgICBrZXlcbiAgICAgICAgXS5jb25jYXQobWV0YWRhdGFba2V5XSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXVtrZXldID0gbWV0YWRhdGFba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIC8qKlxuICAgKiBBIGx1bnIuUXVlcnkgcHJvdmlkZXMgYSBwcm9ncmFtbWF0aWMgd2F5IG9mIGRlZmluaW5nIHF1ZXJpZXMgdG8gYmUgcGVyZm9ybWVkXG4gICAqIGFnYWluc3QgYSB7QGxpbmsgbHVuci5JbmRleH0uXG4gICAqXG4gICAqIFByZWZlciBjb25zdHJ1Y3RpbmcgYSBsdW5yLlF1ZXJ5IHVzaW5nIHRoZSB7QGxpbmsgbHVuci5JbmRleCNxdWVyeX0gbWV0aG9kXG4gICAqIHNvIHRoZSBxdWVyeSBvYmplY3QgaXMgcHJlLWluaXRpYWxpemVkIHdpdGggdGhlIHJpZ2h0IGluZGV4IGZpZWxkcy5cbiAgICpcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqIEBwcm9wZXJ0eSB7bHVuci5RdWVyeX5DbGF1c2VbXX0gY2xhdXNlcyAtIEFuIGFycmF5IG9mIHF1ZXJ5IGNsYXVzZXMuXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nW119IGFsbEZpZWxkcyAtIEFuIGFycmF5IG9mIGFsbCBhdmFpbGFibGUgZmllbGRzIGluIGEgbHVuci5JbmRleC5cbiAgICovXG4gIGx1bnIuUXVlcnkgPSBmdW5jdGlvbiAoYWxsRmllbGRzKSB7XG4gICAgdGhpcy5jbGF1c2VzID0gW107XG4gICAgdGhpcy5hbGxGaWVsZHMgPSBhbGxGaWVsZHM7XG4gIH07XG5cbiAgLyoqXG4gICAqIENvbnN0YW50cyBmb3IgaW5kaWNhdGluZyB3aGF0IGtpbmQgb2YgYXV0b21hdGljIHdpbGRjYXJkIGluc2VydGlvbiB3aWxsIGJlIHVzZWQgd2hlbiBjb25zdHJ1Y3RpbmcgYSBxdWVyeSBjbGF1c2UuXG4gICAqXG4gICAqIFRoaXMgYWxsb3dzIHdpbGRjYXJkcyB0byBiZSBhZGRlZCB0byB0aGUgYmVnaW5uaW5nIGFuZCBlbmQgb2YgYSB0ZXJtIHdpdGhvdXQgaGF2aW5nIHRvIG1hbnVhbGx5IGRvIGFueSBzdHJpbmdcbiAgICogY29uY2F0ZW5hdGlvbi5cbiAgICpcbiAgICogVGhlIHdpbGRjYXJkIGNvbnN0YW50cyBjYW4gYmUgYml0d2lzZSBjb21iaW5lZCB0byBzZWxlY3QgYm90aCBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aWxkY2FyZHMuXG4gICAqXG4gICAqIEBjb25zdGFudFxuICAgKiBAZGVmYXVsdFxuICAgKiBAcHJvcGVydHkge251bWJlcn0gd2lsZGNhcmQuTk9ORSAtIFRoZSB0ZXJtIHdpbGwgaGF2ZSBubyB3aWxkY2FyZHMgaW5zZXJ0ZWQsIHRoaXMgaXMgdGhlIGRlZmF1bHQgYmVoYXZpb3VyXG4gICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB3aWxkY2FyZC5MRUFESU5HIC0gUHJlcGVuZCB0aGUgdGVybSB3aXRoIGEgd2lsZGNhcmQsIHVubGVzcyBhIGxlYWRpbmcgd2lsZGNhcmQgYWxyZWFkeSBleGlzdHNcbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IHdpbGRjYXJkLlRSQUlMSU5HIC0gQXBwZW5kIGEgd2lsZGNhcmQgdG8gdGhlIHRlcm0sIHVubGVzcyBhIHRyYWlsaW5nIHdpbGRjYXJkIGFscmVhZHkgZXhpc3RzXG4gICAqIEBzZWUgbHVuci5RdWVyeX5DbGF1c2VcbiAgICogQHNlZSBsdW5yLlF1ZXJ5I2NsYXVzZVxuICAgKiBAc2VlIGx1bnIuUXVlcnkjdGVybVxuICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5xdWVyeSB0ZXJtIHdpdGggdHJhaWxpbmcgd2lsZGNhcmQ8L2NhcHRpb24+XG4gICAqIHF1ZXJ5LnRlcm0oJ2ZvbycsIHsgd2lsZGNhcmQ6IGx1bnIuUXVlcnkud2lsZGNhcmQuVFJBSUxJTkcgfSlcbiAgICogQGV4YW1wbGUgPGNhcHRpb24+cXVlcnkgdGVybSB3aXRoIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdpbGRjYXJkPC9jYXB0aW9uPlxuICAgKiBxdWVyeS50ZXJtKCdmb28nLCB7XG4gICAqICAgd2lsZGNhcmQ6IGx1bnIuUXVlcnkud2lsZGNhcmQuTEVBRElORyB8IGx1bnIuUXVlcnkud2lsZGNhcmQuVFJBSUxJTkdcbiAgICogfSlcbiAgICovXG5cbiAgbHVuci5RdWVyeS53aWxkY2FyZCA9IG5ldyBTdHJpbmcoXCIqXCIpO1xuICBsdW5yLlF1ZXJ5LndpbGRjYXJkLk5PTkUgPSAwO1xuICBsdW5yLlF1ZXJ5LndpbGRjYXJkLkxFQURJTkcgPSAxO1xuICBsdW5yLlF1ZXJ5LndpbGRjYXJkLlRSQUlMSU5HID0gMjtcblxuICAvKipcbiAgICogQ29uc3RhbnRzIGZvciBpbmRpY2F0aW5nIHdoYXQga2luZCBvZiBwcmVzZW5jZSBhIHRlcm0gbXVzdCBoYXZlIGluIG1hdGNoaW5nIGRvY3VtZW50cy5cbiAgICpcbiAgICogQGNvbnN0YW50XG4gICAqIEBlbnVtIHtudW1iZXJ9XG4gICAqIEBzZWUgbHVuci5RdWVyeX5DbGF1c2VcbiAgICogQHNlZSBsdW5yLlF1ZXJ5I2NsYXVzZVxuICAgKiBAc2VlIGx1bnIuUXVlcnkjdGVybVxuICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5xdWVyeSB0ZXJtIHdpdGggcmVxdWlyZWQgcHJlc2VuY2U8L2NhcHRpb24+XG4gICAqIHF1ZXJ5LnRlcm0oJ2ZvbycsIHsgcHJlc2VuY2U6IGx1bnIuUXVlcnkucHJlc2VuY2UuUkVRVUlSRUQgfSlcbiAgICovXG4gIGx1bnIuUXVlcnkucHJlc2VuY2UgPSB7XG4gICAgLyoqXG4gICAgICogVGVybSdzIHByZXNlbmNlIGluIGEgZG9jdW1lbnQgaXMgb3B0aW9uYWwsIHRoaXMgaXMgdGhlIGRlZmF1bHQgdmFsdWUuXG4gICAgICovXG4gICAgT1BUSU9OQUw6IDEsXG5cbiAgICAvKipcbiAgICAgKiBUZXJtJ3MgcHJlc2VuY2UgaW4gYSBkb2N1bWVudCBpcyByZXF1aXJlZCwgZG9jdW1lbnRzIHRoYXQgZG8gbm90IGNvbnRhaW5cbiAgICAgKiB0aGlzIHRlcm0gd2lsbCBub3QgYmUgcmV0dXJuZWQuXG4gICAgICovXG4gICAgUkVRVUlSRUQ6IDIsXG5cbiAgICAvKipcbiAgICAgKiBUZXJtJ3MgcHJlc2VuY2UgaW4gYSBkb2N1bWVudCBpcyBwcm9oaWJpdGVkLCBkb2N1bWVudHMgdGhhdCBkbyBjb250YWluXG4gICAgICogdGhpcyB0ZXJtIHdpbGwgbm90IGJlIHJldHVybmVkLlxuICAgICAqL1xuICAgIFBST0hJQklURUQ6IDMsXG4gIH07XG5cbiAgLyoqXG4gICAqIEEgc2luZ2xlIGNsYXVzZSBpbiBhIHtAbGluayBsdW5yLlF1ZXJ5fSBjb250YWlucyBhIHRlcm0gYW5kIGRldGFpbHMgb24gaG93IHRvXG4gICAqIG1hdGNoIHRoYXQgdGVybSBhZ2FpbnN0IGEge0BsaW5rIGx1bnIuSW5kZXh9LlxuICAgKlxuICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBsdW5yLlF1ZXJ5fkNsYXVzZVxuICAgKiBAcHJvcGVydHkge3N0cmluZ1tdfSBmaWVsZHMgLSBUaGUgZmllbGRzIGluIGFuIGluZGV4IHRoaXMgY2xhdXNlIHNob3VsZCBiZSBtYXRjaGVkIGFnYWluc3QuXG4gICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbYm9vc3Q9MV0gLSBBbnkgYm9vc3QgdGhhdCBzaG91bGQgYmUgYXBwbGllZCB3aGVuIG1hdGNoaW5nIHRoaXMgY2xhdXNlLlxuICAgKiBAcHJvcGVydHkge251bWJlcn0gW2VkaXREaXN0YW5jZV0gLSBXaGV0aGVyIHRoZSB0ZXJtIHNob3VsZCBoYXZlIGZ1enp5IG1hdGNoaW5nIGFwcGxpZWQsIGFuZCBob3cgZnV6enkgdGhlIG1hdGNoIHNob3VsZCBiZS5cbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbdXNlUGlwZWxpbmVdIC0gV2hldGhlciB0aGUgdGVybSBzaG91bGQgYmUgcGFzc2VkIHRocm91Z2ggdGhlIHNlYXJjaCBwaXBlbGluZS5cbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFt3aWxkY2FyZD1sdW5yLlF1ZXJ5LndpbGRjYXJkLk5PTkVdIC0gV2hldGhlciB0aGUgdGVybSBzaG91bGQgaGF2ZSB3aWxkY2FyZHMgYXBwZW5kZWQgb3IgcHJlcGVuZGVkLlxuICAgKiBAcHJvcGVydHkge251bWJlcn0gW3ByZXNlbmNlPWx1bnIuUXVlcnkucHJlc2VuY2UuT1BUSU9OQUxdIC0gVGhlIHRlcm1zIHByZXNlbmNlIGluIGFueSBtYXRjaGluZyBkb2N1bWVudHMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBZGRzIGEge0BsaW5rIGx1bnIuUXVlcnl+Q2xhdXNlfSB0byB0aGlzIHF1ZXJ5LlxuICAgKlxuICAgKiBVbmxlc3MgdGhlIGNsYXVzZSBjb250YWlucyB0aGUgZmllbGRzIHRvIGJlIG1hdGNoZWQgYWxsIGZpZWxkcyB3aWxsIGJlIG1hdGNoZWQuIEluIGFkZGl0aW9uXG4gICAqIGEgZGVmYXVsdCBib29zdCBvZiAxIGlzIGFwcGxpZWQgdG8gdGhlIGNsYXVzZS5cbiAgICpcbiAgICogQHBhcmFtIHtsdW5yLlF1ZXJ5fkNsYXVzZX0gY2xhdXNlIC0gVGhlIGNsYXVzZSB0byBhZGQgdG8gdGhpcyBxdWVyeS5cbiAgICogQHNlZSBsdW5yLlF1ZXJ5fkNsYXVzZVxuICAgKiBAcmV0dXJucyB7bHVuci5RdWVyeX1cbiAgICovXG4gIGx1bnIuUXVlcnkucHJvdG90eXBlLmNsYXVzZSA9IGZ1bmN0aW9uIChjbGF1c2UpIHtcbiAgICBpZiAoIShcImZpZWxkc1wiIGluIGNsYXVzZSkpIHtcbiAgICAgIGNsYXVzZS5maWVsZHMgPSB0aGlzLmFsbEZpZWxkcztcbiAgICB9XG5cbiAgICBpZiAoIShcImJvb3N0XCIgaW4gY2xhdXNlKSkge1xuICAgICAgY2xhdXNlLmJvb3N0ID0gMTtcbiAgICB9XG5cbiAgICBpZiAoIShcInVzZVBpcGVsaW5lXCIgaW4gY2xhdXNlKSkge1xuICAgICAgY2xhdXNlLnVzZVBpcGVsaW5lID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoIShcIndpbGRjYXJkXCIgaW4gY2xhdXNlKSkge1xuICAgICAgY2xhdXNlLndpbGRjYXJkID0gbHVuci5RdWVyeS53aWxkY2FyZC5OT05FO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIGNsYXVzZS53aWxkY2FyZCAmIGx1bnIuUXVlcnkud2lsZGNhcmQuTEVBRElORyAmJlxuICAgICAgY2xhdXNlLnRlcm0uY2hhckF0KDApICE9IGx1bnIuUXVlcnkud2lsZGNhcmRcbiAgICApIHtcbiAgICAgIGNsYXVzZS50ZXJtID0gXCIqXCIgKyBjbGF1c2UudGVybTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBjbGF1c2Uud2lsZGNhcmQgJiBsdW5yLlF1ZXJ5LndpbGRjYXJkLlRSQUlMSU5HICYmXG4gICAgICBjbGF1c2UudGVybS5zbGljZSgtMSkgIT0gbHVuci5RdWVyeS53aWxkY2FyZFxuICAgICkge1xuICAgICAgY2xhdXNlLnRlcm0gPSBcIlwiICsgY2xhdXNlLnRlcm0gKyBcIipcIjtcbiAgICB9XG5cbiAgICBpZiAoIShcInByZXNlbmNlXCIgaW4gY2xhdXNlKSkge1xuICAgICAgY2xhdXNlLnByZXNlbmNlID0gbHVuci5RdWVyeS5wcmVzZW5jZS5PUFRJT05BTDtcbiAgICB9XG5cbiAgICB0aGlzLmNsYXVzZXMucHVzaChjbGF1c2UpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEEgbmVnYXRlZCBxdWVyeSBpcyBvbmUgaW4gd2hpY2ggZXZlcnkgY2xhdXNlIGhhcyBhIHByZXNlbmNlIG9mXG4gICAqIHByb2hpYml0ZWQuIFRoZXNlIHF1ZXJpZXMgcmVxdWlyZSBzb21lIHNwZWNpYWwgcHJvY2Vzc2luZyB0byByZXR1cm5cbiAgICogdGhlIGV4cGVjdGVkIHJlc3VsdHMuXG4gICAqXG4gICAqIEByZXR1cm5zIGJvb2xlYW5cbiAgICovXG4gIGx1bnIuUXVlcnkucHJvdG90eXBlLmlzTmVnYXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY2xhdXNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMuY2xhdXNlc1tpXS5wcmVzZW5jZSAhPSBsdW5yLlF1ZXJ5LnByZXNlbmNlLlBST0hJQklURUQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBZGRzIGEgdGVybSB0byB0aGUgY3VycmVudCBxdWVyeSwgdW5kZXIgdGhlIGNvdmVycyB0aGlzIHdpbGwgY3JlYXRlIGEge0BsaW5rIGx1bnIuUXVlcnl+Q2xhdXNlfVxuICAgKiB0byB0aGUgbGlzdCBvZiBjbGF1c2VzIHRoYXQgbWFrZSB1cCB0aGlzIHF1ZXJ5LlxuICAgKlxuICAgKiBUaGUgdGVybSBpcyB1c2VkIGFzIGlzLCBpLmUuIG5vIHRva2VuaXphdGlvbiB3aWxsIGJlIHBlcmZvcm1lZCBieSB0aGlzIG1ldGhvZC4gSW5zdGVhZCBjb252ZXJzaW9uXG4gICAqIHRvIGEgdG9rZW4gb3IgdG9rZW4tbGlrZSBzdHJpbmcgc2hvdWxkIGJlIGRvbmUgYmVmb3JlIGNhbGxpbmcgdGhpcyBtZXRob2QuXG4gICAqXG4gICAqIFRoZSB0ZXJtIHdpbGwgYmUgY29udmVydGVkIHRvIGEgc3RyaW5nIGJ5IGNhbGxpbmcgYHRvU3RyaW5nYC4gTXVsdGlwbGUgdGVybXMgY2FuIGJlIHBhc3NlZCBhcyBhblxuICAgKiBhcnJheSwgZWFjaCB0ZXJtIGluIHRoZSBhcnJheSB3aWxsIHNoYXJlIHRoZSBzYW1lIG9wdGlvbnMuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fG9iamVjdFtdfSB0ZXJtIC0gVGhlIHRlcm0ocykgdG8gYWRkIHRvIHRoZSBxdWVyeS5cbiAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXSAtIEFueSBhZGRpdGlvbmFsIHByb3BlcnRpZXMgdG8gYWRkIHRvIHRoZSBxdWVyeSBjbGF1c2UuXG4gICAqIEByZXR1cm5zIHtsdW5yLlF1ZXJ5fVxuICAgKiBAc2VlIGx1bnIuUXVlcnkjY2xhdXNlXG4gICAqIEBzZWUgbHVuci5RdWVyeX5DbGF1c2VcbiAgICogQGV4YW1wbGUgPGNhcHRpb24+YWRkaW5nIGEgc2luZ2xlIHRlcm0gdG8gYSBxdWVyeTwvY2FwdGlvbj5cbiAgICogcXVlcnkudGVybShcImZvb1wiKVxuICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5hZGRpbmcgYSBzaW5nbGUgdGVybSB0byBhIHF1ZXJ5IGFuZCBzcGVjaWZ5aW5nIHNlYXJjaCBmaWVsZHMsIHRlcm0gYm9vc3QgYW5kIGF1dG9tYXRpYyB0cmFpbGluZyB3aWxkY2FyZDwvY2FwdGlvbj5cbiAgICogcXVlcnkudGVybShcImZvb1wiLCB7XG4gICAqICAgZmllbGRzOiBbXCJ0aXRsZVwiXSxcbiAgICogICBib29zdDogMTAsXG4gICAqICAgd2lsZGNhcmQ6IGx1bnIuUXVlcnkud2lsZGNhcmQuVFJBSUxJTkdcbiAgICogfSlcbiAgICogQGV4YW1wbGUgPGNhcHRpb24+dXNpbmcgbHVuci50b2tlbml6ZXIgdG8gY29udmVydCBhIHN0cmluZyB0byB0b2tlbnMgYmVmb3JlIHVzaW5nIHRoZW0gYXMgdGVybXM8L2NhcHRpb24+XG4gICAqIHF1ZXJ5LnRlcm0obHVuci50b2tlbml6ZXIoXCJmb28gYmFyXCIpKVxuICAgKi9cbiAgbHVuci5RdWVyeS5wcm90b3R5cGUudGVybSA9IGZ1bmN0aW9uICh0ZXJtLCBvcHRpb25zKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodGVybSkpIHtcbiAgICAgIHRlcm0uZm9yRWFjaChmdW5jdGlvbiAodCkge1xuICAgICAgICB0aGlzLnRlcm0odCwgbHVuci51dGlscy5jbG9uZShvcHRpb25zKSk7XG4gICAgICB9LCB0aGlzKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHZhciBjbGF1c2UgPSBvcHRpb25zIHx8IHt9O1xuICAgIGNsYXVzZS50ZXJtID0gdGVybS50b1N0cmluZygpO1xuXG4gICAgdGhpcy5jbGF1c2UoY2xhdXNlKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICBsdW5yLlF1ZXJ5UGFyc2VFcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlLCBzdGFydCwgZW5kKSB7XG4gICAgdGhpcy5uYW1lID0gXCJRdWVyeVBhcnNlRXJyb3JcIjtcbiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIHRoaXMuc3RhcnQgPSBzdGFydDtcbiAgICB0aGlzLmVuZCA9IGVuZDtcbiAgfTtcblxuICBsdW5yLlF1ZXJ5UGFyc2VFcnJvci5wcm90b3R5cGUgPSBuZXcgRXJyb3IoKTtcbiAgbHVuci5RdWVyeUxleGVyID0gZnVuY3Rpb24gKHN0cikge1xuICAgIHRoaXMubGV4ZW1lcyA9IFtdO1xuICAgIHRoaXMuc3RyID0gc3RyO1xuICAgIHRoaXMubGVuZ3RoID0gc3RyLmxlbmd0aDtcbiAgICB0aGlzLnBvcyA9IDA7XG4gICAgdGhpcy5zdGFydCA9IDA7XG4gICAgdGhpcy5lc2NhcGVDaGFyUG9zaXRpb25zID0gW107XG4gIH07XG5cbiAgbHVuci5RdWVyeUxleGVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHN0YXRlID0gbHVuci5RdWVyeUxleGVyLmxleFRleHQ7XG5cbiAgICB3aGlsZSAoc3RhdGUpIHtcbiAgICAgIHN0YXRlID0gc3RhdGUodGhpcyk7XG4gICAgfVxuICB9O1xuXG4gIGx1bnIuUXVlcnlMZXhlci5wcm90b3R5cGUuc2xpY2VTdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHN1YlNsaWNlcyA9IFtdLFxuICAgICAgc2xpY2VTdGFydCA9IHRoaXMuc3RhcnQsXG4gICAgICBzbGljZUVuZCA9IHRoaXMucG9zO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmVzY2FwZUNoYXJQb3NpdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHNsaWNlRW5kID0gdGhpcy5lc2NhcGVDaGFyUG9zaXRpb25zW2ldO1xuICAgICAgc3ViU2xpY2VzLnB1c2godGhpcy5zdHIuc2xpY2Uoc2xpY2VTdGFydCwgc2xpY2VFbmQpKTtcbiAgICAgIHNsaWNlU3RhcnQgPSBzbGljZUVuZCArIDE7XG4gICAgfVxuXG4gICAgc3ViU2xpY2VzLnB1c2godGhpcy5zdHIuc2xpY2Uoc2xpY2VTdGFydCwgdGhpcy5wb3MpKTtcbiAgICB0aGlzLmVzY2FwZUNoYXJQb3NpdGlvbnMubGVuZ3RoID0gMDtcblxuICAgIHJldHVybiBzdWJTbGljZXMuam9pbihcIlwiKTtcbiAgfTtcblxuICBsdW5yLlF1ZXJ5TGV4ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgIHRoaXMubGV4ZW1lcy5wdXNoKHtcbiAgICAgIHR5cGU6IHR5cGUsXG4gICAgICBzdHI6IHRoaXMuc2xpY2VTdHJpbmcoKSxcbiAgICAgIHN0YXJ0OiB0aGlzLnN0YXJ0LFxuICAgICAgZW5kOiB0aGlzLnBvcyxcbiAgICB9KTtcblxuICAgIHRoaXMuc3RhcnQgPSB0aGlzLnBvcztcbiAgfTtcblxuICBsdW5yLlF1ZXJ5TGV4ZXIucHJvdG90eXBlLmVzY2FwZUNoYXJhY3RlciA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmVzY2FwZUNoYXJQb3NpdGlvbnMucHVzaCh0aGlzLnBvcyAtIDEpO1xuICAgIHRoaXMucG9zICs9IDE7XG4gIH07XG5cbiAgbHVuci5RdWVyeUxleGVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLnBvcyA+PSB0aGlzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlMZXhlci5FT1M7XG4gICAgfVxuXG4gICAgdmFyIGNoYXIgPSB0aGlzLnN0ci5jaGFyQXQodGhpcy5wb3MpO1xuICAgIHRoaXMucG9zICs9IDE7XG4gICAgcmV0dXJuIGNoYXI7XG4gIH07XG5cbiAgbHVuci5RdWVyeUxleGVyLnByb3RvdHlwZS53aWR0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5wb3MgLSB0aGlzLnN0YXJ0O1xuICB9O1xuXG4gIGx1bnIuUXVlcnlMZXhlci5wcm90b3R5cGUuaWdub3JlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLnN0YXJ0ID09IHRoaXMucG9zKSB7XG4gICAgICB0aGlzLnBvcyArPSAxO1xuICAgIH1cblxuICAgIHRoaXMuc3RhcnQgPSB0aGlzLnBvcztcbiAgfTtcblxuICBsdW5yLlF1ZXJ5TGV4ZXIucHJvdG90eXBlLmJhY2t1cCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnBvcyAtPSAxO1xuICB9O1xuXG4gIGx1bnIuUXVlcnlMZXhlci5wcm90b3R5cGUuYWNjZXB0RGlnaXRSdW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNoYXIsIGNoYXJDb2RlO1xuXG4gICAgZG8ge1xuICAgICAgY2hhciA9IHRoaXMubmV4dCgpO1xuICAgICAgY2hhckNvZGUgPSBjaGFyLmNoYXJDb2RlQXQoMCk7XG4gICAgfSB3aGlsZSAoY2hhckNvZGUgPiA0NyAmJiBjaGFyQ29kZSA8IDU4KTtcblxuICAgIGlmIChjaGFyICE9IGx1bnIuUXVlcnlMZXhlci5FT1MpIHtcbiAgICAgIHRoaXMuYmFja3VwKCk7XG4gICAgfVxuICB9O1xuXG4gIGx1bnIuUXVlcnlMZXhlci5wcm90b3R5cGUubW9yZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5wb3MgPCB0aGlzLmxlbmd0aDtcbiAgfTtcblxuICBsdW5yLlF1ZXJ5TGV4ZXIuRU9TID0gXCJFT1NcIjtcbiAgbHVuci5RdWVyeUxleGVyLkZJRUxEID0gXCJGSUVMRFwiO1xuICBsdW5yLlF1ZXJ5TGV4ZXIuVEVSTSA9IFwiVEVSTVwiO1xuICBsdW5yLlF1ZXJ5TGV4ZXIuRURJVF9ESVNUQU5DRSA9IFwiRURJVF9ESVNUQU5DRVwiO1xuICBsdW5yLlF1ZXJ5TGV4ZXIuQk9PU1QgPSBcIkJPT1NUXCI7XG4gIGx1bnIuUXVlcnlMZXhlci5QUkVTRU5DRSA9IFwiUFJFU0VOQ0VcIjtcblxuICBsdW5yLlF1ZXJ5TGV4ZXIubGV4RmllbGQgPSBmdW5jdGlvbiAobGV4ZXIpIHtcbiAgICBsZXhlci5iYWNrdXAoKTtcbiAgICBsZXhlci5lbWl0KGx1bnIuUXVlcnlMZXhlci5GSUVMRCk7XG4gICAgbGV4ZXIuaWdub3JlKCk7XG4gICAgcmV0dXJuIGx1bnIuUXVlcnlMZXhlci5sZXhUZXh0O1xuICB9O1xuXG4gIGx1bnIuUXVlcnlMZXhlci5sZXhUZXJtID0gZnVuY3Rpb24gKGxleGVyKSB7XG4gICAgaWYgKGxleGVyLndpZHRoKCkgPiAxKSB7XG4gICAgICBsZXhlci5iYWNrdXAoKTtcbiAgICAgIGxleGVyLmVtaXQobHVuci5RdWVyeUxleGVyLlRFUk0pO1xuICAgIH1cblxuICAgIGxleGVyLmlnbm9yZSgpO1xuXG4gICAgaWYgKGxleGVyLm1vcmUoKSkge1xuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlMZXhlci5sZXhUZXh0O1xuICAgIH1cbiAgfTtcblxuICBsdW5yLlF1ZXJ5TGV4ZXIubGV4RWRpdERpc3RhbmNlID0gZnVuY3Rpb24gKGxleGVyKSB7XG4gICAgbGV4ZXIuaWdub3JlKCk7XG4gICAgbGV4ZXIuYWNjZXB0RGlnaXRSdW4oKTtcbiAgICBsZXhlci5lbWl0KGx1bnIuUXVlcnlMZXhlci5FRElUX0RJU1RBTkNFKTtcbiAgICByZXR1cm4gbHVuci5RdWVyeUxleGVyLmxleFRleHQ7XG4gIH07XG5cbiAgbHVuci5RdWVyeUxleGVyLmxleEJvb3N0ID0gZnVuY3Rpb24gKGxleGVyKSB7XG4gICAgbGV4ZXIuaWdub3JlKCk7XG4gICAgbGV4ZXIuYWNjZXB0RGlnaXRSdW4oKTtcbiAgICBsZXhlci5lbWl0KGx1bnIuUXVlcnlMZXhlci5CT09TVCk7XG4gICAgcmV0dXJuIGx1bnIuUXVlcnlMZXhlci5sZXhUZXh0O1xuICB9O1xuXG4gIGx1bnIuUXVlcnlMZXhlci5sZXhFT1MgPSBmdW5jdGlvbiAobGV4ZXIpIHtcbiAgICBpZiAobGV4ZXIud2lkdGgoKSA+IDApIHtcbiAgICAgIGxleGVyLmVtaXQobHVuci5RdWVyeUxleGVyLlRFUk0pO1xuICAgIH1cbiAgfTtcblxuICAvLyBUaGlzIG1hdGNoZXMgdGhlIHNlcGFyYXRvciB1c2VkIHdoZW4gdG9rZW5pc2luZyBmaWVsZHNcbiAgLy8gd2l0aGluIGEgZG9jdW1lbnQuIFRoZXNlIHNob3VsZCBtYXRjaCBvdGhlcndpc2UgaXQgaXNcbiAgLy8gbm90IHBvc3NpYmxlIHRvIHNlYXJjaCBmb3Igc29tZSB0b2tlbnMgd2l0aGluIGEgZG9jdW1lbnQuXG4gIC8vXG4gIC8vIEl0IGlzIHBvc3NpYmxlIGZvciB0aGUgdXNlciB0byBjaGFuZ2UgdGhlIHNlcGFyYXRvciBvbiB0aGVcbiAgLy8gdG9rZW5pemVyIHNvIGl0IF9taWdodF8gY2xhc2ggd2l0aCBhbnkgb3RoZXIgb2YgdGhlIHNwZWNpYWxcbiAgLy8gY2hhcmFjdGVycyBhbHJlYWR5IHVzZWQgd2l0aGluIHRoZSBzZWFyY2ggc3RyaW5nLCBlLmcuIDouXG4gIC8vXG4gIC8vIFRoaXMgbWVhbnMgdGhhdCBpdCBpcyBwb3NzaWJsZSB0byBjaGFuZ2UgdGhlIHNlcGFyYXRvciBpblxuICAvLyBzdWNoIGEgd2F5IHRoYXQgbWFrZXMgc29tZSB3b3JkcyB1bnNlYXJjaGFibGUgdXNpbmcgYSBzZWFyY2hcbiAgLy8gc3RyaW5nLlxuICBsdW5yLlF1ZXJ5TGV4ZXIudGVybVNlcGFyYXRvciA9IGx1bnIudG9rZW5pemVyLnNlcGFyYXRvcjtcblxuICBsdW5yLlF1ZXJ5TGV4ZXIubGV4VGV4dCA9IGZ1bmN0aW9uIChsZXhlcikge1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICB2YXIgY2hhciA9IGxleGVyLm5leHQoKTtcblxuICAgICAgaWYgKGNoYXIgPT0gbHVuci5RdWVyeUxleGVyLkVPUykge1xuICAgICAgICByZXR1cm4gbHVuci5RdWVyeUxleGVyLmxleEVPUztcbiAgICAgIH1cblxuICAgICAgLy8gRXNjYXBlIGNoYXJhY3RlciBpcyAnXFwnXG4gICAgICBpZiAoY2hhci5jaGFyQ29kZUF0KDApID09IDkyKSB7XG4gICAgICAgIGxleGVyLmVzY2FwZUNoYXJhY3RlcigpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoYXIgPT0gXCI6XCIpIHtcbiAgICAgICAgcmV0dXJuIGx1bnIuUXVlcnlMZXhlci5sZXhGaWVsZDtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoYXIgPT0gXCJ+XCIpIHtcbiAgICAgICAgbGV4ZXIuYmFja3VwKCk7XG4gICAgICAgIGlmIChsZXhlci53aWR0aCgpID4gMCkge1xuICAgICAgICAgIGxleGVyLmVtaXQobHVuci5RdWVyeUxleGVyLlRFUk0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsdW5yLlF1ZXJ5TGV4ZXIubGV4RWRpdERpc3RhbmNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2hhciA9PSBcIl5cIikge1xuICAgICAgICBsZXhlci5iYWNrdXAoKTtcbiAgICAgICAgaWYgKGxleGVyLndpZHRoKCkgPiAwKSB7XG4gICAgICAgICAgbGV4ZXIuZW1pdChsdW5yLlF1ZXJ5TGV4ZXIuVEVSTSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGx1bnIuUXVlcnlMZXhlci5sZXhCb29zdDtcbiAgICAgIH1cblxuICAgICAgLy8gXCIrXCIgaW5kaWNhdGVzIHRlcm0gcHJlc2VuY2UgaXMgcmVxdWlyZWRcbiAgICAgIC8vIGNoZWNraW5nIGZvciBsZW5ndGggdG8gZW5zdXJlIHRoYXQgb25seVxuICAgICAgLy8gbGVhZGluZyBcIitcIiBhcmUgY29uc2lkZXJlZFxuICAgICAgaWYgKGNoYXIgPT0gXCIrXCIgJiYgbGV4ZXIud2lkdGgoKSA9PT0gMSkge1xuICAgICAgICBsZXhlci5lbWl0KGx1bnIuUXVlcnlMZXhlci5QUkVTRU5DRSk7XG4gICAgICAgIHJldHVybiBsdW5yLlF1ZXJ5TGV4ZXIubGV4VGV4dDtcbiAgICAgIH1cblxuICAgICAgLy8gXCItXCIgaW5kaWNhdGVzIHRlcm0gcHJlc2VuY2UgaXMgcHJvaGliaXRlZFxuICAgICAgLy8gY2hlY2tpbmcgZm9yIGxlbmd0aCB0byBlbnN1cmUgdGhhdCBvbmx5XG4gICAgICAvLyBsZWFkaW5nIFwiLVwiIGFyZSBjb25zaWRlcmVkXG4gICAgICBpZiAoY2hhciA9PSBcIi1cIiAmJiBsZXhlci53aWR0aCgpID09PSAxKSB7XG4gICAgICAgIGxleGVyLmVtaXQobHVuci5RdWVyeUxleGVyLlBSRVNFTkNFKTtcbiAgICAgICAgcmV0dXJuIGx1bnIuUXVlcnlMZXhlci5sZXhUZXh0O1xuICAgICAgfVxuXG4gICAgICBpZiAoY2hhci5tYXRjaChsdW5yLlF1ZXJ5TGV4ZXIudGVybVNlcGFyYXRvcikpIHtcbiAgICAgICAgcmV0dXJuIGx1bnIuUXVlcnlMZXhlci5sZXhUZXJtO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBsdW5yLlF1ZXJ5UGFyc2VyID0gZnVuY3Rpb24gKHN0ciwgcXVlcnkpIHtcbiAgICB0aGlzLmxleGVyID0gbmV3IGx1bnIuUXVlcnlMZXhlcihzdHIpO1xuICAgIHRoaXMucXVlcnkgPSBxdWVyeTtcbiAgICB0aGlzLmN1cnJlbnRDbGF1c2UgPSB7fTtcbiAgICB0aGlzLmxleGVtZUlkeCA9IDA7XG4gIH07XG5cbiAgbHVuci5RdWVyeVBhcnNlci5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5sZXhlci5ydW4oKTtcbiAgICB0aGlzLmxleGVtZXMgPSB0aGlzLmxleGVyLmxleGVtZXM7XG5cbiAgICB2YXIgc3RhdGUgPSBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlQ2xhdXNlO1xuXG4gICAgd2hpbGUgKHN0YXRlKSB7XG4gICAgICBzdGF0ZSA9IHN0YXRlKHRoaXMpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnF1ZXJ5O1xuICB9O1xuXG4gIGx1bnIuUXVlcnlQYXJzZXIucHJvdG90eXBlLnBlZWtMZXhlbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMubGV4ZW1lc1t0aGlzLmxleGVtZUlkeF07XG4gIH07XG5cbiAgbHVuci5RdWVyeVBhcnNlci5wcm90b3R5cGUuY29uc3VtZUxleGVtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbGV4ZW1lID0gdGhpcy5wZWVrTGV4ZW1lKCk7XG4gICAgdGhpcy5sZXhlbWVJZHggKz0gMTtcbiAgICByZXR1cm4gbGV4ZW1lO1xuICB9O1xuXG4gIGx1bnIuUXVlcnlQYXJzZXIucHJvdG90eXBlLm5leHRDbGF1c2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNvbXBsZXRlZENsYXVzZSA9IHRoaXMuY3VycmVudENsYXVzZTtcbiAgICB0aGlzLnF1ZXJ5LmNsYXVzZShjb21wbGV0ZWRDbGF1c2UpO1xuICAgIHRoaXMuY3VycmVudENsYXVzZSA9IHt9O1xuICB9O1xuXG4gIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VDbGF1c2UgPSBmdW5jdGlvbiAocGFyc2VyKSB7XG4gICAgdmFyIGxleGVtZSA9IHBhcnNlci5wZWVrTGV4ZW1lKCk7XG5cbiAgICBpZiAobGV4ZW1lID09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN3aXRjaCAobGV4ZW1lLnR5cGUpIHtcbiAgICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLlBSRVNFTkNFOlxuICAgICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZVByZXNlbmNlO1xuICAgICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuRklFTEQ6XG4gICAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlRmllbGQ7XG4gICAgICBjYXNlIGx1bnIuUXVlcnlMZXhlci5URVJNOlxuICAgICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZVRlcm07XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID1cbiAgICAgICAgICBcImV4cGVjdGVkIGVpdGhlciBhIGZpZWxkIG9yIGEgdGVybSwgZm91bmQgXCIgKyBsZXhlbWUudHlwZTtcblxuICAgICAgICBpZiAobGV4ZW1lLnN0ci5sZW5ndGggPj0gMSkge1xuICAgICAgICAgIGVycm9yTWVzc2FnZSArPSBcIiB3aXRoIHZhbHVlICdcIiArIGxleGVtZS5zdHIgKyBcIidcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRocm93IG5ldyBsdW5yLlF1ZXJ5UGFyc2VFcnJvcihlcnJvck1lc3NhZ2UsIGxleGVtZS5zdGFydCwgbGV4ZW1lLmVuZCk7XG4gICAgfVxuICB9O1xuXG4gIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VQcmVzZW5jZSA9IGZ1bmN0aW9uIChwYXJzZXIpIHtcbiAgICB2YXIgbGV4ZW1lID0gcGFyc2VyLmNvbnN1bWVMZXhlbWUoKTtcblxuICAgIGlmIChsZXhlbWUgPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc3dpdGNoIChsZXhlbWUuc3RyKSB7XG4gICAgICBjYXNlIFwiLVwiOlxuICAgICAgICBwYXJzZXIuY3VycmVudENsYXVzZS5wcmVzZW5jZSA9IGx1bnIuUXVlcnkucHJlc2VuY2UuUFJPSElCSVRFRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiK1wiOlxuICAgICAgICBwYXJzZXIuY3VycmVudENsYXVzZS5wcmVzZW5jZSA9IGx1bnIuUXVlcnkucHJlc2VuY2UuUkVRVUlSRUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IFwidW5yZWNvZ25pc2VkIHByZXNlbmNlIG9wZXJhdG9yJ1wiICsgbGV4ZW1lLnN0ciArIFwiJ1wiO1xuICAgICAgICB0aHJvdyBuZXcgbHVuci5RdWVyeVBhcnNlRXJyb3IoZXJyb3JNZXNzYWdlLCBsZXhlbWUuc3RhcnQsIGxleGVtZS5lbmQpO1xuICAgIH1cblxuICAgIHZhciBuZXh0TGV4ZW1lID0gcGFyc2VyLnBlZWtMZXhlbWUoKTtcblxuICAgIGlmIChuZXh0TGV4ZW1lID09IHVuZGVmaW5lZCkge1xuICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IFwiZXhwZWN0aW5nIHRlcm0gb3IgZmllbGQsIGZvdW5kIG5vdGhpbmdcIjtcbiAgICAgIHRocm93IG5ldyBsdW5yLlF1ZXJ5UGFyc2VFcnJvcihlcnJvck1lc3NhZ2UsIGxleGVtZS5zdGFydCwgbGV4ZW1lLmVuZCk7XG4gICAgfVxuXG4gICAgc3dpdGNoIChuZXh0TGV4ZW1lLnR5cGUpIHtcbiAgICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkZJRUxEOlxuICAgICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZUZpZWxkO1xuICAgICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuVEVSTTpcbiAgICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VUZXJtO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdmFyIGVycm9yTWVzc2FnZSA9XG4gICAgICAgICAgXCJleHBlY3RpbmcgdGVybSBvciBmaWVsZCwgZm91bmQgJ1wiICsgbmV4dExleGVtZS50eXBlICsgXCInXCI7XG4gICAgICAgIHRocm93IG5ldyBsdW5yLlF1ZXJ5UGFyc2VFcnJvcihcbiAgICAgICAgICBlcnJvck1lc3NhZ2UsXG4gICAgICAgICAgbmV4dExleGVtZS5zdGFydCxcbiAgICAgICAgICBuZXh0TGV4ZW1lLmVuZFxuICAgICAgICApO1xuICAgIH1cbiAgfTtcblxuICBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlRmllbGQgPSBmdW5jdGlvbiAocGFyc2VyKSB7XG4gICAgdmFyIGxleGVtZSA9IHBhcnNlci5jb25zdW1lTGV4ZW1lKCk7XG5cbiAgICBpZiAobGV4ZW1lID09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChwYXJzZXIucXVlcnkuYWxsRmllbGRzLmluZGV4T2YobGV4ZW1lLnN0cikgPT0gLTEpIHtcbiAgICAgIHZhciBwb3NzaWJsZUZpZWxkcyA9IHBhcnNlci5xdWVyeS5hbGxGaWVsZHNcbiAgICAgICAgICAubWFwKGZ1bmN0aW9uIChmKSB7XG4gICAgICAgICAgICByZXR1cm4gXCInXCIgKyBmICsgXCInXCI7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuam9pbihcIiwgXCIpLFxuICAgICAgICBlcnJvck1lc3NhZ2UgPVxuICAgICAgICAgIFwidW5yZWNvZ25pc2VkIGZpZWxkICdcIiArXG4gICAgICAgICAgbGV4ZW1lLnN0ciArXG4gICAgICAgICAgXCInLCBwb3NzaWJsZSBmaWVsZHM6IFwiICtcbiAgICAgICAgICBwb3NzaWJsZUZpZWxkcztcblxuICAgICAgdGhyb3cgbmV3IGx1bnIuUXVlcnlQYXJzZUVycm9yKGVycm9yTWVzc2FnZSwgbGV4ZW1lLnN0YXJ0LCBsZXhlbWUuZW5kKTtcbiAgICB9XG5cbiAgICBwYXJzZXIuY3VycmVudENsYXVzZS5maWVsZHMgPSBbbGV4ZW1lLnN0cl07XG5cbiAgICB2YXIgbmV4dExleGVtZSA9IHBhcnNlci5wZWVrTGV4ZW1lKCk7XG5cbiAgICBpZiAobmV4dExleGVtZSA9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSBcImV4cGVjdGluZyB0ZXJtLCBmb3VuZCBub3RoaW5nXCI7XG4gICAgICB0aHJvdyBuZXcgbHVuci5RdWVyeVBhcnNlRXJyb3IoZXJyb3JNZXNzYWdlLCBsZXhlbWUuc3RhcnQsIGxleGVtZS5lbmQpO1xuICAgIH1cblxuICAgIHN3aXRjaCAobmV4dExleGVtZS50eXBlKSB7XG4gICAgICBjYXNlIGx1bnIuUXVlcnlMZXhlci5URVJNOlxuICAgICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZVRlcm07XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gXCJleHBlY3RpbmcgdGVybSwgZm91bmQgJ1wiICsgbmV4dExleGVtZS50eXBlICsgXCInXCI7XG4gICAgICAgIHRocm93IG5ldyBsdW5yLlF1ZXJ5UGFyc2VFcnJvcihcbiAgICAgICAgICBlcnJvck1lc3NhZ2UsXG4gICAgICAgICAgbmV4dExleGVtZS5zdGFydCxcbiAgICAgICAgICBuZXh0TGV4ZW1lLmVuZFxuICAgICAgICApO1xuICAgIH1cbiAgfTtcblxuICBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlVGVybSA9IGZ1bmN0aW9uIChwYXJzZXIpIHtcbiAgICB2YXIgbGV4ZW1lID0gcGFyc2VyLmNvbnN1bWVMZXhlbWUoKTtcblxuICAgIGlmIChsZXhlbWUgPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcGFyc2VyLmN1cnJlbnRDbGF1c2UudGVybSA9IGxleGVtZS5zdHIudG9Mb3dlckNhc2UoKTtcblxuICAgIGlmIChsZXhlbWUuc3RyLmluZGV4T2YoXCIqXCIpICE9IC0xKSB7XG4gICAgICBwYXJzZXIuY3VycmVudENsYXVzZS51c2VQaXBlbGluZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBuZXh0TGV4ZW1lID0gcGFyc2VyLnBlZWtMZXhlbWUoKTtcblxuICAgIGlmIChuZXh0TGV4ZW1lID09IHVuZGVmaW5lZCkge1xuICAgICAgcGFyc2VyLm5leHRDbGF1c2UoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKG5leHRMZXhlbWUudHlwZSkge1xuICAgICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuVEVSTTpcbiAgICAgICAgcGFyc2VyLm5leHRDbGF1c2UoKTtcbiAgICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VUZXJtO1xuICAgICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuRklFTEQ6XG4gICAgICAgIHBhcnNlci5uZXh0Q2xhdXNlKCk7XG4gICAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlRmllbGQ7XG4gICAgICBjYXNlIGx1bnIuUXVlcnlMZXhlci5FRElUX0RJU1RBTkNFOlxuICAgICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZUVkaXREaXN0YW5jZTtcbiAgICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkJPT1NUOlxuICAgICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZUJvb3N0O1xuICAgICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuUFJFU0VOQ0U6XG4gICAgICAgIHBhcnNlci5uZXh0Q2xhdXNlKCk7XG4gICAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlUHJlc2VuY2U7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gXCJVbmV4cGVjdGVkIGxleGVtZSB0eXBlICdcIiArIG5leHRMZXhlbWUudHlwZSArIFwiJ1wiO1xuICAgICAgICB0aHJvdyBuZXcgbHVuci5RdWVyeVBhcnNlRXJyb3IoXG4gICAgICAgICAgZXJyb3JNZXNzYWdlLFxuICAgICAgICAgIG5leHRMZXhlbWUuc3RhcnQsXG4gICAgICAgICAgbmV4dExleGVtZS5lbmRcbiAgICAgICAgKTtcbiAgICB9XG4gIH07XG5cbiAgbHVuci5RdWVyeVBhcnNlci5wYXJzZUVkaXREaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXJzZXIpIHtcbiAgICB2YXIgbGV4ZW1lID0gcGFyc2VyLmNvbnN1bWVMZXhlbWUoKTtcblxuICAgIGlmIChsZXhlbWUgPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGVkaXREaXN0YW5jZSA9IHBhcnNlSW50KGxleGVtZS5zdHIsIDEwKTtcblxuICAgIGlmIChpc05hTihlZGl0RGlzdGFuY2UpKSB7XG4gICAgICB2YXIgZXJyb3JNZXNzYWdlID0gXCJlZGl0IGRpc3RhbmNlIG11c3QgYmUgbnVtZXJpY1wiO1xuICAgICAgdGhyb3cgbmV3IGx1bnIuUXVlcnlQYXJzZUVycm9yKGVycm9yTWVzc2FnZSwgbGV4ZW1lLnN0YXJ0LCBsZXhlbWUuZW5kKTtcbiAgICB9XG5cbiAgICBwYXJzZXIuY3VycmVudENsYXVzZS5lZGl0RGlzdGFuY2UgPSBlZGl0RGlzdGFuY2U7XG5cbiAgICB2YXIgbmV4dExleGVtZSA9IHBhcnNlci5wZWVrTGV4ZW1lKCk7XG5cbiAgICBpZiAobmV4dExleGVtZSA9PSB1bmRlZmluZWQpIHtcbiAgICAgIHBhcnNlci5uZXh0Q2xhdXNlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc3dpdGNoIChuZXh0TGV4ZW1lLnR5cGUpIHtcbiAgICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLlRFUk06XG4gICAgICAgIHBhcnNlci5uZXh0Q2xhdXNlKCk7XG4gICAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlVGVybTtcbiAgICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkZJRUxEOlxuICAgICAgICBwYXJzZXIubmV4dENsYXVzZSgpO1xuICAgICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZUZpZWxkO1xuICAgICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuRURJVF9ESVNUQU5DRTpcbiAgICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VFZGl0RGlzdGFuY2U7XG4gICAgICBjYXNlIGx1bnIuUXVlcnlMZXhlci5CT09TVDpcbiAgICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VCb29zdDtcbiAgICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLlBSRVNFTkNFOlxuICAgICAgICBwYXJzZXIubmV4dENsYXVzZSgpO1xuICAgICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZVByZXNlbmNlO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IFwiVW5leHBlY3RlZCBsZXhlbWUgdHlwZSAnXCIgKyBuZXh0TGV4ZW1lLnR5cGUgKyBcIidcIjtcbiAgICAgICAgdGhyb3cgbmV3IGx1bnIuUXVlcnlQYXJzZUVycm9yKFxuICAgICAgICAgIGVycm9yTWVzc2FnZSxcbiAgICAgICAgICBuZXh0TGV4ZW1lLnN0YXJ0LFxuICAgICAgICAgIG5leHRMZXhlbWUuZW5kXG4gICAgICAgICk7XG4gICAgfVxuICB9O1xuXG4gIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VCb29zdCA9IGZ1bmN0aW9uIChwYXJzZXIpIHtcbiAgICB2YXIgbGV4ZW1lID0gcGFyc2VyLmNvbnN1bWVMZXhlbWUoKTtcblxuICAgIGlmIChsZXhlbWUgPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGJvb3N0ID0gcGFyc2VJbnQobGV4ZW1lLnN0ciwgMTApO1xuXG4gICAgaWYgKGlzTmFOKGJvb3N0KSkge1xuICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IFwiYm9vc3QgbXVzdCBiZSBudW1lcmljXCI7XG4gICAgICB0aHJvdyBuZXcgbHVuci5RdWVyeVBhcnNlRXJyb3IoZXJyb3JNZXNzYWdlLCBsZXhlbWUuc3RhcnQsIGxleGVtZS5lbmQpO1xuICAgIH1cblxuICAgIHBhcnNlci5jdXJyZW50Q2xhdXNlLmJvb3N0ID0gYm9vc3Q7XG5cbiAgICB2YXIgbmV4dExleGVtZSA9IHBhcnNlci5wZWVrTGV4ZW1lKCk7XG5cbiAgICBpZiAobmV4dExleGVtZSA9PSB1bmRlZmluZWQpIHtcbiAgICAgIHBhcnNlci5uZXh0Q2xhdXNlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc3dpdGNoIChuZXh0TGV4ZW1lLnR5cGUpIHtcbiAgICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLlRFUk06XG4gICAgICAgIHBhcnNlci5uZXh0Q2xhdXNlKCk7XG4gICAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlVGVybTtcbiAgICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkZJRUxEOlxuICAgICAgICBwYXJzZXIubmV4dENsYXVzZSgpO1xuICAgICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZUZpZWxkO1xuICAgICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuRURJVF9ESVNUQU5DRTpcbiAgICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VFZGl0RGlzdGFuY2U7XG4gICAgICBjYXNlIGx1bnIuUXVlcnlMZXhlci5CT09TVDpcbiAgICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VCb29zdDtcbiAgICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLlBSRVNFTkNFOlxuICAgICAgICBwYXJzZXIubmV4dENsYXVzZSgpO1xuICAgICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZVByZXNlbmNlO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IFwiVW5leHBlY3RlZCBsZXhlbWUgdHlwZSAnXCIgKyBuZXh0TGV4ZW1lLnR5cGUgKyBcIidcIjtcbiAgICAgICAgdGhyb3cgbmV3IGx1bnIuUXVlcnlQYXJzZUVycm9yKFxuICAgICAgICAgIGVycm9yTWVzc2FnZSxcbiAgICAgICAgICBuZXh0TGV4ZW1lLnN0YXJ0LFxuICAgICAgICAgIG5leHRMZXhlbWUuZW5kXG4gICAgICAgICk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBleHBvcnQgdGhlIG1vZHVsZSB2aWEgQU1ELCBDb21tb25KUyBvciBhcyBhIGJyb3dzZXIgZ2xvYmFsXG4gICAqIEV4cG9ydCBjb2RlIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL3VtZGpzL3VtZC9ibG9iL21hc3Rlci9yZXR1cm5FeHBvcnRzLmpzXG4gICAqL1xuICAoZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICAgIGRlZmluZShmYWN0b3J5KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAvKipcbiAgICAgICAqIE5vZGUuIERvZXMgbm90IHdvcmsgd2l0aCBzdHJpY3QgQ29tbW9uSlMsIGJ1dFxuICAgICAgICogb25seSBDb21tb25KUy1saWtlIGVudmlyb21lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cyxcbiAgICAgICAqIGxpa2UgTm9kZS5cbiAgICAgICAqL1xuICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpXG4gICAgICByb290Lmx1bnIgPSBmYWN0b3J5KCk7XG4gICAgfVxuICB9KSh0aGlzLCBmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogSnVzdCByZXR1cm4gYSB2YWx1ZSB0byBkZWZpbmUgdGhlIG1vZHVsZSBleHBvcnQuXG4gICAgICogVGhpcyBleGFtcGxlIHJldHVybnMgYW4gb2JqZWN0LCBidXQgdGhlIG1vZHVsZVxuICAgICAqIGNhbiByZXR1cm4gYSBmdW5jdGlvbiBhcyB0aGUgZXhwb3J0ZWQgdmFsdWUuXG4gICAgICovXG4gICAgcmV0dXJuIGx1bnI7XG4gIH0pO1xufSkoKTtcbiIsCiAgICAiaW1wb3J0IGx1bnIgZnJvbSBcImx1bnJcIjtcblxuLyoqXG4gKiBUaGlzIGlzIGEgbG90IG9mIGhhY2t5IGJ1bGxzaGl0LiBUaGUgbWFpbiB0aGluZyBpcyB0aGVyZSdzIGEgcG9wb3ZlciBlbGVtZW50LCBhIGRlYm91bmNlZCBpbnB1dFxuICogZmllbGQsIGEgc2VhcmNoIGZ1bmN0aW9uLCBhbmQgYSBmdW5jdGlvbiB0aGF0IGJ1aWxkcyBhbiBIVE1MIHN0cmluZyB0byBwbG9wIGludG8gdGhlIHJlc3VsdHMuXG4gKi9cblxuaW50ZXJmYWNlIE1hdGNoRGF0YSB7XG4gIG1ldGFkYXRhOiBSZWNvcmQ8XG4gICAgc3RyaW5nLFxuICAgIFJlY29yZDxrZXlvZiBTZWFyY2hEb2MsIHsgcG9zaXRpb246IFtudW1iZXIsIG51bWJlcl1bXSB9PlxuICA+O1xufVxuXG5pbnRlcmZhY2UgU2VhcmNoRG9jIHtcbiAgbmFtZTogc3RyaW5nO1xuICB1cmw6IHN0cmluZztcbiAgdGV4dDogc3RyaW5nO1xufVxuXG5mdW5jdGlvbiBkb1NlYXJjaChcbiAgZG9jc0J5UmVmOiBSZWNvcmQ8c3RyaW5nLCBTZWFyY2hEb2M+LFxuICBsOiBsdW5yLkluZGV4LFxuICBxdWVyeTogc3RyaW5nLFxuICByZXN1bHRFbDogSFRNTERpdkVsZW1lbnRcbikge1xuICBpZiAoIXF1ZXJ5LnRyaW0oKS5sZW5ndGgpIHtcbiAgICByZXN1bHRFbC5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz1cIkRKU2VhcmNoUmVzdWx0c19FbXB0eSBtLW5vcXVlcnlcIj5UeXBlIGEgc2VhcmNoIGludG8gdGhlIGJveC48L2Rpdj5gO1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCByZXN1bHRzID0gbC5xdWVyeShmdW5jdGlvbiAocSkge1xuICAgIHEudGVybShxdWVyeSwgeyBib29zdDogMTAwLCB1c2VQaXBlbGluZTogdHJ1ZSB9KTtcbiAgICBxLnRlcm0ocXVlcnksIHtcbiAgICAgIGJvb3N0OiAxMCxcbiAgICAgIHVzZVBpcGVsaW5lOiBmYWxzZSxcbiAgICAgIHdpbGRjYXJkOiBsdW5yLlF1ZXJ5LndpbGRjYXJkLlRSQUlMSU5HLFxuICAgIH0pO1xuICAgIHEudGVybShxdWVyeSwgeyBib29zdDogMSwgZWRpdERpc3RhbmNlOiAxIH0pO1xuICB9KTtcblxuICBpZiAoIXJlc3VsdHMubGVuZ3RoKSB7XG4gICAgcmVzdWx0RWwuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9XCJESlNlYXJjaFJlc3VsdHNfRW1wdHkgbS1ub3Jlc3VsdHNcIj5ObyByZXN1bHRzIGZvdW5kLjwvZGl2PmA7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcmVzdWx0RWwuaW5uZXJIVE1MID0gcmVzdWx0c1xuICAgIC5tYXAoKHIpID0+IGJ1aWxkUmVzdWx0SFRNTChyLCBkb2NzQnlSZWZbci5yZWZdKSlcbiAgICAuam9pbihcIlxcblwiKTtcbn1cblxuZnVuY3Rpb24gYnVpbGRSZXN1bHRIVE1MKHJlc3VsdDogbHVuci5JbmRleC5SZXN1bHQsIGRvYzogU2VhcmNoRG9jKTogc3RyaW5nIHtcbiAgY29uc3QgbWV0YWRhdGEgPSAocmVzdWx0Lm1hdGNoRGF0YSBhcyBNYXRjaERhdGEpLm1ldGFkYXRhO1xuICByZXR1cm4gYFxuICA8YSBjbGFzcz1cIkRKU2VhcmNoUmVzdWx0XCIgdGFiaW5kZXg9XCIwXCIgaHJlZj1cIiR7ZG9jLnVybH1cIj5cbiAgICA8aDE+JHtidWlsZEhpZ2hsaWdodGVkVGVybXNIVE1MKGRvYy5uYW1lLCBcIm5hbWVcIiwgbWV0YWRhdGEsIGZhbHNlKX08L2gxPlxuICAgIDxkaXYgY2xhc3M9XCJESlNlYXJjaFJlc3VsdF9UZXh0XCI+JHtidWlsZEhpZ2hsaWdodGVkVGVybXNIVE1MKFxuICAgICAgZG9jLnRleHQsXG4gICAgICBcInRleHRcIixcbiAgICAgIG1ldGFkYXRhLFxuICAgICAgdHJ1ZVxuICAgICl9PC9kaXY+XG4gIDwvZGl2PmA7XG59XG5cbmludGVyZmFjZSBTdWJzdHJpbmdMaW5lIHtcbiAgc3RhcnRJbmNsdXNpdmU6IG51bWJlcjtcbiAgZW5kRXhjbHVzaXZlOiBudW1iZXI7XG4gIHRleHQ6IHN0cmluZztcbn1cblxuZnVuY3Rpb24gYnVpbGRIaWdobGlnaHRlZFRlcm1zSFRNTChcbiAgdGV4dDogc3RyaW5nLFxuICBtZXRhZGF0YUtleToga2V5b2YgU2VhcmNoRG9jLFxuICBtZXRhZGF0YTogTWF0Y2hEYXRhW1wibWV0YWRhdGFcIl0sIC8vIHRlcm06IGZpZWxkOiBwb3NpdGlvbltdXG4gIHVzZVBhcmFncmFwaHM6IGJvb2xlYW5cbik6IHN0cmluZyB7XG4gIGNvbnN0IHJlc3VsdCA9IG5ldyBBcnJheTxzdHJpbmc+KCk7XG4gIGxldCBwb3NpdGlvbnMgPSBuZXcgQXJyYXk8W251bWJlciwgbnVtYmVyXT4oKTtcblxuICBmb3IgKGNvbnN0IHRlcm1NZXRhZGF0YSBvZiBPYmplY3QudmFsdWVzKG1ldGFkYXRhKSkge1xuICAgIGlmICghdGVybU1ldGFkYXRhW21ldGFkYXRhS2V5XSkgY29udGludWU7XG4gICAgcG9zaXRpb25zID0gcG9zaXRpb25zLmNvbmNhdCh0ZXJtTWV0YWRhdGFbbWV0YWRhdGFLZXldLnBvc2l0aW9uKTtcbiAgfVxuICBwb3NpdGlvbnMuc29ydCgoYSwgYikgPT4gYVswXSAtIGJbMF0pO1xuXG4gIGxldCB0ZXh0SW5kZXggPSAwO1xuXG4gIGZ1bmN0aW9uIGdldE5leHRMaW5lKCk6IG51bGwgfCBTdWJzdHJpbmdMaW5lIHtcbiAgICBpZiAodGV4dEluZGV4ID49IHRleHQubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBsYkluZGV4ID0gdGV4dC5pbmRleE9mKFwiXFxuXCIsIHRleHRJbmRleCk7XG4gICAgY29uc3Qgb3JpZ2luYWxUZXh0SW5kZXggPSB0ZXh0SW5kZXg7XG4gICAgbGV0IHN1YnN0cmluZyA9IFwiXCI7XG4gICAgaWYgKGxiSW5kZXggPj0gMCkge1xuICAgICAgc3Vic3RyaW5nID0gdGV4dC5zbGljZSh0ZXh0SW5kZXgsIGxiSW5kZXgpO1xuICAgICAgdGV4dEluZGV4ID0gbGJJbmRleCArIDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN1YnN0cmluZyA9IHRleHQuc2xpY2UodGV4dEluZGV4KTtcbiAgICAgIHRleHRJbmRleCA9IHRleHQubGVuZ3RoO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgc3RhcnRJbmNsdXNpdmU6IG9yaWdpbmFsVGV4dEluZGV4LFxuICAgICAgZW5kRXhjbHVzaXZlOiB0ZXh0SW5kZXgsXG4gICAgICB0ZXh0OiBzdWJzdHJpbmcsXG4gICAgfTtcbiAgfVxuXG4gIGlmICh1c2VQYXJhZ3JhcGhzKSB7XG4gICAgbGV0IG5leHRMaW5lID0gZ2V0TmV4dExpbmUoKTtcbiAgICB3aGlsZSAobmV4dExpbmUpIHtcbiAgICAgIC8vIFdBUk5JTkc6IE5eMiBBTEdPUklUSE0hXG4gICAgICBjb25zdCByZWxldmFudFBvc2l0aW9ucyA9IHBvc2l0aW9ucy5maWx0ZXIoXG4gICAgICAgIChwb3MpID0+XG4gICAgICAgICAgcG9zWzBdID49IG5leHRMaW5lIS5zdGFydEluY2x1c2l2ZSAmJiBwb3NbMF0gPCBuZXh0TGluZSEuZW5kRXhjbHVzaXZlXG4gICAgICApO1xuICAgICAgaWYgKHJlbGV2YW50UG9zaXRpb25zLmxlbmd0aClcbiAgICAgICAgcmVzdWx0LnB1c2goYDxwPiR7bGluZVRvSFRNTChuZXh0TGluZSwgcmVsZXZhbnRQb3NpdGlvbnMpfWApO1xuICAgICAgbmV4dExpbmUgPSBnZXROZXh0TGluZSgpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXN1bHQucHVzaChcbiAgICAgIGxpbmVUb0hUTUwoXG4gICAgICAgIHsgc3RhcnRJbmNsdXNpdmU6IDAsIGVuZEV4Y2x1c2l2ZTogdGV4dC5sZW5ndGgsIHRleHQgfSxcbiAgICAgICAgcG9zaXRpb25zXG4gICAgICApXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQuam9pbihcIlxcblwiKTtcbn1cblxuZnVuY3Rpb24gbGluZVRvSFRNTChcbiAgbGluZTogU3Vic3RyaW5nTGluZSxcbiAgcG9zaXRpb25zOiBbbnVtYmVyLCBudW1iZXJdW11cbik6IHN0cmluZyB7XG4gIGNvbnN0IHJlc3VsdCA9IG5ldyBBcnJheTxzdHJpbmc+KCk7XG5cbiAgbGV0IGxhc3RQbGFpbkluZGV4ID0gMDtcblxuICBmb3IgKGNvbnN0IFtzdGFydCwgbGVuXSBvZiBwb3NpdGlvbnMpIHtcbiAgICBjb25zdCBsb2NhbFN0YXJ0ID0gc3RhcnQgLSBsaW5lLnN0YXJ0SW5jbHVzaXZlO1xuICAgIGlmIChsb2NhbFN0YXJ0ID4gbGFzdFBsYWluSW5kZXgpIHtcbiAgICAgIHJlc3VsdC5wdXNoKGxpbmUudGV4dC5zbGljZShsYXN0UGxhaW5JbmRleCwgbG9jYWxTdGFydCkpO1xuICAgIH1cbiAgICByZXN1bHQucHVzaChcIjxtYXJrPlwiKTtcbiAgICByZXN1bHQucHVzaChsaW5lLnRleHQuc2xpY2UobG9jYWxTdGFydCwgbG9jYWxTdGFydCArIGxlbikpO1xuICAgIHJlc3VsdC5wdXNoKFwiPC9tYXJrPlwiKTtcbiAgICBsYXN0UGxhaW5JbmRleCA9IGxvY2FsU3RhcnQgKyBsZW47XG4gIH1cblxuICBpZiAobGFzdFBsYWluSW5kZXggPCBsaW5lLnRleHQubGVuZ3RoKSB7XG4gICAgcmVzdWx0LnB1c2gobGluZS50ZXh0LnNsaWNlKGxhc3RQbGFpbkluZGV4KSk7XG4gIH1cblxuICBpZiAoIXJlc3VsdC5sZW5ndGgpIHJldHVybiBcIlwiO1xuXG4gIHJldHVybiByZXN1bHQuam9pbihcIlwiKTtcbn1cblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJkai1vbmxvYWRcIiwgKCkgPT4ge1xuICBjb25zdCBpbnB1dEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICBcIiNkai1zZWFyY2gtaW5wdXRcIlxuICApIGFzIEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsO1xuICBpZiAoIWlucHV0RWwpIHJldHVybjtcblxuICBjb25zdCByZXN1bHRFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgXCIjZGotc2VhcmNoLW1lbnUtcmVzdWx0c1wiXG4gICkhIGFzIEhUTUxEaXZFbGVtZW50O1xuICBpZiAoIXJlc3VsdEVsKSByZXR1cm47XG5cbiAgY29uc3QgcG9wb3ZlckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICBcIiNkai1zZWFyY2gtbWVudVwiXG4gICkhIGFzIEhUTUxEaXZFbGVtZW50O1xuICBpZiAoIXBvcG92ZXJFbCkgcmV0dXJuO1xuXG4gIC8vIFRoZSBmbGV4IGNvbnRhaW5lciBzZWVtcyB0byBwcmV2ZW50IHRoZSBiYWNrZHJvcCBmcm9tIGdldHRpbmcgY2xpY2sgZXZlbnRzLiA6LShcbiAgLy8gU28ganVzdCBjbG9zZSB0aGUgZGFtbiB0aGluZyBvbiBjbGljay5cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5ESlNlYXJjaE1lbnVfRmxleENvbnRhaW5lclwiKS5mb3JFYWNoKChmbGV4RWwpID0+IHtcbiAgICBmbGV4RWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICBpZiAoZS50YXJnZXQgIT09IGZsZXhFbCkgcmV0dXJuO1xuICAgICAgcG9wb3ZlckVsLmhpZGVQb3BvdmVyKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGNvbnN0IHdpbiA9IHdpbmRvdyBhcyB7XG4gICAgZGpTZWFyY2hJbmRleD86IHsgbmFtZTogc3RyaW5nOyB0ZXh0OiBzdHJpbmc7IHVybDogc3RyaW5nIH1bXTtcbiAgfTtcbiAgaWYgKCF3aW4uZGpTZWFyY2hJbmRleCkge1xuICAgIGNvbnNvbGUud2FybihcIlNlYXJjaCBpbmRleCBub3QgZm91bmRcIik7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHNlYXJjaEluZGV4ID0gd2luLmRqU2VhcmNoSW5kZXg7XG5cbiAgY29uc3QgZG9jc0J5UmVmOiBSZWNvcmQ8c3RyaW5nLCBTZWFyY2hEb2M+ID0ge307XG5cbiAgY29uc3QgbCA9IGx1bnIoZnVuY3Rpb24gKCkge1xuICAgIHRoaXMucmVmKFwidXJsXCIpO1xuICAgIHRoaXMuZmllbGQoXCJuYW1lXCIpO1xuICAgIHRoaXMuZmllbGQoXCJ0ZXh0XCIpO1xuICAgIHRoaXMuZmllbGQoXCJ1cmxcIik7XG5cbiAgICB0aGlzLm1ldGFkYXRhV2hpdGVsaXN0ID0gW1wicG9zaXRpb25cIl07XG5cbiAgICBmb3IgKGNvbnN0IGRvYyBvZiBzZWFyY2hJbmRleCkge1xuICAgICAgdGhpcy5hZGQoZG9jKTtcbiAgICAgIGRvY3NCeVJlZltkb2MudXJsXSA9IGRvYztcbiAgICB9XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGRlYm91bmNlKFxuICAgIGZ1bmM6IEZ1bmN0aW9uLFxuICAgIHdhaXQ6IG51bWJlcixcbiAgICBpbW1lZGlhdGU6IGJvb2xlYW4gPSBmYWxzZSxcbiAgICBhbHdheXNJbW1lZGlhdGVDYWxsYmFjaz86ICgpID0+IHZvaWRcbiAgKTogdHlwZW9mIGZ1bmMge1xuICAgIGxldCB0aW1lb3V0OiBhbnkgfCBudWxsID0gbnVsbDtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRoaXM6IHVua25vd24pIHtcbiAgICAgIGxldCBjb250ZXh0ID0gdGhpcztcbiAgICAgIGxldCBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgbGV0IGxhdGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgaWYgKCFpbW1lZGlhdGUpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICB9O1xuICAgICAgbGV0IGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXQ7XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dCEpO1xuICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuICAgICAgaWYgKGFsd2F5c0ltbWVkaWF0ZUNhbGxiYWNrKSBhbHdheXNJbW1lZGlhdGVDYWxsYmFjaygpO1xuICAgICAgaWYgKGNhbGxOb3cpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IGRlYm91bmNlZFNlYXJjaGVyID0gZGVib3VuY2UoKHF1ZXJ5OiBzdHJpbmcpID0+IHtcbiAgICBkb1NlYXJjaChkb2NzQnlSZWYsIGwsIHF1ZXJ5LCByZXN1bHRFbCk7XG4gIH0sIDUwMCk7XG5cbiAgLy8gdXNlICdpbnB1dCcgZm9yIGtleXN0cm9rZXMsICdjaGFuZ2UnIGZvciBlbnRlciBvciB1bmZvY3VzXG4gIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XG4gICAgZGVib3VuY2VkU2VhcmNoZXIoKGUudGFyZ2V0ISBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSk7XG4gIH0pO1xuXG4gIChcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLkRKT3BlblNlYXJjaEJ1dHRvblwiKSEgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgcG9wb3ZlckVsLnNob3dQb3BvdmVyKCk7XG4gICAgaW5wdXRFbC5mb2N1cygpO1xuICAgIHJldHVybiB0cnVlO1xuICB9KTtcblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGUpID0+IHtcbiAgICBpZiAocG9wb3ZlckVsLm1hdGNoZXMoXCI6cG9wb3Zlci1vcGVuXCIpKSByZXR1cm47XG4gICAgaWYgKGUua2V5ID09PSBcIi9cIikge1xuICAgICAgcG9wb3ZlckVsLnNob3dQb3BvdmVyKCk7XG4gICAgICBpbnB1dEVsLmZvY3VzKCk7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9KTtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICBwb3BvdmVyRWwuaGlkZVBvcG92ZXIo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
